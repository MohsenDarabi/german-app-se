import{s as De,n as F,d as _,r as je,a as z,z as _e,i as S,b as l,m as le,l as c,c as v,e as w,f as N,g as x,p as T,h as f,t as P,j as V,o as Ee,q as Ie,Q as ge}from"../chunks/scheduler.-13gY_0V.js";import{S as xe,i as Ve,a as de,t as ve,c as ye,d as Le,m as Te,e as Me,b as He,g as Re}from"../chunks/index.CL68AUYa.js";import{d as fe}from"../chunks/index.lHhEmOCy.js";import{p as Be}from"../chunks/audio.D-onYBYO.js";const be=[24*60*60*1e3,3*24*60*60*1e3,7*24*60*60*1e3,14*24*60*60*1e3,30*24*60*60*1e3];function Ge(a,e){if(!e)return{nextLevel:0,nextReviewDate:new Date(Date.now()+be[0])};const t=Math.min(a+1,4);return{nextLevel:t,nextReviewDate:new Date(Date.now()+be[t])}}async function Ne(){const a=new Date;return await fe.vocab.where("nextReview").belowOrEqual(a).toArray()}async function Pe(a,e){const t=await fe.vocab.get(a);if(!t)return;const s=t.srsLevel??0,{nextLevel:r,nextReviewDate:o}=Ge(s,e);await fe.vocab.update(a,{srsLevel:r,nextReview:o})}function Ce(a){let e,t,s=a[0].example+"",r,o,u,p="Example";return{c(){e=f("div"),t=f("p"),r=P(s),o=V(),u=f("p"),u.textContent=p,this.h()},l(d){e=v(d,"DIV",{class:!0});var i=w(e);t=v(i,"P",{class:!0});var m=w(t);r=N(m,s),m.forEach(_),o=x(i),u=v(i,"P",{class:!0,"data-svelte-h":!0}),T(u)!=="svelte-f4tr50"&&(u.textContent=p),i.forEach(_),this.h()},h(){c(t,"class","example-text svelte-1f3860k"),c(u,"class","example-label svelte-1f3860k"),c(e,"class","example-box svelte-1f3860k")},m(d,i){S(d,e,i),l(e,t),l(t,r),l(e,o),l(e,u)},p(d,i){i&1&&s!==(s=d[0].example+"")&&z(r,s)},d(d){d&&_(e)}}}function ke(a){let e,t,s=`‚ùå Wrong
        <span class="btn-subtitle svelte-1f3860k">Back to Box 1</span>`,r,o,u=`‚úÖ Correct
        <span class="btn-subtitle svelte-1f3860k">Next Box</span>`,p,d;return{c(){e=f("div"),t=f("button"),t.innerHTML=s,r=V(),o=f("button"),o.innerHTML=u,this.h()},l(i){e=v(i,"DIV",{class:!0});var m=w(e);t=v(m,"BUTTON",{class:!0,"data-svelte-h":!0}),T(t)!=="svelte-1x63uea"&&(t.innerHTML=s),r=x(m),o=v(m,"BUTTON",{class:!0,"data-svelte-h":!0}),T(o)!=="svelte-129voyk"&&(o.innerHTML=u),m.forEach(_),this.h()},h(){c(t,"class","wrong-btn svelte-1f3860k"),c(o,"class","correct-btn svelte-1f3860k"),c(e,"class","grade-buttons svelte-1f3860k")},m(i,m){S(i,e,m),l(e,t),l(e,r),l(e,o),p||(d=[le(t,"click",a[7]),le(o,"click",a[8])],p=!0)},p:F,d(i){i&&_(e),p=!1,je(d)}}}function Ae(a){let e,t,s,r,o,u=a[0].word+"",p,d,i,m="üîä",C,n,h="Click to reveal translation",L,b,B,E=a[0].translation+"",O,g,D,I,A,j=a[0].example&&Ce(a),k=a[1]&&ke(a);return{c(){e=f("div"),t=f("div"),s=f("div"),r=f("div"),o=f("h2"),p=P(u),d=V(),i=f("button"),i.textContent=m,C=V(),n=f("p"),n.textContent=h,L=V(),b=f("div"),B=f("p"),O=P(E),g=V(),j&&j.c(),D=V(),k&&k.c(),this.h()},l(y){e=v(y,"DIV",{class:!0});var M=w(e);t=v(M,"DIV",{class:!0,role:!0,tabindex:!0});var W=w(t);s=v(W,"DIV",{class:!0});var U=w(s);r=v(U,"DIV",{class:!0});var R=w(r);o=v(R,"H2",{class:!0});var se=w(o);p=N(se,u),se.forEach(_),d=x(R),i=v(R,"BUTTON",{class:!0,"aria-label":!0,"data-svelte-h":!0}),T(i)!=="svelte-1lenzl9"&&(i.textContent=m),C=x(R),n=v(R,"P",{class:!0,"data-svelte-h":!0}),T(n)!=="svelte-1lfu7uv"&&(n.textContent=h),R.forEach(_),L=x(U),b=v(U,"DIV",{class:!0});var Q=w(b);B=v(Q,"P",{class:!0});var G=w(B);O=N(G,E),G.forEach(_),g=x(Q),j&&j.l(Q),Q.forEach(_),U.forEach(_),W.forEach(_),D=x(M),k&&k.l(M),M.forEach(_),this.h()},h(){c(o,"class","word svelte-1f3860k"),c(i,"class","audio-btn svelte-1f3860k"),c(i,"aria-label","Play pronunciation"),c(n,"class","hint svelte-1f3860k"),c(r,"class","flashcard-front svelte-1f3860k"),c(B,"class","translation svelte-1f3860k"),c(b,"class","flashcard-back svelte-1f3860k"),c(s,"class","flashcard-inner svelte-1f3860k"),c(t,"class","flashcard svelte-1f3860k"),c(t,"role","button"),c(t,"tabindex","0"),_e(t,"flipped",a[1]),c(e,"class","flashcard-wrapper svelte-1f3860k")},m(y,M){S(y,e,M),l(e,t),l(t,s),l(s,r),l(r,o),l(o,p),l(r,d),l(r,i),l(r,C),l(r,n),l(s,L),l(s,b),l(b,B),l(B,O),l(b,g),j&&j.m(b,null),l(e,D),k&&k.m(e,null),I||(A=[le(i,"click",a[3]),le(t,"click",a[2]),le(t,"keydown",a[6])],I=!0)},p(y,[M]){M&1&&u!==(u=y[0].word+"")&&z(p,u),M&1&&E!==(E=y[0].translation+"")&&z(O,E),y[0].example?j?j.p(y,M):(j=Ce(y),j.c(),j.m(b,null)):j&&(j.d(1),j=null),M&2&&_e(t,"flipped",y[1]),y[1]?k?k.p(y,M):(k=ke(y),k.c(),k.m(e,null)):k&&(k.d(1),k=null)},i:F,o:F,d(y){y&&_(e),j&&j.d(),k&&k.d(),I=!1,je(A)}}}function Fe(a,e,t){let{card:s}=e,{onGrade:r}=e,o=!1;function u(){t(1,o=!o)}function p(n){n.stopPropagation(),Be(s.word,"de-DE")}function d(n,h){h.stopPropagation(),r(n),t(1,o=!1)}const i=n=>n.key==="Enter"&&u(),m=n=>d(!1,n),C=n=>d(!0,n);return a.$$set=n=>{"card"in n&&t(0,s=n.card),"onGrade"in n&&t(5,r=n.onGrade)},[s,o,u,p,d,r,i,m,C]}class Oe extends xe{constructor(e){super(),Ve(this,e,Fe,Ae,De,{card:0,onGrade:5})}}function we(a){let e,t,s,r,o=a[0].length+"",u,p,d,i,m;return{c(){e=f("div"),t=f("div"),s=P(a[1]),r=P(" / "),u=P(o),p=P(" reviewed"),d=V(),i=f("div"),m=f("div"),this.h()},l(C){e=v(C,"DIV",{class:!0});var n=w(e);t=v(n,"DIV",{class:!0});var h=w(t);s=N(h,a[1]),r=N(h," / "),u=N(h,o),p=N(h," reviewed"),h.forEach(_),d=x(n),i=v(n,"DIV",{class:!0});var L=w(i);m=v(L,"DIV",{class:!0,style:!0}),w(m).forEach(_),L.forEach(_),n.forEach(_),this.h()},h(){c(t,"class","progress-text svelte-1jgt9m4"),c(m,"class","progress-fill svelte-1jgt9m4"),ge(m,"width",a[5]+"%"),c(i,"class","progress-bar svelte-1jgt9m4"),c(e,"class","progress-info svelte-1jgt9m4")},m(C,n){S(C,e,n),l(e,t),l(t,s),l(t,r),l(t,u),l(t,p),l(e,d),l(e,i),l(i,m)},p(C,n){n&2&&z(s,C[1]),n&1&&o!==(o=C[0].length+"")&&z(u,o),n&32&&ge(m,"width",C[5]+"%")},d(C){C&&_(e)}}}function qe(a){let e,t;return e=new Oe({props:{card:a[7],onGrade:a[8]}}),{c(){He(e.$$.fragment)},l(s){Me(e.$$.fragment,s)},m(s,r){Te(e,s,r),t=!0},p(s,r){const o={};r&128&&(o.card=s[7]),e.$set(o)},i(s){t||(ve(e.$$.fragment,s),t=!0)},o(s){de(e.$$.fragment,s),t=!1},d(s){Le(e,s)}}}function ze(a){let e,t='<div class="empty-icon svelte-1jgt9m4">üéä</div> <h2 class="svelte-1jgt9m4">No Cards Due!</h2> <p class="svelte-1jgt9m4">Great job! You&#39;ve reviewed all your vocabulary.</p> <p class="empty-subtitle svelte-1jgt9m4">Come back later when more cards are due for review.</p> <div class="empty-actions svelte-1jgt9m4"><a href="/" class="primary-btn svelte-1jgt9m4">Back to Dashboard</a> <a href="/vocabulary" class="secondary-btn svelte-1jgt9m4">View Vocabulary List</a></div>';return{c(){e=f("div"),e.innerHTML=t,this.h()},l(s){e=v(s,"DIV",{class:!0,"data-svelte-h":!0}),T(e)!=="svelte-196aprn"&&(e.innerHTML=t),this.h()},h(){c(e,"class","empty-state svelte-1jgt9m4")},m(s,r){S(s,e,r)},p:F,i:F,o:F,d(s){s&&_(e)}}}function Se(a){let e,t,s="üéâ",r,o,u="Review Complete!",p,d,i,m,C="üìä",n,h,L,b,B,E,O="Score",g,D,I,A="‚úÖ",j,k,y,M,W,U,R,se="Correct",Q,G,X,ue="üé¥",re,K,ae,ie,Y,he="Cards Reviewed",oe,J,me='<a href="/" class="primary-btn svelte-1jgt9m4">Back to Dashboard</a> <a href="/vocabulary" class="secondary-btn svelte-1jgt9m4">View Vocabulary List</a>';return{c(){e=f("div"),t=f("div"),t.textContent=s,r=V(),o=f("h2"),o.textContent=u,p=V(),d=f("div"),i=f("div"),m=f("div"),m.textContent=C,n=V(),h=f("div"),L=P(a[6]),b=P("%"),B=V(),E=f("div"),E.textContent=O,g=V(),D=f("div"),I=f("div"),I.textContent=A,j=V(),k=f("div"),y=P(a[2]),M=P("/"),W=P(a[1]),U=V(),R=f("div"),R.textContent=se,Q=V(),G=f("div"),X=f("div"),X.textContent=ue,re=V(),K=f("div"),ae=P(a[1]),ie=V(),Y=f("div"),Y.textContent=he,oe=V(),J=f("div"),J.innerHTML=me,this.h()},l(q){e=v(q,"DIV",{class:!0});var H=w(e);t=v(H,"DIV",{class:!0,"data-svelte-h":!0}),T(t)!=="svelte-l7p6fs"&&(t.textContent=s),r=x(H),o=v(H,"H2",{class:!0,"data-svelte-h":!0}),T(o)!=="svelte-qmxj8k"&&(o.textContent=u),p=x(H),d=v(H,"DIV",{class:!0});var Z=w(d);i=v(Z,"DIV",{class:!0});var $=w(i);m=v($,"DIV",{class:!0,"data-svelte-h":!0}),T(m)!=="svelte-r7kgn0"&&(m.textContent=C),n=x($),h=v($,"DIV",{class:!0});var ce=w(h);L=N(ce,a[6]),b=N(ce,"%"),ce.forEach(_),B=x($),E=v($,"DIV",{class:!0,"data-svelte-h":!0}),T(E)!=="svelte-n1gkmy"&&(E.textContent=O),$.forEach(_),g=x(Z),D=v(Z,"DIV",{class:!0});var ee=w(D);I=v(ee,"DIV",{class:!0,"data-svelte-h":!0}),T(I)!=="svelte-1vwwmbk"&&(I.textContent=A),j=x(ee),k=v(ee,"DIV",{class:!0});var ne=w(k);y=N(ne,a[2]),M=N(ne,"/"),W=N(ne,a[1]),ne.forEach(_),U=x(ee),R=v(ee,"DIV",{class:!0,"data-svelte-h":!0}),T(R)!=="svelte-1gkn0di"&&(R.textContent=se),ee.forEach(_),Q=x(Z),G=v(Z,"DIV",{class:!0});var te=w(G);X=v(te,"DIV",{class:!0,"data-svelte-h":!0}),T(X)!=="svelte-tgpz2h"&&(X.textContent=ue),re=x(te),K=v(te,"DIV",{class:!0});var pe=w(K);ae=N(pe,a[1]),pe.forEach(_),ie=x(te),Y=v(te,"DIV",{class:!0,"data-svelte-h":!0}),T(Y)!=="svelte-piaspm"&&(Y.textContent=he),te.forEach(_),Z.forEach(_),oe=x(H),J=v(H,"DIV",{class:!0,"data-svelte-h":!0}),T(J)!=="svelte-1bcgx8a"&&(J.innerHTML=me),H.forEach(_),this.h()},h(){c(t,"class","completion-icon svelte-1jgt9m4"),c(o,"class","svelte-1jgt9m4"),c(m,"class","stat-icon svelte-1jgt9m4"),c(h,"class","stat-value svelte-1jgt9m4"),c(E,"class","stat-label svelte-1jgt9m4"),c(i,"class","stat-card svelte-1jgt9m4"),c(I,"class","stat-icon svelte-1jgt9m4"),c(k,"class","stat-value svelte-1jgt9m4"),c(R,"class","stat-label svelte-1jgt9m4"),c(D,"class","stat-card svelte-1jgt9m4"),c(X,"class","stat-icon svelte-1jgt9m4"),c(K,"class","stat-value svelte-1jgt9m4"),c(Y,"class","stat-label svelte-1jgt9m4"),c(G,"class","stat-card svelte-1jgt9m4"),c(d,"class","stats-grid svelte-1jgt9m4"),c(J,"class","completion-actions svelte-1jgt9m4"),c(e,"class","completion-screen svelte-1jgt9m4")},m(q,H){S(q,e,H),l(e,t),l(e,r),l(e,o),l(e,p),l(e,d),l(d,i),l(i,m),l(i,n),l(i,h),l(h,L),l(h,b),l(i,B),l(i,E),l(d,g),l(d,D),l(D,I),l(D,j),l(D,k),l(k,y),l(k,M),l(k,W),l(D,U),l(D,R),l(d,Q),l(d,G),l(G,X),l(G,re),l(G,K),l(K,ae),l(G,ie),l(G,Y),l(e,oe),l(e,J)},p(q,H){H&64&&z(L,q[6]),H&4&&z(y,q[2]),H&2&&z(W,q[1]),H&2&&z(ae,q[1])},i:F,o:F,d(q){q&&_(e)}}}function Ue(a){let e,t='<div class="spinner svelte-1jgt9m4"></div> <p>Loading flashcards...</p>';return{c(){e=f("div"),e.innerHTML=t,this.h()},l(s){e=v(s,"DIV",{class:!0,"data-svelte-h":!0}),T(e)!=="svelte-zsxvy2"&&(e.innerHTML=t),this.h()},h(){c(e,"class","loading-state svelte-1jgt9m4")},m(s,r){S(s,e,r)},p:F,i:F,o:F,d(s){s&&_(e)}}}function Qe(a){let e,t,s,r,o="‚Üê Back",u,p,d="Flashcard Review",i,m,C,n,h,L,b=!a[3]&&a[0].length>0&&we(a);const B=[Ue,Se,ze,qe],E=[];function O(g,D){return g[4]?0:g[3]?1:g[0].length===0?2:g[7]?3:-1}return~(n=O(a))&&(h=E[n]=B[n](a)),{c(){e=V(),t=f("div"),s=f("header"),r=f("a"),r.textContent=o,u=V(),p=f("h1"),p.textContent=d,i=V(),b&&b.c(),m=V(),C=f("main"),h&&h.c(),this.h()},l(g){Ee("svelte-1cp0205",document.head).forEach(_),e=x(g),t=v(g,"DIV",{class:!0});var I=w(t);s=v(I,"HEADER",{class:!0});var A=w(s);r=v(A,"A",{href:!0,class:!0,"data-svelte-h":!0}),T(r)!=="svelte-8wv6o5"&&(r.textContent=o),u=x(A),p=v(A,"H1",{class:!0,"data-svelte-h":!0}),T(p)!=="svelte-1jxcgpg"&&(p.textContent=d),i=x(A),b&&b.l(A),A.forEach(_),m=x(I),C=v(I,"MAIN",{class:!0});var j=w(C);h&&h.l(j),j.forEach(_),I.forEach(_),this.h()},h(){document.title="Flashcard Review - Deutschlern",c(r,"href","/"),c(r,"class","back-link svelte-1jgt9m4"),c(p,"class","svelte-1jgt9m4"),c(s,"class","review-header svelte-1jgt9m4"),c(C,"class","review-content svelte-1jgt9m4"),c(t,"class","review-page svelte-1jgt9m4")},m(g,D){S(g,e,D),S(g,t,D),l(t,s),l(s,r),l(s,u),l(s,p),l(s,i),b&&b.m(s,null),l(t,m),l(t,C),~n&&E[n].m(C,null),L=!0},p(g,[D]){!g[3]&&g[0].length>0?b?b.p(g,D):(b=we(g),b.c(),b.m(s,null)):b&&(b.d(1),b=null);let I=n;n=O(g),n===I?~n&&E[n].p(g,D):(h&&(Re(),de(E[I],1,1,()=>{E[I]=null}),ye()),~n?(h=E[n],h?h.p(g,D):(h=E[n]=B[n](g),h.c()),ve(h,1),h.m(C,null)):h=null)},i(g){L||(ve(h),L=!0)},o(g){de(h),L=!1},d(g){g&&(_(e),_(t)),b&&b.d(),~n&&E[n].d()}}}function We(a,e,t){let s,r,o,u=[],p=0,d=0,i=0,m=!1,C=!0;Ie(async()=>{t(0,u=await Ne()),t(4,C=!1)});async function n(h){const L=u[p];await Pe(L.id,h),t(1,d++,d),h&&t(2,i++,i),p<u.length-1?t(9,p++,p):t(3,m=!0)}return a.$$.update=()=>{a.$$.dirty&513&&t(7,s=u[p]),a.$$.dirty&6&&t(6,r=d>0?Math.round(i/d*100):0),a.$$.dirty&3&&t(5,o=u.length>0?Math.round(d/u.length*100):0)},[u,d,i,m,C,o,r,s,n,p]}class Ze extends xe{constructor(e){super(),Ve(this,e,We,Qe,De,{})}}export{Ze as component};
