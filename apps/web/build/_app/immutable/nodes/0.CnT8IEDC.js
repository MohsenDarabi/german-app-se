import{s as O,n as A,d as y,i as L,p as Y,o as g,c as _,u as S,h as b,b as v,e as k,g as C,j as E,a as W,f as V,t as B,V as X,W as J,X as K,Y as Q,v as Z}from"../chunks/scheduler.C2948b8o.js";import{S as j,i as U,a as I,t as M,g as ee,c as te,d as F,m as P,e as z,b as q}from"../chunks/index.DijD1KoF.js";import{s as G}from"../chunks/client.M3ojON4v.js";import{s as T}from"../chunks/syncEngine.CESiHSHf.js";function se(h){let e,t="خروج",s,l;return{c(){e=b("button"),e.textContent=t,this.h()},l(n){e=_(n,"BUTTON",{class:!0,"data-svelte-h":!0}),S(e)!=="svelte-1cyqx9s"&&(e.textContent=t),this.h()},h(){g(e,"class","logout-btn svelte-bpjc0m")},m(n,a){L(n,e,a),s||(l=Y(e,"click",h[0]),s=!0)},p:A,i:A,o:A,d(n){n&&y(e),s=!1,l()}}}function ae(h){async function e(){await G.auth.signOut(),window.location.href="/login"}return[e]}class le extends j{constructor(e){super(),U(this,e,ae,se,O,{})}}function R(h){let e,t='<a href="/" class="svelte-beeita">درس‌ها</a> <a href="/vocabulary" class="svelte-beeita">واژگان</a> <a href="/practice" class="svelte-beeita">تمرین‌ها</a> <a href="/progress" class="svelte-beeita">پیشرفت من</a>';return{c(){e=b("nav"),e.innerHTML=t,this.h()},l(s){e=_(s,"NAV",{class:!0,"data-svelte-h":!0}),S(e)!=="svelte-139j00j"&&(e.innerHTML=t),this.h()},h(){g(e,"class","nav-links svelte-beeita")},m(s,l){L(s,e,l)},d(s){s&&y(e)}}}function ne(h){let e,t="ورود";return{c(){e=b("a"),e.textContent=t,this.h()},l(s){e=_(s,"A",{href:!0,class:!0,"data-svelte-h":!0}),S(e)!=="svelte-gzewhb"&&(e.textContent=t),this.h()},h(){g(e,"href","/login"),g(e,"class","login-link svelte-beeita")},m(s,l){L(s,e,l)},p:A,i:A,o:A,d(s){s&&y(e)}}}function re(h){let e,t,s=h[0].email+"",l,n,a,u;return a=new le({}),{c(){e=b("div"),t=b("span"),l=B(s),n=E(),q(a.$$.fragment),this.h()},l(i){e=_(i,"DIV",{class:!0});var r=k(e);t=_(r,"SPAN",{class:!0});var o=k(t);l=V(o,s),o.forEach(y),n=C(r),z(a.$$.fragment,r),r.forEach(y),this.h()},h(){g(t,"class","user-email svelte-beeita"),g(e,"class","user-info svelte-beeita")},m(i,r){L(i,e,r),v(e,t),v(t,l),v(e,n),P(a,e,null),u=!0},p(i,r){(!u||r&1)&&s!==(s=i[0].email+"")&&W(l,s)},i(i){u||(M(a.$$.fragment,i),u=!0)},o(i){I(a.$$.fragment,i),u=!1},d(i){i&&y(e),F(a)}}}function oe(h){let e,t,s,l='<div class="brand-logo svelte-beeita">DL</div> <div class="brand-text svelte-beeita"><span class="brand-title svelte-beeita">Deutschlern</span> <span class="brand-subtitle svelte-beeita">آموزش آلمانی و انگلیسی برای فارسی‌زبان‌ها</span></div>',n,a,u,i,r='<button type="button" class="svelte-beeita">FA</button> <button type="button" class="svelte-beeita">DE</button> <button type="button" class="svelte-beeita">EN</button>',o,c,f,N,p=h[0]&&R();const x=[re,ne],w=[];function D(d,m){return d[0]?0:1}return c=D(h),f=w[c]=x[c](h),{c(){e=b("header"),t=b("div"),s=b("a"),s.innerHTML=l,n=E(),p&&p.c(),a=E(),u=b("div"),i=b("div"),i.innerHTML=r,o=E(),f.c(),this.h()},l(d){e=_(d,"HEADER",{class:!0});var m=k(e);t=_(m,"DIV",{class:!0});var $=k(t);s=_($,"A",{href:!0,class:!0,"data-svelte-h":!0}),S(s)!=="svelte-3zt4v3"&&(s.innerHTML=l),n=C($),p&&p.l($),$.forEach(y),a=C(m),u=_(m,"DIV",{class:!0});var H=k(u);i=_(H,"DIV",{class:!0,"data-svelte-h":!0}),S(i)!=="svelte-fybdj5"&&(i.innerHTML=r),o=C(H),f.l(H),H.forEach(y),m.forEach(y),this.h()},h(){g(s,"href","/"),g(s,"class","brand svelte-beeita"),g(t,"class","navbar-left svelte-beeita"),g(i,"class","language-switch svelte-beeita"),g(u,"class","navbar-right svelte-beeita"),g(e,"class","navbar svelte-beeita")},m(d,m){L(d,e,m),v(e,t),v(t,s),v(t,n),p&&p.m(t,null),v(e,a),v(e,u),v(u,i),v(u,o),w[c].m(u,null),N=!0},p(d,[m]){d[0]?p||(p=R(),p.c(),p.m(t,null)):p&&(p.d(1),p=null);let $=c;c=D(d),c===$?w[c].p(d,m):(ee(),I(w[$],1,1,()=>{w[$]=null}),te(),f=w[c],f?f.p(d,m):(f=w[c]=x[c](d),f.c()),M(f,1),f.m(u,null))},i(d){N||(M(f),N=!0)},o(d){I(f),N=!1},d(d){d&&y(e),p&&p.d(),w[c].d()}}}function ie(h,e,t){let{user:s=null}=e;return h.$$set=l=>{"user"in l&&t(0,s=l.user)},[s]}class ce extends j{constructor(e){super(),U(this,e,ie,oe,O,{user:0})}}function ue(h){let e,t,s='<div class="footer-col svelte-g78yw5"><h3 class="svelte-g78yw5">Deutschlern</h3> <p class="svelte-g78yw5">آموزش زبان آلمانی و انگلیسی برای فارسی‌زبان‌ها، با تمرکز بر جملات کاربردی و تمرین روزانه.</p></div> <div class="footer-col svelte-g78yw5"><h4 class="svelte-g78yw5">بخش‌ها</h4> <a href="/" class="svelte-g78yw5">درس‌های اصلی</a> <a href="/vocabulary" class="svelte-g78yw5">واژگان</a> <a href="/practice" class="svelte-g78yw5">تمرین شنیداری</a> <a href="/progress" class="svelte-g78yw5">پیشرفت من</a></div> <div class="footer-col svelte-g78yw5"><h4 class="svelte-g78yw5">کمک و پشتیبانی</h4> <a href="/help" class="svelte-g78yw5">سوالات متداول</a> <a href="/contact" class="svelte-g78yw5">ارتباط با ما</a></div>',l,n,a,u,i=new Date().getFullYear()+"",r,o,c,f,N="•",p,x,w="ساخته شده برای فارسی‌زبان‌های مهاجر";return{c(){e=b("footer"),t=b("div"),t.innerHTML=s,l=E(),n=b("div"),a=b("span"),u=B("© "),r=B(i),o=B(" Deutschlern"),c=E(),f=b("span"),f.textContent=N,p=E(),x=b("span"),x.textContent=w,this.h()},l(D){e=_(D,"FOOTER",{class:!0});var d=k(e);t=_(d,"DIV",{class:!0,"data-svelte-h":!0}),S(t)!=="svelte-1xiksxa"&&(t.innerHTML=s),l=C(d),n=_(d,"DIV",{class:!0});var m=k(n);a=_(m,"SPAN",{});var $=k(a);u=V($,"© "),r=V($,i),o=V($," Deutschlern"),$.forEach(y),c=C(m),f=_(m,"SPAN",{class:!0,"data-svelte-h":!0}),S(f)!=="svelte-1no21tg"&&(f.textContent=N),p=C(m),x=_(m,"SPAN",{"data-svelte-h":!0}),S(x)!=="svelte-137uht0"&&(x.textContent=w),m.forEach(y),d.forEach(y),this.h()},h(){g(t,"class","footer-top svelte-g78yw5"),g(f,"class","separator svelte-g78yw5"),g(n,"class","footer-bottom svelte-g78yw5"),g(e,"class","footer svelte-g78yw5")},m(D,d){L(D,e,d),v(e,t),v(e,l),v(e,n),v(n,a),v(a,u),v(a,r),v(a,o),v(n,c),v(n,f),v(n,p),v(n,x)},p:A,i:A,o:A,d(D){D&&y(e)}}}class fe extends j{constructor(e){super(),U(this,e,null,ue,O,{})}}function he(h){let e,t,s,l,n,a,u;t=new ce({props:{user:h[0].user}});const i=h[2].default,r=X(i,h,h[1],null);return a=new fe({}),{c(){e=b("div"),q(t.$$.fragment),s=E(),l=b("main"),r&&r.c(),n=E(),q(a.$$.fragment),this.h()},l(o){e=_(o,"DIV",{class:!0});var c=k(e);z(t.$$.fragment,c),s=C(c),l=_(c,"MAIN",{class:!0});var f=k(l);r&&r.l(f),f.forEach(y),n=C(c),z(a.$$.fragment,c),c.forEach(y),this.h()},h(){g(l,"class","app-main svelte-8h65c4"),g(e,"class","app-shell svelte-8h65c4")},m(o,c){L(o,e,c),P(t,e,null),v(e,s),v(e,l),r&&r.m(l,null),v(e,n),P(a,e,null),u=!0},p(o,[c]){const f={};c&1&&(f.user=o[0].user),t.$set(f),r&&r.p&&(!u||c&2)&&J(r,i,o,o[1],u?Q(i,o[1],c,null):K(o[1]),null)},i(o){u||(M(t.$$.fragment,o),M(r,o),M(a.$$.fragment,o),u=!0)},o(o){I(t.$$.fragment,o),I(r,o),I(a.$$.fragment,o),u=!1},d(o){o&&y(e),F(t),r&&r.d(o),F(a)}}}function ve(h,e,t){let{$$slots:s={},$$scope:l}=e,{data:n}=e;return Z(async()=>{const{data:{session:a}}=await G.auth.getSession();a?(console.log("[App] User authenticated, initializing sync..."),await T.sync(),T.startBackgroundSync()):console.log("[App] No authenticated user, sync disabled");const{data:u}=G.auth.onAuthStateChange(async(i,r)=>{console.log("[App] Auth state changed:",i),i==="SIGNED_IN"&&r?(console.log("[App] User signed in, starting sync..."),await T.sync(),T.startBackgroundSync()):i==="SIGNED_OUT"&&(console.log("[App] User signed out, stopping sync..."),T.stopBackgroundSync())});return()=>{u.subscription.unsubscribe(),T.stopBackgroundSync()}}),h.$$set=a=>{"data"in a&&t(0,n=a.data),"$$scope"in a&&t(1,l=a.$$scope)},[n,l,s]}class be extends j{constructor(e){super(),U(this,e,ve,he,O,{data:0})}}export{be as component};
