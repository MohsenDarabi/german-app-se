import{s as B,n as A,d as y,i as T,m as Y,l as g,c as _,p as S,h as b,b as v,e as k,g as C,j as E,a as J,f as V,t as q,S as K,T as Q,U as W,V as X,q as Z}from"../chunks/scheduler.-13gY_0V.js";import{S as O,i as U,a as I,t as M,g as ee,c as te,d as j,m as F,e as P,b as z}from"../chunks/index.CL68AUYa.js";import{s as G}from"../chunks/client.M3ojON4v.js";import{s as L}from"../chunks/syncEngine.CoSUW4_s.js";function se(h){let e,t="خروج",s,l;return{c(){e=b("button"),e.textContent=t,this.h()},l(n){e=_(n,"BUTTON",{class:!0,"data-svelte-h":!0}),S(e)!=="svelte-1cyqx9s"&&(e.textContent=t),this.h()},h(){g(e,"class","logout-btn svelte-bpjc0m")},m(n,a){T(n,e,a),s||(l=Y(e,"click",h[0]),s=!0)},p:A,i:A,o:A,d(n){n&&y(e),s=!1,l()}}}function ae(h){async function e(){await G.auth.signOut(),window.location.href="/login"}return[e]}class le extends O{constructor(e){super(),U(this,e,ae,se,B,{})}}function R(h){let e,t='<a href="/" class="svelte-beeita">درس‌ها</a> <a href="/vocabulary" class="svelte-beeita">واژگان</a> <a href="/practice" class="svelte-beeita">تمرین‌ها</a> <a href="/progress" class="svelte-beeita">پیشرفت من</a>';return{c(){e=b("nav"),e.innerHTML=t,this.h()},l(s){e=_(s,"NAV",{class:!0,"data-svelte-h":!0}),S(e)!=="svelte-139j00j"&&(e.innerHTML=t),this.h()},h(){g(e,"class","nav-links svelte-beeita")},m(s,l){T(s,e,l)},d(s){s&&y(e)}}}function ne(h){let e,t="ورود";return{c(){e=b("a"),e.textContent=t,this.h()},l(s){e=_(s,"A",{href:!0,class:!0,"data-svelte-h":!0}),S(e)!=="svelte-gzewhb"&&(e.textContent=t),this.h()},h(){g(e,"href","/login"),g(e,"class","login-link svelte-beeita")},m(s,l){T(s,e,l)},p:A,i:A,o:A,d(s){s&&y(e)}}}function re(h){let e,t,s=h[0].email+"",l,n,a,u;return a=new le({}),{c(){e=b("div"),t=b("span"),l=q(s),n=E(),z(a.$$.fragment),this.h()},l(o){e=_(o,"DIV",{class:!0});var r=k(e);t=_(r,"SPAN",{class:!0});var i=k(t);l=V(i,s),i.forEach(y),n=C(r),P(a.$$.fragment,r),r.forEach(y),this.h()},h(){g(t,"class","user-email svelte-beeita"),g(e,"class","user-info svelte-beeita")},m(o,r){T(o,e,r),v(e,t),v(t,l),v(e,n),F(a,e,null),u=!0},p(o,r){(!u||r&1)&&s!==(s=o[0].email+"")&&J(l,s)},i(o){u||(M(a.$$.fragment,o),u=!0)},o(o){I(a.$$.fragment,o),u=!1},d(o){o&&y(e),j(a)}}}function ie(h){let e,t,s,l='<div class="brand-logo svelte-beeita">DL</div> <div class="brand-text svelte-beeita"><span class="brand-title svelte-beeita">Deutschlern</span> <span class="brand-subtitle svelte-beeita">آموزش آلمانی و انگلیسی برای فارسی‌زبان‌ها</span></div>',n,a,u,o,r='<button type="button" class="svelte-beeita">FA</button> <button type="button" class="svelte-beeita">DE</button> <button type="button" class="svelte-beeita">EN</button>',i,c,f,N,p=h[0]&&R();const x=[re,ne],w=[];function D(d,m){return d[0]?0:1}return c=D(h),f=w[c]=x[c](h),{c(){e=b("header"),t=b("div"),s=b("a"),s.innerHTML=l,n=E(),p&&p.c(),a=E(),u=b("div"),o=b("div"),o.innerHTML=r,i=E(),f.c(),this.h()},l(d){e=_(d,"HEADER",{class:!0});var m=k(e);t=_(m,"DIV",{class:!0});var $=k(t);s=_($,"A",{href:!0,class:!0,"data-svelte-h":!0}),S(s)!=="svelte-3zt4v3"&&(s.innerHTML=l),n=C($),p&&p.l($),$.forEach(y),a=C(m),u=_(m,"DIV",{class:!0});var H=k(u);o=_(H,"DIV",{class:!0,"data-svelte-h":!0}),S(o)!=="svelte-fybdj5"&&(o.innerHTML=r),i=C(H),f.l(H),H.forEach(y),m.forEach(y),this.h()},h(){g(s,"href","/"),g(s,"class","brand svelte-beeita"),g(t,"class","navbar-left svelte-beeita"),g(o,"class","language-switch svelte-beeita"),g(u,"class","navbar-right svelte-beeita"),g(e,"class","navbar svelte-beeita")},m(d,m){T(d,e,m),v(e,t),v(t,s),v(t,n),p&&p.m(t,null),v(e,a),v(e,u),v(u,o),v(u,i),w[c].m(u,null),N=!0},p(d,[m]){d[0]?p||(p=R(),p.c(),p.m(t,null)):p&&(p.d(1),p=null);let $=c;c=D(d),c===$?w[c].p(d,m):(ee(),I(w[$],1,1,()=>{w[$]=null}),te(),f=w[c],f?f.p(d,m):(f=w[c]=x[c](d),f.c()),M(f,1),f.m(u,null))},i(d){N||(M(f),N=!0)},o(d){I(f),N=!1},d(d){d&&y(e),p&&p.d(),w[c].d()}}}function oe(h,e,t){let{user:s=null}=e;return h.$$set=l=>{"user"in l&&t(0,s=l.user)},[s]}class ce extends O{constructor(e){super(),U(this,e,oe,ie,B,{user:0})}}function ue(h){let e,t,s='<div class="footer-col svelte-g78yw5"><h3 class="svelte-g78yw5">Deutschlern</h3> <p class="svelte-g78yw5">آموزش زبان آلمانی و انگلیسی برای فارسی‌زبان‌ها، با تمرکز بر جملات کاربردی و تمرین روزانه.</p></div> <div class="footer-col svelte-g78yw5"><h4 class="svelte-g78yw5">بخش‌ها</h4> <a href="/" class="svelte-g78yw5">درس‌های اصلی</a> <a href="/vocabulary" class="svelte-g78yw5">واژگان</a> <a href="/practice" class="svelte-g78yw5">تمرین شنیداری</a> <a href="/progress" class="svelte-g78yw5">پیشرفت من</a></div> <div class="footer-col svelte-g78yw5"><h4 class="svelte-g78yw5">کمک و پشتیبانی</h4> <a href="/help" class="svelte-g78yw5">سوالات متداول</a> <a href="/contact" class="svelte-g78yw5">ارتباط با ما</a></div>',l,n,a,u,o=new Date().getFullYear()+"",r,i,c,f,N="•",p,x,w="ساخته شده برای فارسی‌زبان‌های مهاجر";return{c(){e=b("footer"),t=b("div"),t.innerHTML=s,l=E(),n=b("div"),a=b("span"),u=q("© "),r=q(o),i=q(" Deutschlern"),c=E(),f=b("span"),f.textContent=N,p=E(),x=b("span"),x.textContent=w,this.h()},l(D){e=_(D,"FOOTER",{class:!0});var d=k(e);t=_(d,"DIV",{class:!0,"data-svelte-h":!0}),S(t)!=="svelte-1xiksxa"&&(t.innerHTML=s),l=C(d),n=_(d,"DIV",{class:!0});var m=k(n);a=_(m,"SPAN",{});var $=k(a);u=V($,"© "),r=V($,o),i=V($," Deutschlern"),$.forEach(y),c=C(m),f=_(m,"SPAN",{class:!0,"data-svelte-h":!0}),S(f)!=="svelte-1no21tg"&&(f.textContent=N),p=C(m),x=_(m,"SPAN",{"data-svelte-h":!0}),S(x)!=="svelte-137uht0"&&(x.textContent=w),m.forEach(y),d.forEach(y),this.h()},h(){g(t,"class","footer-top svelte-g78yw5"),g(f,"class","separator svelte-g78yw5"),g(n,"class","footer-bottom svelte-g78yw5"),g(e,"class","footer svelte-g78yw5")},m(D,d){T(D,e,d),v(e,t),v(e,l),v(e,n),v(n,a),v(a,u),v(a,r),v(a,i),v(n,c),v(n,f),v(n,p),v(n,x)},p:A,i:A,o:A,d(D){D&&y(e)}}}class fe extends O{constructor(e){super(),U(this,e,null,ue,B,{})}}function he(h){let e,t,s,l,n,a,u;t=new ce({props:{user:h[0].user}});const o=h[2].default,r=K(o,h,h[1],null);return a=new fe({}),{c(){e=b("div"),z(t.$$.fragment),s=E(),l=b("main"),r&&r.c(),n=E(),z(a.$$.fragment),this.h()},l(i){e=_(i,"DIV",{class:!0});var c=k(e);P(t.$$.fragment,c),s=C(c),l=_(c,"MAIN",{class:!0});var f=k(l);r&&r.l(f),f.forEach(y),n=C(c),P(a.$$.fragment,c),c.forEach(y),this.h()},h(){g(l,"class","app-main svelte-13qqm7e"),g(e,"class","app-shell svelte-13qqm7e")},m(i,c){T(i,e,c),F(t,e,null),v(e,s),v(e,l),r&&r.m(l,null),v(e,n),F(a,e,null),u=!0},p(i,[c]){const f={};c&1&&(f.user=i[0].user),t.$set(f),r&&r.p&&(!u||c&2)&&Q(r,o,i,i[1],u?X(o,i[1],c,null):W(i[1]),null)},i(i){u||(M(t.$$.fragment,i),M(r,i),M(a.$$.fragment,i),u=!0)},o(i){I(t.$$.fragment,i),I(r,i),I(a.$$.fragment,i),u=!1},d(i){i&&y(e),j(t),r&&r.d(i),j(a)}}}function ve(h,e,t){let{$$slots:s={},$$scope:l}=e,{data:n}=e;return Z(async()=>{const{data:{session:a}}=await G.auth.getSession();a?(console.log("[App] User authenticated, initializing sync..."),await L.sync(),L.startBackgroundSync()):console.log("[App] No authenticated user, sync disabled");const{data:u}=G.auth.onAuthStateChange(async(o,r)=>{console.log("[App] Auth state changed:",o),o==="SIGNED_IN"&&r?(console.log("[App] User signed in, starting sync..."),await L.sync(),L.startBackgroundSync()):o==="SIGNED_OUT"&&(console.log("[App] User signed out, stopping sync..."),L.stopBackgroundSync())});return()=>{u.subscription.unsubscribe(),L.stopBackgroundSync()}}),h.$$set=a=>{"data"in a&&t(0,n=a.data),"$$scope"in a&&t(1,l=a.$$scope)},[n,l,s]}class be extends O{constructor(e){super(),U(this,e,ve,he,B,{data:0})}}export{be as component};
