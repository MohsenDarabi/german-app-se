import{s as K,n as z,d as m,i as T,b as v,l as _,c as w,e as y,p as O,g as A,h as g,j as I,a as R,m as Q,f as V,t as $,x as Re,W as Me,z as B,r as Be,q as xe,X as me,Y as We,Q as we,k as ge,y as be}from"../chunks/scheduler.-13gY_0V.js";import{S as ee,i as te,a as j,t as F,g as pe,c as _e,d as oe,m as ie,e as ce,b as ue}from"../chunks/index.CL68AUYa.js";import{d as je,w as Fe}from"../chunks/entry.Cd0yNLQu.js";import{e as Y,u as ze,d as He}from"../chunks/each.DRHrEMf4.js";import{p as Ue}from"../chunks/audio.D-onYBYO.js";import{d as P}from"../chunks/index.lHhEmOCy.js";function ke(l,e,t){const s=l.slice();return s[3]=e[t],s[5]=t,s}function ye(l,e){let t,s,n=e[3].speaker+"",r,a,o,f=e[3].text.de+"",d,i,c,p=e[3].text.fa+"",u,h,b,k="ğŸ”Š",C,S,D;function N(){return e[2](e[3])}return{key:l,first:null,c(){t=g("div"),s=g("div"),r=$(n),a=I(),o=g("p"),d=$(f),i=I(),c=g("p"),u=$(p),h=I(),b=g("button"),b.textContent=k,C=I(),this.h()},l(L){t=w(L,"DIV",{class:!0});var E=y(t);s=w(E,"DIV",{class:!0});var X=y(s);r=V(X,n),X.forEach(m),a=A(E),o=w(E,"P",{class:!0});var W=y(o);d=V(W,f),W.forEach(m),i=A(E),c=w(E,"P",{class:!0});var x=y(c);u=V(x,p),x.forEach(m),h=A(E),b=w(E,"BUTTON",{class:!0,"aria-label":!0,"data-svelte-h":!0}),O(b)!=="svelte-13rd3p5"&&(b.textContent=k),C=A(E),E.forEach(m),this.h()},h(){_(s,"class","speaker-name svelte-1nu0w96"),_(o,"class","dialog-text svelte-1nu0w96"),_(c,"class","dialog-translation svelte-1nu0w96"),_(b,"class","audio-btn-small svelte-1nu0w96"),_(b,"aria-label","Play audio"),_(t,"class","chat-bubble svelte-1nu0w96"),this.first=t},m(L,E){T(L,t,E),v(t,s),v(s,r),v(t,a),v(t,o),v(o,d),v(t,i),v(t,c),v(c,u),v(t,h),v(t,b),v(t,C),S||(D=Q(b,"click",N),S=!0)},p(L,E){e=L,E&1&&n!==(n=e[3].speaker+"")&&R(r,n),E&1&&f!==(f=e[3].text.de+"")&&R(d,f),E&1&&p!==(p=e[3].text.fa+"")&&R(u,p)},d(L){L&&m(t),S=!1,D()}}}function Ge(l){let e,t,s="Ù…Ú©Ø§Ù„Ù…Ù‡",n,r,a=[],o=new Map,f=Y(l[0].lines);const d=i=>i[5];for(let i=0;i<f.length;i+=1){let c=ke(l,f,i),p=d(c);o.set(p,a[i]=ye(p,c))}return{c(){e=g("div"),t=g("h2"),t.textContent=s,n=I(),r=g("div");for(let i=0;i<a.length;i+=1)a[i].c();this.h()},l(i){e=w(i,"DIV",{class:!0});var c=y(e);t=w(c,"H2",{class:!0,"data-svelte-h":!0}),O(t)!=="svelte-l5qrx9"&&(t.textContent=s),n=A(c),r=w(c,"DIV",{class:!0});var p=y(r);for(let u=0;u<a.length;u+=1)a[u].l(p);p.forEach(m),c.forEach(m),this.h()},h(){_(t,"class","step-title svelte-1nu0w96"),_(r,"class","chat-box svelte-1nu0w96"),_(e,"class","step-container svelte-1nu0w96")},m(i,c){T(i,e,c),v(e,t),v(e,n),v(e,r);for(let p=0;p<a.length;p+=1)a[p]&&a[p].m(r,null)},p(i,[c]){c&3&&(f=Y(i[0].lines),a=ze(a,c,d,1,i,f,o,r,He,ye,null,ke))},i:z,o:z,d(i){i&&m(e);for(let c=0;c<a.length;c+=1)a[c].d()}}}function Je(l,e,t){let{step:s}=e;function n(a){var o;(o=a.audio)!=null&&o.url?console.log("Playing audio:",a.audio.url):Ue(a.text.de,"de-DE")}const r=a=>n(a);return l.$$set=a=>{"step"in a&&t(0,s=a.step)},[s,n,r]}class Qe extends ee{constructor(e){super(),te(this,e,Je,Ge,K,{step:0})}}function Ce(l,e,t){const s=l.slice();return s[1]=e[t],s}function Se(l){let e,t,s="Ù…Ø«Ø§Ù„â€ŒÙ‡Ø§:",n,r=Y(l[0].examples),a=[];for(let o=0;o<r.length;o+=1)a[o]=Ae(Ce(l,r,o));return{c(){e=g("div"),t=g("h3"),t.textContent=s,n=I();for(let o=0;o<a.length;o+=1)a[o].c();this.h()},l(o){e=w(o,"DIV",{class:!0});var f=y(e);t=w(f,"H3",{class:!0,"data-svelte-h":!0}),O(t)!=="svelte-1oor1ko"&&(t.textContent=s),n=A(f);for(let d=0;d<a.length;d+=1)a[d].l(f);f.forEach(m),this.h()},h(){_(t,"class","examples-title svelte-y2gar0"),_(e,"class","examples-section svelte-y2gar0")},m(o,f){T(o,e,f),v(e,t),v(e,n);for(let d=0;d<a.length;d+=1)a[d]&&a[d].m(e,null)},p(o,f){if(f&1){r=Y(o[0].examples);let d;for(d=0;d<r.length;d+=1){const i=Ce(o,r,d);a[d]?a[d].p(i,f):(a[d]=Ae(i),a[d].c(),a[d].m(e,null))}for(;d<a.length;d+=1)a[d].d(1);a.length=r.length}},d(o){o&&m(e),Re(a,o)}}}function Ae(l){let e,t,s=l[1].de+"",n,r,a,o=l[1].fa+"",f,d;return{c(){e=g("div"),t=g("p"),n=$(s),r=I(),a=g("p"),f=$(o),d=I(),this.h()},l(i){e=w(i,"DIV",{class:!0});var c=y(e);t=w(c,"P",{class:!0});var p=y(t);n=V(p,s),p.forEach(m),r=A(c),a=w(c,"P",{class:!0});var u=y(a);f=V(u,o),u.forEach(m),d=A(c),c.forEach(m),this.h()},h(){_(t,"class","example-de svelte-y2gar0"),_(a,"class","example-fa svelte-y2gar0"),_(e,"class","example-item svelte-y2gar0")},m(i,c){T(i,e,c),v(e,t),v(t,n),v(e,r),v(e,a),v(a,f),v(e,d)},p(i,c){c&1&&s!==(s=i[1].de+"")&&R(n,s),c&1&&o!==(o=i[1].fa+"")&&R(f,o)},d(i){i&&m(e)}}}function Xe(l){let e,t,s,n="ğŸ’¡",r,a,o=(l[0].title||"Ù†Ú©ØªÙ‡ Ú¯Ø±Ø§Ù…Ø±ÛŒ")+"",f,d,i,c=l[0].content+"",p,u,h=l[0].examples&&l[0].examples.length>0&&Se(l);return{c(){e=g("div"),t=g("div"),s=g("span"),s.textContent=n,r=I(),a=g("h2"),f=$(o),d=I(),i=g("p"),p=$(c),u=I(),h&&h.c(),this.h()},l(b){e=w(b,"DIV",{class:!0});var k=y(e);t=w(k,"DIV",{class:!0});var C=y(t);s=w(C,"SPAN",{class:!0,"data-svelte-h":!0}),O(s)!=="svelte-1oh0gk8"&&(s.textContent=n),r=A(C),a=w(C,"H2",{class:!0});var S=y(a);f=V(S,o),S.forEach(m),C.forEach(m),d=A(k),i=w(k,"P",{class:!0});var D=y(i);p=V(D,c),D.forEach(m),u=A(k),h&&h.l(k),k.forEach(m),this.h()},h(){_(s,"class","bulb-icon svelte-y2gar0"),_(a,"class","step-title svelte-y2gar0"),_(t,"class","icon-header svelte-y2gar0"),_(i,"class","grammar-text svelte-y2gar0"),_(e,"class","grammar-card svelte-y2gar0")},m(b,k){T(b,e,k),v(e,t),v(t,s),v(t,r),v(t,a),v(a,f),v(e,d),v(e,i),v(i,p),v(e,u),h&&h.m(e,null)},p(b,[k]){k&1&&o!==(o=(b[0].title||"Ù†Ú©ØªÙ‡ Ú¯Ø±Ø§Ù…Ø±ÛŒ")+"")&&R(f,o),k&1&&c!==(c=b[0].content+"")&&R(p,c),b[0].examples&&b[0].examples.length>0?h?h.p(b,k):(h=Se(b),h.c(),h.m(e,null)):h&&(h.d(1),h=null)},i:z,o:z,d(b){b&&m(e),h&&h.d()}}}function Ye(l,e,t){let{step:s}=e;return l.$$set=n=>{"step"in n&&t(0,s=n.step)},[s]}class Ke extends ee{constructor(e){super(),te(this,e,Ye,Xe,K,{step:0})}}function Ie(l,e,t){const s=l.slice();return s[10]=e[t],s[12]=t,s}function Ze(l){let e,t="âŒ";return{c(){e=g("span"),e.textContent=t,this.h()},l(s){e=w(s,"SPAN",{class:!0,"data-svelte-h":!0}),O(e)!=="svelte-1y31312"&&(e.textContent=t),this.h()},h(){_(e,"class","icon svelte-guf240")},m(s,n){T(s,e,n)},d(s){s&&m(e)}}}function et(l){let e,t="âœ…";return{c(){e=g("span"),e.textContent=t,this.h()},l(s){e=w(s,"SPAN",{class:!0,"data-svelte-h":!0}),O(e)!=="svelte-7p7kw9"&&(e.textContent=t),this.h()},h(){_(e,"class","icon svelte-guf240")},m(s,n){T(s,e,n)},d(s){s&&m(e)}}}function De(l,e){let t,s=e[10]+"",n,r,a,o,f;function d(u,h){if(u[2]&&u[12]===u[4])return et;if(u[2]&&u[1]===u[12]&&u[12]!==u[4])return Ze}let i=d(e),c=i&&i(e);function p(){return e[8](e[12])}return{key:l,first:null,c(){t=g("button"),n=$(s),r=I(),c&&c.c(),a=I(),this.h()},l(u){t=w(u,"BUTTON",{class:!0});var h=y(t);n=V(h,s),r=A(h),c&&c.l(h),a=A(h),h.forEach(m),this.h()},h(){_(t,"class","option-btn svelte-guf240"),t.disabled=e[2],B(t,"selected",e[1]===e[12]),B(t,"correct",e[2]&&e[12]===e[4]),B(t,"wrong",e[2]&&e[1]===e[12]&&e[12]!==e[4]),B(t,"disabled",e[2]),this.first=t},m(u,h){T(u,t,h),v(t,n),v(t,r),c&&c.m(t,null),v(t,a),o||(f=Q(t,"click",p),o=!0)},p(u,h){e=u,h&1&&s!==(s=e[10]+"")&&R(n,s),i!==(i=d(e))&&(c&&c.d(1),c=i&&i(e),c&&(c.c(),c.m(t,a))),h&4&&(t.disabled=e[2]),h&3&&B(t,"selected",e[1]===e[12]),h&21&&B(t,"correct",e[2]&&e[12]===e[4]),h&23&&B(t,"wrong",e[2]&&e[1]===e[12]&&e[12]!==e[4]),h&4&&B(t,"disabled",e[2])},d(u){u&&m(t),c&&c.d(),o=!1,f()}}}function Ee(l){let e,t,s="âŒ Try again! The correct answer is highlighted above.",n,r,a="ğŸ”„ Retry",o,f;return{c(){e=g("div"),t=g("p"),t.textContent=s,n=I(),r=g("button"),r.textContent=a,this.h()},l(d){e=w(d,"DIV",{class:!0});var i=y(e);t=w(i,"P",{class:!0,"data-svelte-h":!0}),O(t)!=="svelte-1nact39"&&(t.textContent=s),n=A(i),r=w(i,"BUTTON",{class:!0,"data-svelte-h":!0}),O(r)!=="svelte-1j1gpuf"&&(r.textContent=a),i.forEach(m),this.h()},h(){_(t,"class","feedback-text svelte-guf240"),_(r,"class","retry-btn svelte-guf240"),_(e,"class","retry-section svelte-guf240")},m(d,i){T(d,e,i),v(e,t),v(e,n),v(e,r),o||(f=Q(r,"click",l[7]),o=!0)},p:z,d(d){d&&m(e),o=!1,f()}}}function tt(l){let e,t,s,n,r,a=[],o=new Map,f,d=Y(l[0].options);const i=p=>p[12];for(let p=0;p<d.length;p+=1){let u=Ie(l,d,p),h=i(u);o.set(h,a[p]=De(h,u))}let c=l[3]&&Ee(l);return{c(){e=g("div"),t=g("h2"),s=$(l[5]),n=I(),r=g("div");for(let p=0;p<a.length;p+=1)a[p].c();f=I(),c&&c.c(),this.h()},l(p){e=w(p,"DIV",{class:!0});var u=y(e);t=w(u,"H2",{class:!0});var h=y(t);s=V(h,l[5]),h.forEach(m),n=A(u),r=w(u,"DIV",{class:!0});var b=y(r);for(let k=0;k<a.length;k+=1)a[k].l(b);b.forEach(m),f=A(u),c&&c.l(u),u.forEach(m),this.h()},h(){_(t,"class","question svelte-guf240"),_(r,"class","options-grid svelte-guf240"),_(e,"class","quiz-container svelte-guf240")},m(p,u){T(p,e,u),v(e,t),v(t,s),v(e,n),v(e,r);for(let h=0;h<a.length;h+=1)a[h]&&a[h].m(r,null);v(e,f),c&&c.m(e,null)},p(p,[u]){u&32&&R(s,p[5]),u&87&&(d=Y(p[0].options),a=ze(a,u,i,1,p,d,o,r,He,De,null,Ie)),p[3]?c?c.p(p,u):(c=Ee(p),c.c(),c.m(e,null)):c&&(c.d(1),c=null)},i:z,o:z,d(p){p&&m(e);for(let u=0;u<a.length;u+=1)a[u].d();c&&c.d()}}}function st(l,e,t){let s,n,{step:r}=e,a=null,o=!1,f=!1;const d=Me();function i(u){if(o)return;t(1,a=u),t(2,o=!0);const h=u===n;h||t(3,f=!0),d("answer",{correct:h,userAnswer:r.options[u],correctAnswer:r.options[n],allowContinue:h})}function c(){t(1,a=null),t(2,o=!1),t(3,f=!1)}const p=u=>i(u);return l.$$set=u=>{"step"in u&&t(0,r=u.step)},l.$$.update=()=>{l.$$.dirty&1&&t(5,s=r.question||r.prompt),l.$$.dirty&1&&t(4,n=r.correctAnswerIndex??r.answer)},[r,a,o,f,n,s,i,c,p]}class lt extends ee{constructor(e){super(),te(this,e,st,tt,K,{step:0})}}function nt(l){let e,t="<span>ğŸ–¼ï¸</span>";return{c(){e=g("div"),e.innerHTML=t,this.h()},l(s){e=w(s,"DIV",{class:!0,"data-svelte-h":!0}),O(e)!=="svelte-nmug5n"&&(e.innerHTML=t),this.h()},h(){_(e,"class","image-placeholder svelte-1vv536s")},m(s,n){T(s,e,n)},p:z,d(s){s&&m(e)}}}function rt(l){let e,t,s;return{c(){e=g("img"),this.h()},l(n){e=w(n,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){me(e.src,t=l[0].image)||_(e,"src",t),_(e,"alt",s=l[0].word.de),_(e,"class","vocab-image svelte-1vv536s")},m(n,r){T(n,e,r)},p(n,r){r&1&&!me(e.src,t=n[0].image)&&_(e,"src",t),r&1&&s!==(s=n[0].word.de)&&_(e,"alt",s)},d(n){n&&m(e)}}}function Pe(l){let e,t,s=l[0].example.text.de+"",n,r,a,o=l[0].example.text.fa+"",f,d,i,c="Ù…Ø«Ø§Ù„ Ø¯Ø± Ø¬Ù…Ù„Ù‡";return{c(){e=g("div"),t=g("p"),n=$(s),r=I(),a=g("p"),f=$(o),d=I(),i=g("p"),i.textContent=c,this.h()},l(p){e=w(p,"DIV",{class:!0});var u=y(e);t=w(u,"P",{class:!0});var h=y(t);n=V(h,s),h.forEach(m),r=A(u),a=w(u,"P",{class:!0});var b=y(a);f=V(b,o),b.forEach(m),d=A(u),i=w(u,"P",{class:!0,"data-svelte-h":!0}),O(i)!=="svelte-11v4tpe"&&(i.textContent=c),u.forEach(m),this.h()},h(){_(t,"class","sentence-text svelte-1vv536s"),_(a,"class","sentence-translation svelte-1vv536s"),_(i,"class","sentence-label svelte-1vv536s"),_(e,"class","sentence-box svelte-1vv536s")},m(p,u){T(p,e,u),v(e,t),v(t,n),v(e,r),v(e,a),v(a,f),v(e,d),v(e,i)},p(p,u){u&1&&s!==(s=p[0].example.text.de+"")&&R(n,s),u&1&&o!==(o=p[0].example.text.fa+"")&&R(f,o)},d(p){p&&m(e)}}}function at(l){let e,t,s,n,r,a,o=l[0].word.de+"",f,d,i,c="ğŸ”Š",p,u,h=l[0].word.fa+"",b,k,C,S=l[1]?"âœ… Saved":"â• Add to Vocab",D,N,L,E;function X(q,H){return q[0].image?rt:nt}let W=X(l),x=W(l),M=l[0].example&&Pe(l);return{c(){e=g("div"),t=g("div"),x.c(),s=I(),n=g("div"),r=g("div"),a=g("h2"),f=$(o),d=I(),i=g("button"),i.textContent=c,p=I(),u=g("p"),b=$(h),k=I(),C=g("button"),D=$(S),N=I(),M&&M.c(),this.h()},l(q){e=w(q,"DIV",{class:!0});var H=y(e);t=w(H,"DIV",{class:!0});var se=y(t);x.l(se),se.forEach(m),s=A(H),n=w(H,"DIV",{class:!0});var U=y(n);r=w(U,"DIV",{class:!0});var Z=y(r);a=w(Z,"H2",{class:!0});var le=y(a);f=V(le,o),le.forEach(m),d=A(Z),i=w(Z,"BUTTON",{class:!0,"aria-label":!0,"data-svelte-h":!0}),O(i)!=="svelte-1ui3l5k"&&(i.textContent=c),Z.forEach(m),p=A(U),u=w(U,"P",{class:!0});var fe=y(u);b=V(fe,h),fe.forEach(m),k=A(U),C=w(U,"BUTTON",{class:!0});var G=y(C);D=V(G,S),G.forEach(m),N=A(U),M&&M.l(U),U.forEach(m),H.forEach(m),this.h()},h(){_(t,"class","image-area svelte-1vv536s"),_(a,"class","german-word svelte-1vv536s"),_(i,"class","audio-btn svelte-1vv536s"),_(i,"aria-label","Play Audio"),_(r,"class","word-row svelte-1vv536s"),_(u,"class","translation svelte-1vv536s"),_(C,"class","save-btn svelte-1vv536s"),B(C,"saved",l[1]),_(n,"class","content-area svelte-1vv536s"),_(e,"class","card-container svelte-1vv536s")},m(q,H){T(q,e,H),v(e,t),x.m(t,null),v(e,s),v(e,n),v(n,r),v(r,a),v(a,f),v(r,d),v(r,i),v(n,p),v(n,u),v(u,b),v(n,k),v(n,C),v(C,D),v(n,N),M&&M.m(n,null),L||(E=[Q(i,"click",l[3]),Q(C,"click",l[2])],L=!0)},p(q,[H]){W===(W=X(q))&&x?x.p(q,H):(x.d(1),x=W(q),x&&(x.c(),x.m(t,null))),H&1&&o!==(o=q[0].word.de+"")&&R(f,o),H&1&&h!==(h=q[0].word.fa+"")&&R(b,h),H&2&&S!==(S=q[1]?"âœ… Saved":"â• Add to Vocab")&&R(D,S),H&2&&B(C,"saved",q[1]),q[0].example?M?M.p(q,H):(M=Pe(q),M.c(),M.m(n,null)):M&&(M.d(1),M=null)},i:z,o:z,d(q){q&&m(e),x.d(),M&&M.d(),L=!1,Be(E)}}}function ot(l,e,t){let{step:s}=e,n=!1;xe(async()=>{const o=await P.vocab.where("word").equals(s.word.de).first();t(1,n=!!o),typeof window<"u"&&"speechSynthesis"in window&&window.speechSynthesis.getVoices()});async function r(){var o;n?(await P.vocab.where("word").equals(s.word.de).delete(),t(1,n=!1)):(await P.vocab.add({word:s.word.de,translation:s.word.fa,example:(o=s.example)==null?void 0:o.text.de,addedAt:new Date,srsLevel:0,nextReview:new Date}),t(1,n=!0))}function a(){Ue(s.word.de,"de-DE")}return l.$$set=o=>{"step"in o&&t(0,s=o.step)},[s,n,r,a]}class it extends ee{constructor(e){super(),te(this,e,ot,at,K,{step:0})}}function ct(l){let e,t,s,n=l[0].type+"",r,a,o,f=JSON.stringify(l[0],null,2)+"",d;return{c(){e=g("div"),t=g("p"),s=$("Unknown step type: "),r=$(n),a=I(),o=g("pre"),d=$(f),this.h()},l(i){e=w(i,"DIV",{class:!0});var c=y(e);t=w(c,"P",{});var p=y(t);s=V(p,"Unknown step type: "),r=V(p,n),p.forEach(m),a=A(c),o=w(c,"PRE",{class:!0});var u=y(o);d=V(u,f),u.forEach(m),c.forEach(m),this.h()},h(){_(o,"class","svelte-1btz153"),_(e,"class","unknown-step svelte-1btz153")},m(i,c){T(i,e,c),v(e,t),v(t,s),v(t,r),v(e,a),v(e,o),v(o,d)},p(i,c){c&1&&n!==(n=i[0].type+"")&&R(r,n),c&1&&f!==(f=JSON.stringify(i[0],null,2)+"")&&R(d,f)},i:z,o:z,d(i){i&&m(e)}}}function ut(l){let e,t;return e=new Qe({props:{step:l[0]}}),{c(){ue(e.$$.fragment)},l(s){ce(e.$$.fragment,s)},m(s,n){ie(e,s,n),t=!0},p(s,n){const r={};n&1&&(r.step=s[0]),e.$set(r)},i(s){t||(F(e.$$.fragment,s),t=!0)},o(s){j(e.$$.fragment,s),t=!1},d(s){oe(e,s)}}}function ft(l){let e,t;return e=new Ke({props:{step:l[0]}}),{c(){ue(e.$$.fragment)},l(s){ce(e.$$.fragment,s)},m(s,n){ie(e,s,n),t=!0},p(s,n){const r={};n&1&&(r.step=s[0]),e.$set(r)},i(s){t||(F(e.$$.fragment,s),t=!0)},o(s){j(e.$$.fragment,s),t=!1},d(s){oe(e,s)}}}function dt(l){let e,t;return e=new it({props:{step:l[0]}}),{c(){ue(e.$$.fragment)},l(s){ce(e.$$.fragment,s)},m(s,n){ie(e,s,n),t=!0},p(s,n){const r={};n&1&&(r.step=s[0]),e.$set(r)},i(s){t||(F(e.$$.fragment,s),t=!0)},o(s){j(e.$$.fragment,s),t=!1},d(s){oe(e,s)}}}function vt(l){let e,t;return e=new lt({props:{step:l[0]}}),e.$on("answer",l[1]),{c(){ue(e.$$.fragment)},l(s){ce(e.$$.fragment,s)},m(s,n){ie(e,s,n),t=!0},p(s,n){const r={};n&1&&(r.step=s[0]),e.$set(r)},i(s){t||(F(e.$$.fragment,s),t=!0)},o(s){j(e.$$.fragment,s),t=!1},d(s){oe(e,s)}}}function ht(l){let e,t,s,n;const r=[vt,dt,ft,ut,ct],a=[];function o(f,d){return f[0].type==="word-quiz"||f[0].type==="multiple-choice"?0:f[0].type==="new-word"?1:f[0].type==="grammar-tip"?2:f[0].type==="dialog"?3:4}return t=o(l),s=a[t]=r[t](l),{c(){e=g("div"),s.c(),this.h()},l(f){e=w(f,"DIV",{class:!0});var d=y(e);s.l(d),d.forEach(m),this.h()},h(){_(e,"class","step-wrapper svelte-1btz153")},m(f,d){T(f,e,d),a[t].m(e,null),n=!0},p(f,[d]){let i=t;t=o(f),t===i?a[t].p(f,d):(pe(),j(a[i],1,1,()=>{a[i]=null}),_e(),s=a[t],s?s.p(f,d):(s=a[t]=r[t](f),s.c()),F(s,1),s.m(e,null))},i(f){n||(F(s),n=!0)},o(f){j(s),n=!1},d(f){f&&m(e),a[t].d()}}}function pt(l,e,t){let{step:s}=e;function n(r){We.call(this,l,r)}return l.$$set=r=>{"step"in r&&t(0,s=r.step)},[s,n]}class _t extends ee{constructor(e){super(),te(this,e,pt,ht,K,{step:0})}}function Te(l,e,t){const s=l.slice();return s[13]=e[t],s}function Ve(l){let e,t,s=l[2].question+"",n,r,a,o,f=Y(l[4]),d=[];for(let c=0;c<f.length;c+=1)d[c]=$e(Te(l,f,c));let i=l[3]&&l[3]!==l[2].correctAnswer&&qe(l);return{c(){e=g("div"),t=g("h3"),n=$(s),r=I(),a=g("div");for(let c=0;c<d.length;c+=1)d[c].c();o=I(),i&&i.c(),this.h()},l(c){e=w(c,"DIV",{class:!0});var p=y(e);t=w(p,"H3",{class:!0});var u=y(t);n=V(u,s),u.forEach(m),r=A(p),a=w(p,"DIV",{class:!0});var h=y(a);for(let b=0;b<d.length;b+=1)d[b].l(h);h.forEach(m),o=A(p),i&&i.l(p),p.forEach(m),this.h()},h(){_(t,"class","question svelte-yx7uo6"),_(a,"class","options-grid svelte-yx7uo6"),_(e,"class","review-question-card svelte-yx7uo6")},m(c,p){T(c,e,p),v(e,t),v(t,n),v(e,r),v(e,a);for(let u=0;u<d.length;u+=1)d[u]&&d[u].m(a,null);v(e,o),i&&i.m(e,null)},p(c,p){if(p&4&&s!==(s=c[2].question+"")&&R(n,s),p&92){f=Y(c[4]);let u;for(u=0;u<f.length;u+=1){const h=Te(c,f,u);d[u]?d[u].p(h,p):(d[u]=$e(h),d[u].c(),d[u].m(a,null))}for(;u<d.length;u+=1)d[u].d(1);d.length=f.length}c[3]&&c[3]!==c[2].correctAnswer?i?i.p(c,p):(i=qe(c),i.c(),i.m(e,null)):i&&(i.d(1),i=null)},d(c){c&&m(e),Re(d,c),i&&i.d()}}}function mt(l){let e,t="âŒ";return{c(){e=g("span"),e.textContent=t,this.h()},l(s){e=w(s,"SPAN",{class:!0,"data-svelte-h":!0}),O(e)!=="svelte-1y31312"&&(e.textContent=t),this.h()},h(){_(e,"class","icon svelte-yx7uo6")},m(s,n){T(s,e,n)},d(s){s&&m(e)}}}function wt(l){let e,t="âœ…";return{c(){e=g("span"),e.textContent=t,this.h()},l(s){e=w(s,"SPAN",{class:!0,"data-svelte-h":!0}),O(e)!=="svelte-7p7kw9"&&(e.textContent=t),this.h()},h(){_(e,"class","icon svelte-yx7uo6")},m(s,n){T(s,e,n)},d(s){s&&m(e)}}}function $e(l){let e,t=l[13]+"",s,n,r,a,o,f;function d(u,h){if(u[3]&&u[13]===u[2].correctAnswer)return wt;if(u[3]===u[13]&&u[13]!==u[2].correctAnswer)return mt}let i=d(l),c=i&&i(l);function p(){return l[10](l[13])}return{c(){e=g("button"),s=$(t),n=I(),c&&c.c(),r=I(),this.h()},l(u){e=w(u,"BUTTON",{class:!0});var h=y(e);s=V(h,t),n=A(h),c&&c.l(h),r=A(h),h.forEach(m),this.h()},h(){_(e,"class","option-btn svelte-yx7uo6"),e.disabled=a=!!l[3],B(e,"selected",l[3]===l[13]),B(e,"correct",l[3]&&l[13]===l[2].correctAnswer),B(e,"wrong",l[3]===l[13]&&l[13]!==l[2].correctAnswer)},m(u,h){T(u,e,h),v(e,s),v(e,n),c&&c.m(e,null),v(e,r),o||(f=Q(e,"click",p),o=!0)},p(u,h){l=u,h&16&&t!==(t=l[13]+"")&&R(s,t),i!==(i=d(l))&&(c&&c.d(1),c=i&&i(l),c&&(c.c(),c.m(e,r))),h&8&&a!==(a=!!l[3])&&(e.disabled=a),h&24&&B(e,"selected",l[3]===l[13]),h&28&&B(e,"correct",l[3]&&l[13]===l[2].correctAnswer),h&28&&B(e,"wrong",l[3]===l[13]&&l[13]!==l[2].correctAnswer)},d(u){u&&m(e),c&&c.d(),o=!1,f()}}}function qe(l){let e,t,s="Try again!",n,r,a="ğŸ”„ Retry",o,f;return{c(){e=g("div"),t=g("p"),t.textContent=s,n=I(),r=g("button"),r.textContent=a,this.h()},l(d){e=w(d,"DIV",{class:!0});var i=y(e);t=w(i,"P",{class:!0,"data-svelte-h":!0}),O(t)!=="svelte-gggw6"&&(t.textContent=s),n=A(i),r=w(i,"BUTTON",{class:!0,"data-svelte-h":!0}),O(r)!=="svelte-1bc8lw7"&&(r.textContent=a),i.forEach(m),this.h()},h(){_(t,"class","feedback-text svelte-yx7uo6"),_(r,"class","retry-btn svelte-yx7uo6"),_(e,"class","retry-section svelte-yx7uo6")},m(d,i){T(d,e,i),v(e,t),v(e,n),v(e,r),o||(f=Q(r,"click",l[7]),o=!0)},p:z,d(d){d&&m(e),o=!1,f()}}}function Oe(l){let e,t,s="ğŸ‰ Great job!",n,r,a="You've reviewed all the questions. Now you're ready to complete the lesson.",o,f,d="Complete Lesson",i,c;return{c(){e=g("div"),t=g("h3"),t.textContent=s,n=I(),r=g("p"),r.textContent=a,o=I(),f=g("button"),f.textContent=d,this.h()},l(p){e=w(p,"DIV",{class:!0});var u=y(e);t=w(u,"H3",{class:!0,"data-svelte-h":!0}),O(t)!=="svelte-10e6vxq"&&(t.textContent=s),n=A(u),r=w(u,"P",{class:!0,"data-svelte-h":!0}),O(r)!=="svelte-wcmfgi"&&(r.textContent=a),o=A(u),f=w(u,"BUTTON",{class:!0,"data-svelte-h":!0}),O(f)!=="svelte-1kz4857"&&(f.textContent=d),u.forEach(m),this.h()},h(){_(t,"class","svelte-yx7uo6"),_(r,"class","svelte-yx7uo6"),_(f,"class","complete-btn svelte-yx7uo6"),_(e,"class","completion-section svelte-yx7uo6")},m(p,u){T(p,e,u),v(e,t),v(e,n),v(e,r),v(e,o),v(e,f),i||(c=Q(f,"click",l[8]),i=!0)},p:z,d(p){p&&m(e),i=!1,c()}}}function gt(l){let e,t,s,n="ğŸ“ Review Time!",r,a,o="Let's practice the questions you got wrong.",f,d,i=l[1]+1+"",c,p,u=l[0].length+"",h,b,k,C=l[2]&&Ve(l),S=l[5]&&Oe(l);return{c(){e=g("div"),t=g("div"),s=g("h2"),s.textContent=n,r=I(),a=g("p"),a.textContent=o,f=I(),d=g("div"),c=$(i),p=$(" / "),h=$(u),b=I(),C&&C.c(),k=I(),S&&S.c(),this.h()},l(D){e=w(D,"DIV",{class:!0});var N=y(e);t=w(N,"DIV",{class:!0});var L=y(t);s=w(L,"H2",{class:!0,"data-svelte-h":!0}),O(s)!=="svelte-7lbcsw"&&(s.textContent=n),r=A(L),a=w(L,"P",{class:!0,"data-svelte-h":!0}),O(a)!=="svelte-narzgc"&&(a.textContent=o),f=A(L),d=w(L,"DIV",{class:!0});var E=y(d);c=V(E,i),p=V(E," / "),h=V(E,u),E.forEach(m),L.forEach(m),b=A(N),C&&C.l(N),k=A(N),S&&S.l(N),N.forEach(m),this.h()},h(){_(s,"class","svelte-yx7uo6"),_(a,"class","svelte-yx7uo6"),_(d,"class","review-progress svelte-yx7uo6"),_(t,"class","review-header svelte-yx7uo6"),_(e,"class","review-container svelte-yx7uo6")},m(D,N){T(D,e,N),v(e,t),v(t,s),v(t,r),v(t,a),v(t,f),v(t,d),v(d,c),v(d,p),v(d,h),v(e,b),C&&C.m(e,null),v(e,k),S&&S.m(e,null)},p(D,[N]){N&2&&i!==(i=D[1]+1+"")&&R(c,i),N&1&&u!==(u=D[0].length+"")&&R(h,u),D[2]?C?C.p(D,N):(C=Ve(D),C.c(),C.m(e,k)):C&&(C.d(1),C=null),D[5]?S?S.p(D,N):(S=Oe(D),S.c(),S.m(e,null)):S&&(S.d(1),S=null)},i:z,o:z,d(D){D&&m(e),C&&C.d(),S&&S.d()}}}function bt(l,e,t){let s,n,r,a,{wrongAnswers:o}=e;const f=Me();let d=0,i=null,c=new Set;function p(k){i||(t(3,i=k),k===s.correctAnswer&&(c.add(d),t(9,c),setTimeout(()=>{r||(t(1,d++,d),t(3,i=null))},1e3)))}function u(){t(3,i=null)}function h(){f("complete",{reviewedIds:o.map(k=>k.id)})}const b=k=>p(k);return l.$$set=k=>{"wrongAnswers"in k&&t(0,o=k.wrongAnswers)},l.$$.update=()=>{l.$$.dirty&3&&t(2,s=o[d]),l.$$.dirty&513&&t(5,n=c.size===o.length),l.$$.dirty&3&&(r=d===o.length-1),l.$$.dirty&4&&t(4,a=s?[s.correctAnswer,s.userAnswer].filter((k,C,S)=>S.indexOf(k)===C):[])},[o,d,s,i,a,n,p,u,h,c,b]}class kt extends ee{constructor(e){super(),te(this,e,bt,gt,K,{wrongAnswers:0})}}async function yt(l,e){const t=await P.lessonProgress.where("lessonId").equals(l).first();t?await P.lessonProgress.update(t.id,{currentStepIndex:e,status:"in-progress",updatedAt:new Date().toISOString()}):await P.lessonProgress.add({lessonId:l,status:"in-progress",currentStepIndex:e,score:0,updatedAt:new Date().toISOString()})}async function Ct(l){await P.wrongAnswers.add({...l,reviewedAt:void 0})}async function St(l){return await P.lessonProgress.where("lessonId").equals(l).first()}async function At(l){return await P.wrongAnswers.where("lessonId").equals(l).and(e=>!e.reviewedAt).toArray()}async function It(l){const e=await P.wrongAnswers.where("lessonId").equals(l).toArray();for(const t of e)await P.wrongAnswers.delete(t.id)}async function Dt(l){const e=await P.lessonProgress.where("lessonId").equals(l).first();e&&await P.lessonProgress.update(e.id,{currentStepIndex:0,status:"in-progress",updatedAt:new Date().toISOString()})}async function Et(l){const e=new Date().toISOString();for(const t of l)await P.wrongAnswers.update(t,{reviewedAt:e})}async function Pt(l,e){const t=await P.wrongAnswers.where("lessonId").equals(l).toArray(),s=new Set(t.map(r=>r.stepId)).size,n=e-s;return Math.round(n/e*100)}async function Tt(l,e){const t=await Pt(l,e),s=Math.round(t*1.5),n=await P.lessonProgress.where("lessonId").equals(l).first();return n?await P.lessonProgress.update(n.id,{status:"completed",score:t,completedAt:new Date().toISOString(),updatedAt:new Date().toISOString()}):await P.lessonProgress.add({lessonId:l,status:"completed",currentStepIndex:0,score:t,completedAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),await Vt(s),await $t(),{score:t,xpEarned:s}}async function Vt(l){let e=await P.users.get(1);e?await P.users.update(1,{xp:e.xp+l}):await P.users.add({id:1,email:"learner@example.com",name:"Learner",xp:l,streak:1,lastStudyDate:new Date().toISOString(),totalStudyMinutes:0})}async function $t(){let l=await P.users.get(1);if(!l){await P.users.add({id:1,email:"learner@example.com",name:"Learner",xp:0,streak:1,lastStudyDate:new Date().toISOString(),totalStudyMinutes:0});return}const e=new Date(l.lastStudyDate),t=new Date;e.setHours(0,0,0,0),t.setHours(0,0,0,0);const s=Math.floor((t.getTime()-e.getTime())/(1e3*60*60*24));s===1?await P.users.update(1,{streak:l.streak+1,lastStudyDate:new Date().toISOString()}):s===0?await P.users.update(1,{lastStudyDate:new Date().toISOString()}):await P.users.update(1,{streak:1,lastStudyDate:new Date().toISOString()})}async function qt(l){let e=await P.users.get(1);e?await P.users.update(1,{totalStudyMinutes:e.totalStudyMinutes+l}):await P.users.add({id:1,email:"learner@example.com",name:"Learner",xp:0,streak:1,lastStudyDate:new Date().toISOString(),totalStudyMinutes:l})}function Ot(){const{subscribe:l,set:e,update:t}=Fe({currentIndex:0,lesson:null,isComplete:!1,canContinue:!1,sessionStartTime:Date.now()});return{subscribe:l,init:async s=>{const n=await St(s.id);let r=(n==null?void 0:n.currentStepIndex)||0;((n==null?void 0:n.status)==="completed"||r>=s.steps.length)&&(r=0,await It(s.id),await Dt(s.id)),e({currentIndex:r,lesson:s,isComplete:!1,canContinue:!0,sessionStartTime:Date.now()})},nextStep:()=>{t(s=>{if(!s.lesson)return s;const n=s.currentIndex+1;if(yt(s.lesson.id,n).catch(o=>console.error("Failed to save progress:",o)),n>=s.lesson.steps.length){const o=Math.floor((Date.now()-s.sessionStartTime)/6e4);return qt(o).catch(f=>console.error("Failed to save study time:",f)),{...s,isComplete:!0}}const r=s.lesson.steps[n].type;return{...s,currentIndex:n,canContinue:r!=="word-quiz"&&r!=="multiple-choice"}})},enableContinue:()=>{t(s=>({...s,canContinue:!0}))},disableContinue:()=>{t(s=>({...s,canContinue:!1}))}}}const ae=Ot(),Nt=je(ae,l=>l.lesson?l.lesson.steps[l.currentIndex]:null);function Lt(l){let e=l[5].id,t,s,n=Ne(l);return{c(){n.c(),t=be()},l(r){n.l(r),t=be()},m(r,a){n.m(r,a),T(r,t,a),s=!0},p(r,a){a&32&&K(e,e=r[5].id)?(pe(),j(n,1,1,z),_e(),n=Ne(r),n.c(),F(n,1),n.m(t.parentNode,t)):n.p(r,a)},i(r){s||(F(n),s=!0)},o(r){j(n),s=!1},d(r){r&&m(t),n.d(r)}}}function Rt(l){let e,t;return e=new kt({props:{wrongAnswers:l[4]}}),e.$on("complete",l[8]),{c(){ue(e.$$.fragment)},l(s){ce(e.$$.fragment,s)},m(s,n){ie(e,s,n),t=!0},p(s,n){const r={};n&16&&(r.wrongAnswers=s[4]),e.$set(r)},i(s){t||(F(e.$$.fragment,s),t=!0)},o(s){j(e.$$.fragment,s),t=!1},d(s){oe(e,s)}}}function Mt(l){let e,t,s="ğŸ‰ Lesson Complete!",n,r,a,o,f="ğŸ“Š",d,i,c=l[2].score+"",p,u,h,b,k="Score",C,S,D,N="â­",L,E,X,W=l[2].xpEarned+"",x,M,q,H="XP Earned",se,U,Z="Back to Dashboard",le,fe;return{c(){e=g("div"),t=g("h2"),t.textContent=s,n=I(),r=g("div"),a=g("div"),o=g("span"),o.textContent=f,d=I(),i=g("span"),p=$(c),u=$("%"),h=I(),b=g("span"),b.textContent=k,C=I(),S=g("div"),D=g("span"),D.textContent=N,L=I(),E=g("span"),X=$("+"),x=$(W),M=I(),q=g("span"),q.textContent=H,se=I(),U=g("button"),U.textContent=Z,this.h()},l(G){e=w(G,"DIV",{class:!0});var J=y(e);t=w(J,"H2",{class:!0,"data-svelte-h":!0}),O(t)!=="svelte-qxokg7"&&(t.textContent=s),n=A(J),r=w(J,"DIV",{class:!0});var de=y(r);a=w(de,"DIV",{class:!0});var ne=y(a);o=w(ne,"SPAN",{class:!0,"data-svelte-h":!0}),O(o)!=="svelte-1kxtmwe"&&(o.textContent=f),d=A(ne),i=w(ne,"SPAN",{class:!0});var ve=y(i);p=V(ve,c),u=V(ve,"%"),ve.forEach(m),h=A(ne),b=w(ne,"SPAN",{class:!0,"data-svelte-h":!0}),O(b)!=="svelte-1ah6tbw"&&(b.textContent=k),ne.forEach(m),C=A(de),S=w(de,"DIV",{class:!0});var re=y(S);D=w(re,"SPAN",{class:!0,"data-svelte-h":!0}),O(D)!=="svelte-1mcovjp"&&(D.textContent=N),L=A(re),E=w(re,"SPAN",{class:!0});var he=y(E);X=V(he,"+"),x=V(he,W),he.forEach(m),M=A(re),q=w(re,"SPAN",{class:!0,"data-svelte-h":!0}),O(q)!=="svelte-1p5h8nl"&&(q.textContent=H),re.forEach(m),de.forEach(m),se=A(J),U=w(J,"BUTTON",{class:!0,"data-svelte-h":!0}),O(U)!=="svelte-in1l0x"&&(U.textContent=Z),J.forEach(m),this.h()},h(){_(t,"class","svelte-1vomg9"),_(o,"class","stat-icon svelte-1vomg9"),_(i,"class","stat-value svelte-1vomg9"),_(b,"class","stat-label svelte-1vomg9"),_(a,"class","stat-item svelte-1vomg9"),_(D,"class","stat-icon svelte-1vomg9"),_(E,"class","stat-value svelte-1vomg9"),_(q,"class","stat-label svelte-1vomg9"),_(S,"class","stat-item svelte-1vomg9"),_(r,"class","stats-grid svelte-1vomg9"),_(U,"class","finish-btn svelte-1vomg9"),_(e,"class","completion-screen svelte-1vomg9")},m(G,J){T(G,e,J),v(e,t),v(e,n),v(e,r),v(r,a),v(a,o),v(a,d),v(a,i),v(i,p),v(i,u),v(a,h),v(a,b),v(r,C),v(r,S),v(S,D),v(S,L),v(S,E),v(E,X),v(E,x),v(S,M),v(S,q),v(e,se),v(e,U),le||(fe=Q(U,"click",zt),le=!0)},p(G,J){J&4&&c!==(c=G[2].score+"")&&R(p,c),J&4&&W!==(W=G[2].xpEarned+"")&&R(x,W)},i:z,o:z,d(G){G&&m(e),le=!1,fe()}}}function Ne(l){let e,t,s;return t=new _t({props:{step:l[5]}}),t.$on("answer",l[7]),{c(){e=g("div"),ue(t.$$.fragment),this.h()},l(n){e=w(n,"DIV",{class:!0});var r=y(e);ce(t.$$.fragment,r),r.forEach(m),this.h()},h(){_(e,"class","step-animation")},m(n,r){T(n,e,r),ie(t,e,null),s=!0},p(n,r){const a={};r&32&&(a.step=n[5]),t.$set(a)},i(n){s||(F(t.$$.fragment,n),s=!0)},o(n){j(t.$$.fragment,n),s=!1},d(n){n&&m(e),oe(t)}}}function Le(l){let e,t,s,n,r,a;return{c(){e=g("footer"),t=g("button"),s=$("Continue"),this.h()},l(o){e=w(o,"FOOTER",{class:!0});var f=y(e);t=w(f,"BUTTON",{class:!0});var d=y(t);s=V(d,"Continue"),d.forEach(m),f.forEach(m),this.h()},h(){_(t,"class","continue-btn svelte-1vomg9"),t.disabled=n=!l[3].canContinue,_(e,"class","lesson-footer svelte-1vomg9")},m(o,f){T(o,e,f),v(e,t),v(t,s),r||(a=Q(t,"click",l[6]),r=!0)},p(o,f){f&8&&n!==(n=!o[3].canContinue)&&(t.disabled=n)},d(o){o&&m(e),r=!1,a()}}}function xt(l){let e,t,s,n,r,a,o,f,d,i;const c=[Mt,Rt,Lt],p=[];function u(b,k){return b[2]?0:b[1]?1:b[5]?2:-1}~(o=u(l))&&(f=p[o]=c[o](l));let h=!l[3].isComplete&&!l[1]&&Le(l);return{c(){e=g("div"),t=g("header"),s=g("div"),n=g("div"),r=I(),a=g("main"),f&&f.c(),d=I(),h&&h.c(),this.h()},l(b){e=w(b,"DIV",{class:!0});var k=y(e);t=w(k,"HEADER",{class:!0});var C=y(t);s=w(C,"DIV",{class:!0});var S=y(s);n=w(S,"DIV",{class:!0,style:!0}),y(n).forEach(m),S.forEach(m),C.forEach(m),r=A(k),a=w(k,"MAIN",{class:!0});var D=y(a);f&&f.l(D),D.forEach(m),d=A(k),h&&h.l(k),k.forEach(m),this.h()},h(){_(n,"class","progress-fill svelte-1vomg9"),we(n,"width",l[3].currentIndex/(l[0].lesson.steps.length||1)*100+"%"),_(s,"class","progress-bar svelte-1vomg9"),_(t,"class","lesson-header svelte-1vomg9"),_(a,"class","lesson-content svelte-1vomg9"),_(e,"class","lesson-layout svelte-1vomg9")},m(b,k){T(b,e,k),v(e,t),v(t,s),v(s,n),v(e,r),v(e,a),~o&&p[o].m(a,null),v(e,d),h&&h.m(e,null),i=!0},p(b,[k]){(!i||k&9)&&we(n,"width",b[3].currentIndex/(b[0].lesson.steps.length||1)*100+"%");let C=o;o=u(b),o===C?~o&&p[o].p(b,k):(f&&(pe(),j(p[C],1,1,()=>{p[C]=null}),_e()),~o?(f=p[o],f?f.p(b,k):(f=p[o]=c[o](b),f.c()),F(f,1),f.m(a,null)):f=null),!b[3].isComplete&&!b[1]?h?h.p(b,k):(h=Le(b),h.c(),h.m(e,null)):h&&(h.d(1),h=null)},i(b){i||(F(f),i=!0)},o(b){j(f),i=!1},d(b){b&&m(e),~o&&p[o].d(),h&&h.d()}}}function zt(){window.location.href="/"}function Ht(l,e,t){let s,n;ge(l,Nt,h=>t(5,s=h)),ge(l,ae,h=>t(3,n=h));let{data:r}=e,a=!1,o=[],f=null;xe(()=>{r.lesson&&ae.init(r.lesson)});function d(){ae.nextStep()}async function i(h){const{correct:b,userAnswer:k,correctAnswer:C,allowContinue:S}=h.detail;b?(console.log("âœ… Correct Answer!"),ae.enableContinue()):(console.log("âŒ Wrong Answer - Must retry"),await Ct({lessonId:r.lesson.id,stepId:s.id,stepType:s.type,question:s.question||s.prompt,userAnswer:k||"unknown",correctAnswer:C||"unknown"}),S===!1&&ae.disableContinue())}async function c(){t(4,o=await At(r.lesson.id)),o.length>0?t(1,a=!0):await u()}async function p(h){const{reviewedIds:b}=h.detail;await Et(b),await u()}async function u(){t(2,f=await Tt(r.lesson.id,r.lesson.steps.length))}return l.$$set=h=>{"data"in h&&t(0,r=h.data)},l.$$.update=()=>{l.$$.dirty&14&&n.isComplete&&!a&&!f&&c()},[r,a,f,n,o,s,d,i,p]}class Jt extends ee{constructor(e){super(),te(this,e,Ht,xt,K,{data:0})}}export{Jt as component};
