import{s as ne,n as te,d as v,i as V,p as de,a as G,l as _,b as h,c as w,e as $,f as M,h as k,t as F,m as U,g as D,j as P,u as ee,o as _e,Y as be,q as B,r as Dt,w as Pt,Z as Ee,C as ge,A as Ae,k as ye}from"../chunks/scheduler.DHaUa2t2.js";import{S as oe,i as ce,a as j,t as q,g as ie,c as ae,d as Q,m as Y,e as K,b as x}from"../chunks/index.BLaPU33Z.js";import{d as Nt,w as qt}from"../chunks/entry.D1lmWXZs.js";import{e as le,u as Tt,o as Ot,d as zt}from"../chunks/each.B0g1Og5e.js";import{p as Vt}from"../chunks/audio.D-onYBYO.js";import{d as X}from"../chunks/index.DS5prfHJ.js";const Bt=/[\u0591-\u07FF\u200F\u202B\u202E\uFB1D-\uFDFD\uFE70-\uFEFC]/,jt=/[A-Za-z\u00C0-\u00FF\u0100-\u017F\u0180-\u024F]/;function we(s){if(!s)return"ltr";for(const e of s){if(Bt.test(e))return"rtl";if(jt.test(e))return"ltr"}return"ltr"}function Ut(s){let e,t;return{c(){e=k("span"),t=F(s[0]),this.h()},l(l){e=w(l,"SPAN",{dir:!0,class:!0});var n=$(e);t=M(n,s[0]),n.forEach(v),this.h()},h(){_(e,"dir",s[2]),_(e,"class","bidi-text svelte-1da3niz")},m(l,n){V(l,e,n),h(e,t)},p(l,n){n&1&&G(t,l[0]),n&4&&_(e,"dir",l[2])},d(l){l&&v(e)}}}function Rt(s){let e,t;return{c(){e=k("div"),t=F(s[0]),this.h()},l(l){e=w(l,"DIV",{dir:!0,class:!0});var n=$(e);t=M(n,s[0]),n.forEach(v),this.h()},h(){_(e,"dir",s[2]),_(e,"class","bidi-text svelte-1da3niz")},m(l,n){V(l,e,n),h(e,t)},p(l,n){n&1&&G(t,l[0]),n&4&&_(e,"dir",l[2])},d(l){l&&v(e)}}}function Lt(s){let e,t;return{c(){e=k("p"),t=F(s[0]),this.h()},l(l){e=w(l,"P",{dir:!0,class:!0});var n=$(e);t=M(n,s[0]),n.forEach(v),this.h()},h(){_(e,"dir",s[2]),_(e,"class","bidi-text svelte-1da3niz")},m(l,n){V(l,e,n),h(e,t)},p(l,n){n&1&&G(t,l[0]),n&4&&_(e,"dir",l[2])},d(l){l&&v(e)}}}function Mt(s){let e;function t(r,i){return r[1]==="p"?Lt:r[1]==="div"?Rt:Ut}let l=t(s),n=l(s);return{c(){n.c(),e=de()},l(r){n.l(r),e=de()},m(r,i){n.m(r,i),V(r,e,i)},p(r,[i]){l===(l=t(r))&&n?n.p(r,i):(n.d(1),n=l(r),n&&(n.c(),n.m(e.parentNode,e)))},i:te,o:te,d(r){r&&v(e),n.d(r)}}}function Ft(s,e,t){let l,{text:n}=e,{tag:r="span"}=e;return s.$$set=i=>{"text"in i&&t(0,n=i.text),"tag"in i&&t(1,r=i.tag)},s.$$.update=()=>{s.$$.dirty&1&&t(2,l=we(n))},[n,r,l]}class ue extends oe{constructor(e){super(),ce(this,e,Ft,Mt,ne,{text:0,tag:1})}}function Se(s,e,t){const l=s.slice();return l[3]=e[t],l[5]=t,l}function $e(s,e){let t,l,n=e[3].speaker+"",r,i,o,c=e[3].text.de+"",a,f,u,p,d,b,S="üîä",m,C,E,g;p=new ue({props:{text:e[3].text.fa}});function A(){return e[2](e[3])}return{key:s,first:null,c(){t=k("div"),l=k("div"),r=F(n),i=P(),o=k("p"),a=F(c),f=P(),u=k("p"),x(p.$$.fragment),d=P(),b=k("button"),b.textContent=S,m=P(),this.h()},l(y){t=w(y,"DIV",{class:!0});var N=$(t);l=w(N,"DIV",{class:!0});var z=$(l);r=M(z,n),z.forEach(v),i=D(N),o=w(N,"P",{class:!0});var I=$(o);a=M(I,c),I.forEach(v),f=D(N),u=w(N,"P",{class:!0,dir:!0});var O=$(u);K(p.$$.fragment,O),O.forEach(v),d=D(N),b=w(N,"BUTTON",{class:!0,"aria-label":!0,"data-svelte-h":!0}),U(b)!=="svelte-13rd3p5"&&(b.textContent=S),m=D(N),N.forEach(v),this.h()},h(){_(l,"class","speaker-name svelte-1nu0w96"),_(o,"class","dialog-text svelte-1nu0w96"),_(u,"class","dialog-translation svelte-1nu0w96"),_(u,"dir","rtl"),_(b,"class","audio-btn-small svelte-1nu0w96"),_(b,"aria-label","Play audio"),_(t,"class","chat-bubble svelte-1nu0w96"),this.first=t},m(y,N){V(y,t,N),h(t,l),h(l,r),h(t,i),h(t,o),h(o,a),h(t,f),h(t,u),Y(p,u,null),h(t,d),h(t,b),h(t,m),C=!0,E||(g=ee(b,"click",A),E=!0)},p(y,N){e=y,(!C||N&1)&&n!==(n=e[3].speaker+"")&&G(r,n),(!C||N&1)&&c!==(c=e[3].text.de+"")&&G(a,c);const z={};N&1&&(z.text=e[3].text.fa),p.$set(z)},i(y){C||(q(p.$$.fragment,y),C=!0)},o(y){j(p.$$.fragment,y),C=!1},d(y){y&&v(t),Q(p),E=!1,g()}}}function Ht(s){let e,t,l="ŸÖ⁄©ÿßŸÑŸÖŸá",n,r,i=[],o=new Map,c,a=le(s[0].lines);const f=u=>u[5];for(let u=0;u<a.length;u+=1){let p=Se(s,a,u),d=f(p);o.set(d,i[u]=$e(d,p))}return{c(){e=k("div"),t=k("h2"),t.textContent=l,n=P(),r=k("div");for(let u=0;u<i.length;u+=1)i[u].c();this.h()},l(u){e=w(u,"DIV",{class:!0});var p=$(e);t=w(p,"H2",{class:!0,"data-svelte-h":!0}),U(t)!=="svelte-l5qrx9"&&(t.textContent=l),n=D(p),r=w(p,"DIV",{class:!0});var d=$(r);for(let b=0;b<i.length;b+=1)i[b].l(d);d.forEach(v),p.forEach(v),this.h()},h(){_(t,"class","step-title svelte-1nu0w96"),_(r,"class","chat-box svelte-1nu0w96"),_(e,"class","step-container svelte-1nu0w96")},m(u,p){V(u,e,p),h(e,t),h(e,n),h(e,r);for(let d=0;d<i.length;d+=1)i[d]&&i[d].m(r,null);c=!0},p(u,[p]){p&3&&(a=le(u[0].lines),ie(),i=Tt(i,p,f,1,u,a,o,r,Ot,$e,null,Se),ae())},i(u){if(!c){for(let p=0;p<a.length;p+=1)q(i[p]);c=!0}},o(u){for(let p=0;p<i.length;p+=1)j(i[p]);c=!1},d(u){u&&v(e);for(let p=0;p<i.length;p+=1)i[p].d()}}}function Wt(s,e,t){let{step:l}=e;function n(i){var o;(o=i.audio)!=null&&o.url?console.log("Playing audio:",i.audio.url):Vt(i.text.de,"de-DE")}const r=i=>n(i);return s.$$set=i=>{"step"in i&&t(0,l=i.step)},[l,n,r]}class Gt extends oe{constructor(e){super(),ce(this,e,Wt,Ht,ne,{step:0})}}function Ie(s){let e,t;return{c(){e=k("span"),t=F(s[2]),this.h()},l(l){e=w(l,"SPAN",{class:!0});var n=$(e);t=M(n,s[2]),n.forEach(v),this.h()},h(){_(e,"class","number svelte-1pyd23l")},m(l,n){V(l,e,n),h(e,t)},p(l,n){n&4&&G(t,l[2])},d(l){l&&v(e)}}}function De(s){let e,t;return{c(){e=k("span"),t=F(s[1]),this.h()},l(l){e=w(l,"SPAN",{class:!0,dir:!0});var n=$(e);t=M(n,s[1]),n.forEach(v),this.h()},h(){_(e,"class","persian svelte-1pyd23l"),_(e,"dir","rtl")},m(l,n){V(l,e,n),h(e,t)},p(l,n){n&2&&G(t,l[1])},d(l){l&&v(e)}}}function Zt(s){let e,t,l,n,r,i,o,c=s[2]&&Ie(s),a=s[1]&&De(s);return{c(){e=k("div"),t=k("div"),c&&c.c(),l=P(),n=k("span"),r=F(s[0]),i=P(),a&&a.c(),this.h()},l(f){e=w(f,"DIV",{class:!0,dir:!0});var u=$(e);t=w(u,"DIV",{class:!0});var p=$(t);c&&c.l(p),l=D(p),n=w(p,"SPAN",{class:!0});var d=$(n);r=M(d,s[0]),d.forEach(v),i=D(p),a&&a.l(p),p.forEach(v),u.forEach(v),this.h()},h(){_(n,"class","german svelte-1pyd23l"),_(t,"class","pill-content svelte-1pyd23l"),_(e,"class",o="vocab-pill "+s[3]+" "+s[4]+" svelte-1pyd23l"),_(e,"dir","ltr")},m(f,u){V(f,e,u),h(e,t),c&&c.m(t,null),h(t,l),h(t,n),h(n,r),h(t,i),a&&a.m(t,null)},p(f,[u]){f[2]?c?c.p(f,u):(c=Ie(f),c.c(),c.m(t,l)):c&&(c.d(1),c=null),u&1&&G(r,f[0]),f[1]?a?a.p(f,u):(a=De(f),a.c(),a.m(t,null)):a&&(a.d(1),a=null),u&24&&o!==(o="vocab-pill "+f[3]+" "+f[4]+" svelte-1pyd23l")&&_(e,"class",o)},i:te,o:te,d(f){f&&v(e),c&&c.d(),a&&a.d()}}}function Jt(s,e,t){let{german:l=""}=e,{persian:n=""}=e,{number:r=""}=e,{size:i="medium"}=e,{variant:o="default"}=e;return s.$$set=c=>{"german"in c&&t(0,l=c.german),"persian"in c&&t(1,n=c.persian),"number"in c&&t(2,r=c.number),"size"in c&&t(3,i=c.size),"variant"in c&&t(4,o=c.variant)},[l,n,r,i,o]}class Xt extends oe{constructor(e){super(),ce(this,e,Jt,Zt,ne,{german:0,persian:1,number:2,size:3,variant:4})}}function Pe(s,e,t){const l=s.slice();return l[5]=e[t],l}function Qt(s){let e,t;return{c(){e=k("p"),t=F(s[0]),this.h()},l(l){e=w(l,"P",{class:!0,dir:!0});var n=$(e);t=M(n,s[0]),n.forEach(v),this.h()},h(){_(e,"class","fallback-text svelte-1fm6n0h"),_(e,"dir","rtl")},m(l,n){V(l,e,n),h(e,t)},p(l,n){n&1&&G(t,l[0])},i:te,o:te,d(l){l&&v(e)}}}function Yt(s){let e,t,l,n,r=s[3].prefix&&Te(s),i=le(s[3].items),o=[];for(let a=0;a<i.length;a+=1)o[a]=Ve(Pe(s,i,a));const c=a=>j(o[a],1,1,()=>{o[a]=null});return{c(){e=k("div"),r&&r.c(),t=P(),l=k("div");for(let a=0;a<o.length;a+=1)o[a].c();this.h()},l(a){e=w(a,"DIV",{class:!0});var f=$(e);r&&r.l(f),t=D(f),l=w(f,"DIV",{class:!0});var u=$(l);for(let p=0;p<o.length;p+=1)o[p].l(u);u.forEach(v),f.forEach(v),this.h()},h(){_(l,"class","pills-grid svelte-1fm6n0h"),_(e,"class","vocab-pill-list svelte-1fm6n0h")},m(a,f){V(a,e,f),r&&r.m(e,null),h(e,t),h(e,l);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(l,null);n=!0},p(a,f){if(a[3].prefix?r?r.p(a,f):(r=Te(a),r.c(),r.m(e,t)):r&&(r.d(1),r=null),f&14){i=le(a[3].items);let u;for(u=0;u<i.length;u+=1){const p=Pe(a,i,u);o[u]?(o[u].p(p,f),q(o[u],1)):(o[u]=Ve(p),o[u].c(),q(o[u],1),o[u].m(l,null))}for(ie(),u=i.length;u<o.length;u+=1)c(u);ae()}},i(a){if(!n){for(let f=0;f<i.length;f+=1)q(o[f]);n=!0}},o(a){o=o.filter(Boolean);for(let f=0;f<o.length;f+=1)j(o[f]);n=!1},d(a){a&&v(e),r&&r.d(),_e(o,a)}}}function Te(s){let e,t=s[3].prefix+"",l;return{c(){e=k("div"),l=F(t),this.h()},l(n){e=w(n,"DIV",{class:!0,dir:!0});var r=$(e);l=M(r,t),r.forEach(v),this.h()},h(){_(e,"class","prefix svelte-1fm6n0h"),_(e,"dir","rtl")},m(n,r){V(n,e,r),h(e,l)},p(n,r){r&8&&t!==(t=n[3].prefix+"")&&G(l,t)},d(n){n&&v(e)}}}function Ve(s){let e,t;return e=new Xt({props:{german:s[5].german,persian:s[5].persian,number:s[5].number,size:s[1],variant:s[2]}}),{c(){x(e.$$.fragment)},l(l){K(e.$$.fragment,l)},m(l,n){Y(e,l,n),t=!0},p(l,n){const r={};n&8&&(r.german=l[5].german),n&8&&(r.persian=l[5].persian),n&8&&(r.number=l[5].number),n&2&&(r.size=l[1]),n&4&&(r.variant=l[2]),e.$set(r)},i(l){t||(q(e.$$.fragment,l),t=!0)},o(l){j(e.$$.fragment,l),t=!1},d(l){Q(e,l)}}}function Kt(s){let e,t,l,n;const r=[Yt,Qt],i=[];function o(c,a){return c[4]?0:1}return e=o(s),t=i[e]=r[e](s),{c(){t.c(),l=de()},l(c){t.l(c),l=de()},m(c,a){i[e].m(c,a),V(c,l,a),n=!0},p(c,[a]){let f=e;e=o(c),e===f?i[e].p(c,a):(ie(),j(i[f],1,1,()=>{i[f]=null}),ae(),t=i[e],t?t.p(c,a):(t=i[e]=r[e](c),t.c()),q(t,1),t.m(l.parentNode,l))},i(c){n||(q(t),n=!0)},o(c){j(t),n=!1},d(c){c&&v(l),i[e].d(c)}}}function xt(s){const e=s.indexOf(":"),t=e!==-1?s.substring(0,e+1).trim():"",r=(e!==-1?s.substring(e+1).trim():s).split(/[ÿå,]/).map(i=>{if(i=i.trim(),!i)return null;const o=i.match(/^([a-zA-Z√§√∂√º√ü√Ñ√ñ√ú·∫û]+)\s*\(([^)]+)\)/);if(o){const c=o[1].trim(),a=o[2].trim(),f=/[€∞-€π]/.test(a);return{german:c,persian:f?"":a,number:f?a:""}}return null}).filter(i=>i!==null);return{prefix:t,items:r}}function el(s,e,t){let l,n,{text:r=""}=e,{size:i="medium"}=e,{variant:o="default"}=e;return s.$$set=c=>{"text"in c&&t(0,r=c.text),"size"in c&&t(1,i=c.size),"variant"in c&&t(2,o=c.variant)},s.$$.update=()=>{s.$$.dirty&1&&t(3,l=xt(r)),s.$$.dirty&8&&t(4,n=l.items.length>0)},[r,i,o,l,n]}class tl extends oe{constructor(e){super(),ce(this,e,el,Kt,ne,{text:0,size:1,variant:2})}}function Ne(s,e,t){const l=s.slice();return l[2]=e[t],l}function ll(s){let e,t,l;return t=new ue({props:{text:s[0].content}}),{c(){e=k("p"),x(t.$$.fragment),this.h()},l(n){e=w(n,"P",{class:!0});var r=$(e);K(t.$$.fragment,r),r.forEach(v),this.h()},h(){_(e,"class","grammar-text svelte-y2gar0")},m(n,r){V(n,e,r),Y(t,e,null),l=!0},p(n,r){const i={};r&1&&(i.text=n[0].content),t.$set(i)},i(n){l||(q(t.$$.fragment,n),l=!0)},o(n){j(t.$$.fragment,n),l=!1},d(n){n&&v(e),Q(t)}}}function sl(s){let e,t;return e=new tl({props:{text:s[0].content,variant:"warning"}}),{c(){x(e.$$.fragment)},l(l){K(e.$$.fragment,l)},m(l,n){Y(e,l,n),t=!0},p(l,n){const r={};n&1&&(r.text=l[0].content),e.$set(r)},i(l){t||(q(e.$$.fragment,l),t=!0)},o(l){j(e.$$.fragment,l),t=!1},d(l){Q(e,l)}}}function qe(s){let e,t,l="ŸÖÿ´ÿßŸÑ‚ÄåŸáÿß:",n,r,i=le(s[0].examples),o=[];for(let a=0;a<i.length;a+=1)o[a]=Oe(Ne(s,i,a));const c=a=>j(o[a],1,1,()=>{o[a]=null});return{c(){e=k("div"),t=k("h3"),t.textContent=l,n=P();for(let a=0;a<o.length;a+=1)o[a].c();this.h()},l(a){e=w(a,"DIV",{class:!0});var f=$(e);t=w(f,"H3",{class:!0,"data-svelte-h":!0}),U(t)!=="svelte-1oor1ko"&&(t.textContent=l),n=D(f);for(let u=0;u<o.length;u+=1)o[u].l(f);f.forEach(v),this.h()},h(){_(t,"class","examples-title svelte-y2gar0"),_(e,"class","examples-section svelte-y2gar0")},m(a,f){V(a,e,f),h(e,t),h(e,n);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(e,null);r=!0},p(a,f){if(f&1){i=le(a[0].examples);let u;for(u=0;u<i.length;u+=1){const p=Ne(a,i,u);o[u]?(o[u].p(p,f),q(o[u],1)):(o[u]=Oe(p),o[u].c(),q(o[u],1),o[u].m(e,null))}for(ie(),u=i.length;u<o.length;u+=1)c(u);ae()}},i(a){if(!r){for(let f=0;f<i.length;f+=1)q(o[f]);r=!0}},o(a){o=o.filter(Boolean);for(let f=0;f<o.length;f+=1)j(o[f]);r=!1},d(a){a&&v(e),_e(o,a)}}}function Oe(s){let e,t,l=s[2].de+"",n,r,i,o,c,a;return o=new ue({props:{text:s[2].fa}}),{c(){e=k("div"),t=k("p"),n=F(l),r=P(),i=k("p"),x(o.$$.fragment),c=P(),this.h()},l(f){e=w(f,"DIV",{class:!0});var u=$(e);t=w(u,"P",{class:!0,dir:!0});var p=$(t);n=M(p,l),p.forEach(v),r=D(u),i=w(u,"P",{class:!0});var d=$(i);K(o.$$.fragment,d),d.forEach(v),c=D(u),u.forEach(v),this.h()},h(){_(t,"class","example-de svelte-y2gar0"),_(t,"dir","ltr"),_(i,"class","example-fa svelte-y2gar0"),_(e,"class","example-item svelte-y2gar0")},m(f,u){V(f,e,u),h(e,t),h(t,n),h(e,r),h(e,i),Y(o,i,null),h(e,c),a=!0},p(f,u){(!a||u&1)&&l!==(l=f[2].de+"")&&G(n,l);const p={};u&1&&(p.text=f[2].fa),o.$set(p)},i(f){a||(q(o.$$.fragment,f),a=!0)},o(f){j(o.$$.fragment,f),a=!1},d(f){f&&v(e),Q(o)}}}function nl(s){let e,t,l,n="üí°",r,i,o,c,a,f,u,p;o=new ue({props:{text:s[0].title||"ŸÜ⁄©ÿ™Ÿá ⁄Øÿ±ÿßŸÖÿ±€å"}});const d=[sl,ll],b=[];function S(C,E){return C[1]?0:1}a=S(s),f=b[a]=d[a](s);let m=s[0].examples&&s[0].examples.length>0&&qe(s);return{c(){e=k("div"),t=k("div"),l=k("span"),l.textContent=n,r=P(),i=k("h2"),x(o.$$.fragment),c=P(),f.c(),u=P(),m&&m.c(),this.h()},l(C){e=w(C,"DIV",{class:!0,dir:!0});var E=$(e);t=w(E,"DIV",{class:!0});var g=$(t);l=w(g,"SPAN",{class:!0,"data-svelte-h":!0}),U(l)!=="svelte-1oh0gk8"&&(l.textContent=n),r=D(g),i=w(g,"H2",{class:!0});var A=$(i);K(o.$$.fragment,A),A.forEach(v),g.forEach(v),c=D(E),f.l(E),u=D(E),m&&m.l(E),E.forEach(v),this.h()},h(){_(l,"class","bulb-icon svelte-y2gar0"),_(i,"class","step-title svelte-y2gar0"),_(t,"class","icon-header svelte-y2gar0"),_(e,"class","grammar-card svelte-y2gar0"),_(e,"dir","rtl")},m(C,E){V(C,e,E),h(e,t),h(t,l),h(t,r),h(t,i),Y(o,i,null),h(e,c),b[a].m(e,null),h(e,u),m&&m.m(e,null),p=!0},p(C,[E]){const g={};E&1&&(g.text=C[0].title||"ŸÜ⁄©ÿ™Ÿá ⁄Øÿ±ÿßŸÖÿ±€å"),o.$set(g);let A=a;a=S(C),a===A?b[a].p(C,E):(ie(),j(b[A],1,1,()=>{b[A]=null}),ae(),f=b[a],f?f.p(C,E):(f=b[a]=d[a](C),f.c()),q(f,1),f.m(e,u)),C[0].examples&&C[0].examples.length>0?m?(m.p(C,E),E&1&&q(m,1)):(m=qe(C),m.c(),q(m,1),m.m(e,null)):m&&(ie(),j(m,1,1,()=>{m=null}),ae())},i(C){p||(q(o.$$.fragment,C),q(f),q(m),p=!0)},o(C){j(o.$$.fragment,C),j(f),j(m),p=!1},d(C){C&&v(e),Q(o),b[a].d(),m&&m.d()}}}function rl(s){return/[a-zA-Z√§√∂√º√ü√Ñ√ñ√ú·∫û]+\s*\([^)]+\)[ÿå,]/.test(s)}function il(s,e,t){let l,{step:n}=e;return s.$$set=r=>{"step"in r&&t(0,n=r.step)},s.$$.update=()=>{s.$$.dirty&1&&t(1,l=rl(n.content))},[n,l]}class al extends oe{constructor(e){super(),ce(this,e,il,nl,ne,{step:0})}}function ze(s,e,t){const l=s.slice();return l[10]=e[t],l[12]=t,l}function ol(s){let e,t="‚ùå";return{c(){e=k("span"),e.textContent=t,this.h()},l(l){e=w(l,"SPAN",{class:!0,"data-svelte-h":!0}),U(e)!=="svelte-1y31312"&&(e.textContent=t),this.h()},h(){_(e,"class","icon svelte-guf240")},m(l,n){V(l,e,n)},d(l){l&&v(e)}}}function cl(s){let e,t="‚úÖ";return{c(){e=k("span"),e.textContent=t,this.h()},l(l){e=w(l,"SPAN",{class:!0,"data-svelte-h":!0}),U(e)!=="svelte-7p7kw9"&&(e.textContent=t),this.h()},h(){_(e,"class","icon svelte-guf240")},m(l,n){V(l,e,n)},d(l){l&&v(e)}}}function Be(s,e){let t,l=e[10]+"",n,r,i,o,c;function a(d,b){if(d[2]&&d[12]===d[4])return cl;if(d[2]&&d[1]===d[12]&&d[12]!==d[4])return ol}let f=a(e),u=f&&f(e);function p(){return e[8](e[12])}return{key:s,first:null,c(){t=k("button"),n=F(l),r=P(),u&&u.c(),i=P(),this.h()},l(d){t=w(d,"BUTTON",{class:!0});var b=$(t);n=M(b,l),r=D(b),u&&u.l(b),i=D(b),b.forEach(v),this.h()},h(){_(t,"class","option-btn svelte-guf240"),t.disabled=e[2],B(t,"selected",e[1]===e[12]),B(t,"correct",e[2]&&e[12]===e[4]),B(t,"wrong",e[2]&&e[1]===e[12]&&e[12]!==e[4]),B(t,"disabled",e[2]),this.first=t},m(d,b){V(d,t,b),h(t,n),h(t,r),u&&u.m(t,null),h(t,i),o||(c=ee(t,"click",p),o=!0)},p(d,b){e=d,b&1&&l!==(l=e[10]+"")&&G(n,l),f!==(f=a(e))&&(u&&u.d(1),u=f&&f(e),u&&(u.c(),u.m(t,i))),b&4&&(t.disabled=e[2]),b&3&&B(t,"selected",e[1]===e[12]),b&21&&B(t,"correct",e[2]&&e[12]===e[4]),b&23&&B(t,"wrong",e[2]&&e[1]===e[12]&&e[12]!==e[4]),b&4&&B(t,"disabled",e[2])},d(d){d&&v(t),u&&u.d(),o=!1,c()}}}function je(s){let e,t,l="‚ùå ÿØŸàÿ®ÿßÿ±Ÿá ÿßŸÖÿ™ÿ≠ÿßŸÜ ⁄©ŸÜ€åÿØ! Ÿæÿßÿ≥ÿÆ ÿµÿ≠€åÿ≠ ÿ®ÿßŸÑÿß ŸÖÿ¥ÿÆÿµ ÿ¥ÿØŸá ÿßÿ≥ÿ™.",n,r,i="üîÑ ÿ™ŸÑÿßÿ¥ ŸÖÿ¨ÿØÿØ",o,c;return{c(){e=k("div"),t=k("p"),t.textContent=l,n=P(),r=k("button"),r.textContent=i,this.h()},l(a){e=w(a,"DIV",{class:!0});var f=$(e);t=w(f,"P",{class:!0,"data-svelte-h":!0}),U(t)!=="svelte-shjs0y"&&(t.textContent=l),n=D(f),r=w(f,"BUTTON",{class:!0,"data-svelte-h":!0}),U(r)!=="svelte-kosbgl"&&(r.textContent=i),f.forEach(v),this.h()},h(){_(t,"class","feedback-text svelte-guf240"),_(r,"class","retry-btn svelte-guf240"),_(e,"class","retry-section svelte-guf240")},m(a,f){V(a,e,f),h(e,t),h(e,n),h(e,r),o||(c=ee(r,"click",s[7]),o=!0)},p:te,d(a){a&&v(e),o=!1,c()}}}function fl(s){let e,t,l,n,r,i=[],o=new Map,c,a;l=new ue({props:{text:s[5]}});let f=le(s[0].options);const u=d=>d[12];for(let d=0;d<f.length;d+=1){let b=ze(s,f,d),S=u(b);o.set(S,i[d]=Be(S,b))}let p=s[3]&&je(s);return{c(){e=k("div"),t=k("h2"),x(l.$$.fragment),n=P(),r=k("div");for(let d=0;d<i.length;d+=1)i[d].c();c=P(),p&&p.c(),this.h()},l(d){e=w(d,"DIV",{class:!0});var b=$(e);t=w(b,"H2",{class:!0,dir:!0});var S=$(t);K(l.$$.fragment,S),S.forEach(v),n=D(b),r=w(b,"DIV",{class:!0});var m=$(r);for(let C=0;C<i.length;C+=1)i[C].l(m);m.forEach(v),c=D(b),p&&p.l(b),b.forEach(v),this.h()},h(){_(t,"class","question svelte-guf240"),_(t,"dir","rtl"),_(r,"class","options-grid svelte-guf240"),_(e,"class","quiz-container svelte-guf240")},m(d,b){V(d,e,b),h(e,t),Y(l,t,null),h(e,n),h(e,r);for(let S=0;S<i.length;S+=1)i[S]&&i[S].m(r,null);h(e,c),p&&p.m(e,null),a=!0},p(d,[b]){const S={};b&32&&(S.text=d[5]),l.$set(S),b&87&&(f=le(d[0].options),i=Tt(i,b,u,1,d,f,o,r,zt,Be,null,ze)),d[3]?p?p.p(d,b):(p=je(d),p.c(),p.m(e,null)):p&&(p.d(1),p=null)},i(d){a||(q(l.$$.fragment,d),a=!0)},o(d){j(l.$$.fragment,d),a=!1},d(d){d&&v(e),Q(l);for(let b=0;b<i.length;b+=1)i[b].d();p&&p.d()}}}function ul(s,e,t){let l,n,{step:r}=e,i=null,o=!1,c=!1;const a=be();function f(d){if(o)return;t(1,i=d),t(2,o=!0);const b=d===n;b||t(3,c=!0),a("answer",{correct:b,userAnswer:r.options[d],correctAnswer:r.options[n],allowContinue:b})}function u(){t(1,i=null),t(2,o=!1),t(3,c=!1)}const p=d=>f(d);return s.$$set=d=>{"step"in d&&t(0,r=d.step)},s.$$.update=()=>{s.$$.dirty&1&&t(5,l=r.question||r.prompt),s.$$.dirty&1&&t(4,n=r.correctAnswerIndex??r.answer)},[r,i,o,c,n,l,f,u,p]}class dl extends oe{constructor(e){super(),ce(this,e,ul,fl,ne,{step:0})}}function hl(s){let e,t="<span>üñºÔ∏è</span>";return{c(){e=k("div"),e.innerHTML=t,this.h()},l(l){e=w(l,"DIV",{class:!0,"data-svelte-h":!0}),U(e)!=="svelte-nmug5n"&&(e.innerHTML=t),this.h()},h(){_(e,"class","image-placeholder svelte-1vv536s")},m(l,n){V(l,e,n)},p:te,d(l){l&&v(e)}}}function pl(s){let e,t,l;return{c(){e=k("img"),this.h()},l(n){e=w(n,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Ee(e.src,t=s[0].image)||_(e,"src",t),_(e,"alt",l=s[0].word.de),_(e,"class","vocab-image svelte-1vv536s")},m(n,r){V(n,e,r)},p(n,r){r&1&&!Ee(e.src,t=n[0].image)&&_(e,"src",t),r&1&&l!==(l=n[0].word.de)&&_(e,"alt",l)},d(n){n&&v(e)}}}function Ue(s){let e,t,l=s[0].example.text.de+"",n,r,i,o,c,a,f="ŸÖÿ´ÿßŸÑ ÿØÿ± ÿ¨ŸÖŸÑŸá",u;return o=new ue({props:{text:s[0].example.text.fa}}),{c(){e=k("div"),t=k("p"),n=F(l),r=P(),i=k("p"),x(o.$$.fragment),c=P(),a=k("p"),a.textContent=f,this.h()},l(p){e=w(p,"DIV",{class:!0});var d=$(e);t=w(d,"P",{class:!0});var b=$(t);n=M(b,l),b.forEach(v),r=D(d),i=w(d,"P",{class:!0,dir:!0});var S=$(i);K(o.$$.fragment,S),S.forEach(v),c=D(d),a=w(d,"P",{class:!0,"data-svelte-h":!0}),U(a)!=="svelte-11v4tpe"&&(a.textContent=f),d.forEach(v),this.h()},h(){_(t,"class","sentence-text svelte-1vv536s"),_(i,"class","sentence-translation svelte-1vv536s"),_(i,"dir","rtl"),_(a,"class","sentence-label svelte-1vv536s"),_(e,"class","sentence-box svelte-1vv536s")},m(p,d){V(p,e,d),h(e,t),h(t,n),h(e,r),h(e,i),Y(o,i,null),h(e,c),h(e,a),u=!0},p(p,d){(!u||d&1)&&l!==(l=p[0].example.text.de+"")&&G(n,l);const b={};d&1&&(b.text=p[0].example.text.fa),o.$set(b)},i(p){u||(q(o.$$.fragment,p),u=!0)},o(p){j(o.$$.fragment,p),u=!1},d(p){p&&v(e),Q(o)}}}function _l(s){let e,t,l,n,r,i,o=s[0].word.de+"",c,a,f,u="üîä",p,d,b,S,m,C=s[1]?"‚úÖ Saved":"‚ûï Add to Vocab",E,g,A,y,N;function z(T,L){return T[0].image?pl:hl}let I=z(s),O=I(s);b=new ue({props:{text:s[0].word.fa}});let R=s[0].example&&Ue(s);return{c(){e=k("div"),t=k("div"),O.c(),l=P(),n=k("div"),r=k("div"),i=k("h2"),c=F(o),a=P(),f=k("button"),f.textContent=u,p=P(),d=k("p"),x(b.$$.fragment),S=P(),m=k("button"),E=F(C),g=P(),R&&R.c(),this.h()},l(T){e=w(T,"DIV",{class:!0});var L=$(e);t=w(L,"DIV",{class:!0});var J=$(t);O.l(J),J.forEach(v),l=D(L),n=w(L,"DIV",{class:!0});var W=$(n);r=w(W,"DIV",{class:!0});var H=$(r);i=w(H,"H2",{class:!0});var Z=$(i);c=M(Z,o),Z.forEach(v),a=D(H),f=w(H,"BUTTON",{class:!0,"aria-label":!0,"data-svelte-h":!0}),U(f)!=="svelte-1ui3l5k"&&(f.textContent=u),H.forEach(v),p=D(W),d=w(W,"P",{class:!0,dir:!0});var fe=$(d);K(b.$$.fragment,fe),fe.forEach(v),S=D(W),m=w(W,"BUTTON",{class:!0});var re=$(m);E=M(re,C),re.forEach(v),g=D(W),R&&R.l(W),W.forEach(v),L.forEach(v),this.h()},h(){_(t,"class","image-area svelte-1vv536s"),_(i,"class","german-word svelte-1vv536s"),_(f,"class","audio-btn svelte-1vv536s"),_(f,"aria-label","Play Audio"),_(r,"class","word-row svelte-1vv536s"),_(d,"class","translation svelte-1vv536s"),_(d,"dir","rtl"),_(m,"class","save-btn svelte-1vv536s"),B(m,"saved",s[1]),_(n,"class","content-area svelte-1vv536s"),_(e,"class","card-container svelte-1vv536s")},m(T,L){V(T,e,L),h(e,t),O.m(t,null),h(e,l),h(e,n),h(n,r),h(r,i),h(i,c),h(r,a),h(r,f),h(n,p),h(n,d),Y(b,d,null),h(n,S),h(n,m),h(m,E),h(n,g),R&&R.m(n,null),A=!0,y||(N=[ee(f,"click",s[3]),ee(m,"click",s[2])],y=!0)},p(T,[L]){I===(I=z(T))&&O?O.p(T,L):(O.d(1),O=I(T),O&&(O.c(),O.m(t,null))),(!A||L&1)&&o!==(o=T[0].word.de+"")&&G(c,o);const J={};L&1&&(J.text=T[0].word.fa),b.$set(J),(!A||L&2)&&C!==(C=T[1]?"‚úÖ Saved":"‚ûï Add to Vocab")&&G(E,C),(!A||L&2)&&B(m,"saved",T[1]),T[0].example?R?(R.p(T,L),L&1&&q(R,1)):(R=Ue(T),R.c(),q(R,1),R.m(n,null)):R&&(ie(),j(R,1,1,()=>{R=null}),ae())},i(T){A||(q(b.$$.fragment,T),q(R),A=!0)},o(T){j(b.$$.fragment,T),j(R),A=!1},d(T){T&&v(e),O.d(),Q(b),R&&R.d(),y=!1,Dt(N)}}}function vl(s,e,t){let{step:l}=e,n=!1;Pt(async()=>{const o=await X.vocab.where("word").equals(l.word.de).first();t(1,n=!!o),typeof window<"u"&&"speechSynthesis"in window&&window.speechSynthesis.getVoices()});async function r(){var o;n?(await X.vocab.where("word").equals(l.word.de).delete(),t(1,n=!1)):(await X.vocab.add({word:l.word.de,translation:l.word.fa,example:(o=l.example)==null?void 0:o.text.de,addedAt:new Date,srsLevel:0,nextReview:new Date}),t(1,n=!0))}function i(){Vt(l.word.de,"de-DE")}return s.$$set=o=>{"step"in o&&t(0,l=o.step)},[l,n,r,i]}class ml extends oe{constructor(e){super(),ce(this,e,vl,_l,ne,{step:0})}}function Re(s,e,t){const l=s.slice();return l[13]=e[t],l[15]=t,l}function Le(s,e,t){const l=s.slice();return l[16]=e[t],l}function bl(s){const e=s.slice(),t=El(e[16]);return e[19]=t,e}function Me(s){let e,t,l;return t=new ue({props:{text:s[0].instruction}}),{c(){e=k("p"),x(t.$$.fragment),this.h()},l(n){e=w(n,"P",{class:!0,dir:!0});var r=$(e);K(t.$$.fragment,r),r.forEach(v),this.h()},h(){_(e,"class","instruction svelte-2v1yn3"),_(e,"dir","rtl")},m(n,r){V(n,e,r),Y(t,e,null),l=!0},p(n,r){const i={};r&1&&(i.text=n[0].instruction),t.$set(i)},i(n){l||(q(t.$$.fragment,n),l=!0)},o(n){j(t.$$.fragment,n),l=!1},d(n){n&&v(e),Q(t)}}}function gl(s){let e,t=s[16]+"",l;return{c(){e=k("span"),l=F(t),this.h()},l(n){e=w(n,"SPAN",{class:!0});var r=$(e);l=M(r,t),r.forEach(v),this.h()},h(){_(e,"class","text-part svelte-2v1yn3")},m(n,r){V(n,e,r),h(e,l)},p(n,r){r&64&&t!==(t=n[16]+"")&&G(l,t)},d(n){n&&v(e)}}}function Fe(s){let e,t;function l(i,o){return i[19]>=0&&i[19]<i[1].length&&i[1][i[19]]!==null&&i[0].options[i[1][i[19]]]!==void 0?kl:wl}let n=l(s),r=n(s);return{c(){e=k("span"),r.c(),t=P(),this.h()},l(i){e=w(i,"SPAN",{class:!0});var o=$(e);r.l(o),t=D(o),o.forEach(v),this.h()},h(){_(e,"class","blank-wrapper svelte-2v1yn3")},m(i,o){V(i,e,o),r.m(e,null),h(e,t)},p(i,o){n===(n=l(i))&&r?r.p(i,o):(r.d(1),r=n(i),r&&(r.c(),r.m(e,t)))},d(i){i&&v(e),r.d()}}}function wl(s){let e,t="___";return{c(){e=k("span"),e.textContent=t,this.h()},l(l){e=w(l,"SPAN",{class:!0,"data-svelte-h":!0}),U(e)!=="svelte-1fxffx2"&&(e.textContent=t),this.h()},h(){_(e,"class","empty-blank svelte-2v1yn3")},m(l,n){V(l,e,n)},p:te,d(l){l&&v(e)}}}function kl(s){let e,t=s[0].options[s[1][s[19]]]+"",l;return{c(){e=k("span"),l=F(t),this.h()},l(n){e=w(n,"SPAN",{class:!0});var r=$(e);l=M(r,t),r.forEach(v),this.h()},h(){_(e,"class","filled-blank svelte-2v1yn3"),B(e,"correct",s[2]&&s[1][s[19]]===s[0].correctAnswers[s[19]]),B(e,"wrong",s[2]&&s[1][s[19]]!==s[0].correctAnswers[s[19]])},m(n,r){V(n,e,r),h(e,l)},p(n,r){r&67&&t!==(t=n[0].options[n[1][n[19]]]+"")&&G(l,t),r&71&&B(e,"correct",n[2]&&n[1][n[19]]===n[0].correctAnswers[n[19]]),r&71&&B(e,"wrong",n[2]&&n[1][n[19]]!==n[0].correctAnswers[n[19]])},d(n){n&&v(e)}}}function He(s){let e,t;function l(o,c){return c&64&&(e=null),e==null&&(e=!!o[16].match(/\{[0-9]+\}/)),e?Fe:gl}function n(o,c){return c===Fe?bl(o):o}let r=l(s,-1),i=r(n(s,r));return{c(){i.c(),t=de()},l(o){i.l(o),t=de()},m(o,c){i.m(o,c),V(o,t,c)},p(o,c){r===(r=l(o,c))&&i?i.p(n(o,r),c):(i.d(1),i=r(n(o,r)),i&&(i.c(),i.m(t.parentNode,t)))},d(o){o&&v(t),i.d(o)}}}function We(s){let e,t=s[13]+"",l,n,r,i,o;function c(){return s[11](s[15])}return{c(){e=k("button"),l=F(t),n=P(),this.h()},l(a){e=w(a,"BUTTON",{class:!0});var f=$(e);l=M(f,t),n=D(f),f.forEach(v),this.h()},h(){_(e,"class","option-btn svelte-2v1yn3"),e.disabled=r=s[2]||s[1].includes(s[15]),B(e,"selected",s[1].includes(s[15])),B(e,"disabled",s[2])},m(a,f){V(a,e,f),h(e,l),h(e,n),i||(o=ee(e,"click",c),i=!0)},p(a,f){s=a,f&1&&t!==(t=s[13]+"")&&G(l,t),f&6&&r!==(r=s[2]||s[1].includes(s[15]))&&(e.disabled=r),f&2&&B(e,"selected",s[1].includes(s[15])),f&4&&B(e,"disabled",s[2])},d(a){a&&v(e),i=!1,o()}}}function Ge(s){let e,t="ÿ®ÿ±ÿ±ÿ≥€å Ÿæÿßÿ≥ÿÆ",l,n;return{c(){e=k("button"),e.textContent=t,this.h()},l(r){e=w(r,"BUTTON",{class:!0,"data-svelte-h":!0}),U(e)!=="svelte-f8ny7i"&&(e.textContent=t),this.h()},h(){_(e,"class","check-btn svelte-2v1yn3")},m(r,i){V(r,e,i),l||(n=ee(e,"click",s[8]),l=!0)},p:te,d(r){r&&v(e),l=!1,n()}}}function Ze(s){let e,t='<p class="feedback-text success svelte-2v1yn3">ÿ¢ŸÅÿ±€åŸÜ! ÿµÿ≠€åÿ≠ ÿßÿ≥ÿ™</p>';return{c(){e=k("div"),e.innerHTML=t,this.h()},l(l){e=w(l,"DIV",{class:!0,"data-svelte-h":!0}),U(e)!=="svelte-1lv9kze"&&(e.innerHTML=t),this.h()},h(){_(e,"class","success-section svelte-2v1yn3")},m(l,n){V(l,e,n)},d(l){l&&v(e)}}}function Je(s){var u;let e,t,l="ÿØŸàÿ®ÿßÿ±Ÿá ÿßŸÖÿ™ÿ≠ÿßŸÜ ⁄©ŸÜ€åÿØ!",n,r,i,o="ÿ™ŸÑÿßÿ¥ ŸÖÿ¨ÿØÿØ",c,a,f=((u=s[0].feedback)==null?void 0:u.explanation)&&Xe(s);return{c(){e=k("div"),t=k("p"),t.textContent=l,n=P(),f&&f.c(),r=P(),i=k("button"),i.textContent=o,this.h()},l(p){e=w(p,"DIV",{class:!0});var d=$(e);t=w(d,"P",{class:!0,"data-svelte-h":!0}),U(t)!=="svelte-1rb22z5"&&(t.textContent=l),n=D(d),f&&f.l(d),r=D(d),i=w(d,"BUTTON",{class:!0,"data-svelte-h":!0}),U(i)!=="svelte-4wtsjk"&&(i.textContent=o),d.forEach(v),this.h()},h(){_(t,"class","feedback-text svelte-2v1yn3"),_(i,"class","retry-btn svelte-2v1yn3"),_(e,"class","retry-section svelte-2v1yn3")},m(p,d){V(p,e,d),h(e,t),h(e,n),f&&f.m(e,null),h(e,r),h(e,i),c||(a=ee(i,"click",s[9]),c=!0)},p(p,d){var b;(b=p[0].feedback)!=null&&b.explanation?f?f.p(p,d):(f=Xe(p),f.c(),f.m(e,r)):f&&(f.d(1),f=null)},d(p){p&&v(e),f&&f.d(),c=!1,a()}}}function Xe(s){let e,t=s[0].feedback.explanation+"",l;return{c(){e=k("p"),l=F(t),this.h()},l(n){e=w(n,"P",{class:!0});var r=$(e);l=M(r,t),r.forEach(v),this.h()},h(){_(e,"class","explanation svelte-2v1yn3")},m(n,r){V(n,e,r),h(e,l)},p(n,r){r&1&&t!==(t=n[0].feedback.explanation+"")&&G(l,t)},d(n){n&&v(e)}}}function Cl(s){let e,t,l,n,r,i,o=!s[2]&&s[1].every(Qe),c,a,f,u=s[0].instruction&&Me(s),p=le(s[6]),d=[];for(let g=0;g<p.length;g+=1)d[g]=He(Le(s,p,g));let b=le(s[0].options),S=[];for(let g=0;g<b.length;g+=1)S[g]=We(Re(s,b,g));let m=o&&Ge(s),C=s[2]&&s[3]&&Ze(),E=s[4]&&Je(s);return{c(){e=k("div"),u&&u.c(),t=P(),l=k("div");for(let g=0;g<d.length;g+=1)d[g].c();n=P(),r=k("div");for(let g=0;g<S.length;g+=1)S[g].c();i=P(),m&&m.c(),c=P(),C&&C.c(),a=P(),E&&E.c(),this.h()},l(g){e=w(g,"DIV",{class:!0});var A=$(e);u&&u.l(A),t=D(A),l=w(A,"DIV",{class:!0,dir:!0});var y=$(l);for(let z=0;z<d.length;z+=1)d[z].l(y);y.forEach(v),n=D(A),r=w(A,"DIV",{class:!0});var N=$(r);for(let z=0;z<S.length;z+=1)S[z].l(N);N.forEach(v),i=D(A),m&&m.l(A),c=D(A),C&&C.l(A),a=D(A),E&&E.l(A),A.forEach(v),this.h()},h(){_(l,"class","sentence-area svelte-2v1yn3"),_(l,"dir",s[5]),_(r,"class","options-grid svelte-2v1yn3"),_(e,"class","fill-blank-container svelte-2v1yn3")},m(g,A){V(g,e,A),u&&u.m(e,null),h(e,t),h(e,l);for(let y=0;y<d.length;y+=1)d[y]&&d[y].m(l,null);h(e,n),h(e,r);for(let y=0;y<S.length;y+=1)S[y]&&S[y].m(r,null);h(e,i),m&&m.m(e,null),h(e,c),C&&C.m(e,null),h(e,a),E&&E.m(e,null),f=!0},p(g,[A]){if(g[0].instruction?u?(u.p(g,A),A&1&&q(u,1)):(u=Me(g),u.c(),q(u,1),u.m(e,t)):u&&(ie(),j(u,1,1,()=>{u=null}),ae()),A&71){p=le(g[6]);let y;for(y=0;y<p.length;y+=1){const N=Le(g,p,y);d[y]?d[y].p(N,A):(d[y]=He(N),d[y].c(),d[y].m(l,null))}for(;y<d.length;y+=1)d[y].d(1);d.length=p.length}if((!f||A&32)&&_(l,"dir",g[5]),A&135){b=le(g[0].options);let y;for(y=0;y<b.length;y+=1){const N=Re(g,b,y);S[y]?S[y].p(N,A):(S[y]=We(N),S[y].c(),S[y].m(r,null))}for(;y<S.length;y+=1)S[y].d(1);S.length=b.length}A&6&&(o=!g[2]&&g[1].every(Qe)),o?m?m.p(g,A):(m=Ge(g),m.c(),m.m(e,c)):m&&(m.d(1),m=null),g[2]&&g[3]?C||(C=Ze(),C.c(),C.m(e,a)):C&&(C.d(1),C=null),g[4]?E?E.p(g,A):(E=Je(g),E.c(),E.m(e,null)):E&&(E.d(1),E=null)},i(g){f||(q(u),f=!0)},o(g){j(u),f=!1},d(g){g&&v(e),u&&u.d(),_e(d,g),_e(S,g),m&&m.d(),C&&C.d(),E&&E.d()}}}function El(s){const e=s.match(/\{([0-9]+)\}/);return e?parseInt(e[1]):-1}const Qe=s=>s!==null;function Al(s,e,t){let l,n,r,{step:i}=e;const o=be();let c=[],a=!1,f=!1,u=!1;function p(m,C){a||(t(1,c[m]=C,c),t(1,c=[...c]))}function d(){c.some(m=>m===null)||(t(2,a=!0),t(3,f=c.every((m,C)=>m===i.correctAnswers[C])),f||t(4,u=!0),o("answer",{correct:f,allowContinue:f}))}function b(){t(1,c=Array(n).fill(null)),t(2,a=!1),t(3,f=!1),t(4,u=!1)}const S=m=>{const C=c.findIndex(E=>E===null);C!==-1&&p(C,m)};return s.$$set=m=>{"step"in m&&t(0,i=m.step)},s.$$.update=()=>{var m;s.$$.dirty&1&&t(6,l=i.sentence.split(/(\{[0-9]+\})/g)),s.$$.dirty&1&&t(10,n=((m=i.correctAnswers)==null?void 0:m.length)||0),s.$$.dirty&1&&t(5,r=we(i.sentence)),s.$$.dirty&1026&&n>0&&c.length!==n&&t(1,c=Array(n).fill(null))},[i,c,a,f,u,r,l,p,d,b,n,S]}class yl extends oe{constructor(e){super(),ce(this,e,Al,Cl,ne,{step:0})}}function Ye(s,e,t){const l=s.slice();return l[14]=e[t],l[16]=t,l}function Ke(s,e,t){const l=s.slice();return l[17]=e[t],l[16]=t,l}function xe(s){let e,t,l;return t=new ue({props:{text:s[0].instruction}}),{c(){e=k("p"),x(t.$$.fragment),this.h()},l(n){e=w(n,"P",{class:!0,dir:!0});var r=$(e);K(t.$$.fragment,r),r.forEach(v),this.h()},h(){_(e,"class","instruction svelte-rkcbj9"),_(e,"dir","rtl")},m(n,r){V(n,e,r),Y(t,e,null),l=!0},p(n,r){const i={};r&1&&(i.text=n[0].instruction),t.$set(i)},i(n){l||(q(t.$$.fragment,n),l=!0)},o(n){j(t.$$.fragment,n),l=!1},d(n){n&&v(e),Q(t)}}}function Sl(s){let e,t=le(s[1]),l=[];for(let n=0;n<t.length;n+=1)l[n]=et(Ke(s,t,n));return{c(){for(let n=0;n<l.length;n+=1)l[n].c();e=de()},l(n){for(let r=0;r<l.length;r+=1)l[r].l(n);e=de()},m(n,r){for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(n,r);V(n,e,r)},p(n,r){if(r&135){t=le(n[1]);let i;for(i=0;i<t.length;i+=1){const o=Ke(n,t,i);l[i]?l[i].p(o,r):(l[i]=et(o),l[i].c(),l[i].m(e.parentNode,e))}for(;i<l.length;i+=1)l[i].d(1);l.length=t.length}},d(n){n&&v(e),_e(l,n)}}}function $l(s){let e,t="ÿ±Ÿà€å ⁄©ŸÑŸÖÿßÿ™ ÿ≤€åÿ± ÿ®ÿ≤ŸÜ€åÿØ ÿ™ÿß ÿ¨ŸÖŸÑŸá ÿ®ÿ≥ÿßÿ≤€åÿØ";return{c(){e=k("span"),e.textContent=t,this.h()},l(l){e=w(l,"SPAN",{class:!0,"data-svelte-h":!0}),U(e)!=="svelte-1wczgzy"&&(e.textContent=t),this.h()},h(){_(e,"class","placeholder svelte-rkcbj9")},m(l,n){V(l,e,n)},p:te,d(l){l&&v(e)}}}function et(s){let e,t=s[0].words[s[17]]+"",l,n,r,i;function o(){return s[10](s[16])}return{c(){e=k("button"),l=F(t),n=P(),this.h()},l(c){e=w(c,"BUTTON",{class:!0});var a=$(e);l=M(a,t),n=D(a),a.forEach(v),this.h()},h(){_(e,"class","word-chip selected svelte-rkcbj9"),e.disabled=s[2]},m(c,a){V(c,e,a),h(e,l),h(e,n),r||(i=ee(e,"click",o),r=!0)},p(c,a){s=c,a&3&&t!==(t=s[0].words[s[17]]+"")&&G(l,t),a&4&&(e.disabled=s[2])},d(c){c&&v(e),r=!1,i()}}}function tt(s){let e,t=s[14]+"",l,n,r,i,o;function c(){return s[11](s[16])}return{c(){e=k("button"),l=F(t),n=P(),this.h()},l(a){e=w(a,"BUTTON",{class:!0});var f=$(e);l=M(f,t),n=D(f),f.forEach(v),this.h()},h(){_(e,"class","word-chip svelte-rkcbj9"),e.disabled=r=s[2]||s[1].includes(s[16]),B(e,"used",s[1].includes(s[16]))},m(a,f){V(a,e,f),h(e,l),h(e,n),i||(o=ee(e,"click",c),i=!0)},p(a,f){s=a,f&1&&t!==(t=s[14]+"")&&G(l,t),f&6&&r!==(r=s[2]||s[1].includes(s[16]))&&(e.disabled=r),f&2&&B(e,"used",s[1].includes(s[16]))},d(a){a&&v(e),i=!1,o()}}}function lt(s){let e,t="ÿ®ÿ±ÿ±ÿ≥€å Ÿæÿßÿ≥ÿÆ",l,n;return{c(){e=k("button"),e.textContent=t,this.h()},l(r){e=w(r,"BUTTON",{class:!0,"data-svelte-h":!0}),U(e)!=="svelte-qzcymv"&&(e.textContent=t),this.h()},h(){_(e,"class","check-btn svelte-rkcbj9")},m(r,i){V(r,e,i),l||(n=ee(e,"click",s[8]),l=!0)},p:te,d(r){r&&v(e),l=!1,n()}}}function st(s){let e,t,l="ÿ¢ŸÅÿ±€åŸÜ! ÿµÿ≠€åÿ≠ ÿßÿ≥ÿ™",n,r,i=s[0].correctSentence.fa+"",o;return{c(){e=k("div"),t=k("p"),t.textContent=l,n=P(),r=k("p"),o=F(i),this.h()},l(c){e=w(c,"DIV",{class:!0});var a=$(e);t=w(a,"P",{class:!0,"data-svelte-h":!0}),U(t)!=="svelte-1t7w6jh"&&(t.textContent=l),n=D(a),r=w(a,"P",{class:!0});var f=$(r);o=M(f,i),f.forEach(v),a.forEach(v),this.h()},h(){_(t,"class","feedback-text success svelte-rkcbj9"),_(r,"class","translation svelte-rkcbj9"),_(e,"class","success-section svelte-rkcbj9")},m(c,a){V(c,e,a),h(e,t),h(e,n),h(e,r),h(r,o)},p(c,a){a&1&&i!==(i=c[0].correctSentence.fa+"")&&G(o,i)},d(c){c&&v(e)}}}function nt(s){var N;let e,t,l="Ÿæÿßÿ≥ÿÆ ÿµÿ≠€åÿ≠ ŸÜ€åÿ≥ÿ™!",n,r,i,o="Ÿæÿßÿ≥ÿÆ ÿµÿ≠€åÿ≠:",c,a=s[0].correctSentence.de+"",f,u,p,d=s[0].correctSentence.fa+"",b,S,m,C,E="ÿ™ŸÑÿßÿ¥ ŸÖÿ¨ÿØÿØ",g,A,y=((N=s[0].feedback)==null?void 0:N.explanation)&&rt(s);return{c(){e=k("div"),t=k("p"),t.textContent=l,n=P(),r=k("p"),i=k("strong"),i.textContent=o,c=P(),f=F(a),u=P(),p=k("p"),b=F(d),S=P(),y&&y.c(),m=P(),C=k("button"),C.textContent=E,this.h()},l(z){e=w(z,"DIV",{class:!0});var I=$(e);t=w(I,"P",{class:!0,"data-svelte-h":!0}),U(t)!=="svelte-u0lhzz"&&(t.textContent=l),n=D(I),r=w(I,"P",{class:!0});var O=$(r);i=w(O,"STRONG",{"data-svelte-h":!0}),U(i)!=="svelte-of5ovv"&&(i.textContent=o),c=D(O),f=M(O,a),O.forEach(v),u=D(I),p=w(I,"P",{class:!0});var R=$(p);b=M(R,d),R.forEach(v),S=D(I),y&&y.l(I),m=D(I),C=w(I,"BUTTON",{class:!0,"data-svelte-h":!0}),U(C)!=="svelte-4wtsjk"&&(C.textContent=E),I.forEach(v),this.h()},h(){_(t,"class","feedback-text svelte-rkcbj9"),_(r,"class","correct-answer svelte-rkcbj9"),_(p,"class","translation svelte-rkcbj9"),_(C,"class","retry-btn svelte-rkcbj9"),_(e,"class","retry-section svelte-rkcbj9")},m(z,I){V(z,e,I),h(e,t),h(e,n),h(e,r),h(r,i),h(r,c),h(r,f),h(e,u),h(e,p),h(p,b),h(e,S),y&&y.m(e,null),h(e,m),h(e,C),g||(A=ee(C,"click",s[9]),g=!0)},p(z,I){var O;I&1&&a!==(a=z[0].correctSentence.de+"")&&G(f,a),I&1&&d!==(d=z[0].correctSentence.fa+"")&&G(b,d),(O=z[0].feedback)!=null&&O.explanation?y?y.p(z,I):(y=rt(z),y.c(),y.m(e,m)):y&&(y.d(1),y=null)},d(z){z&&v(e),y&&y.d(),g=!1,A()}}}function rt(s){let e,t=s[0].feedback.explanation+"",l;return{c(){e=k("p"),l=F(t),this.h()},l(n){e=w(n,"P",{class:!0});var r=$(e);l=M(r,t),r.forEach(v),this.h()},h(){_(e,"class","explanation svelte-rkcbj9")},m(n,r){V(n,e,r),h(e,l)},p(n,r){r&1&&t!==(t=n[0].feedback.explanation+"")&&G(l,t)},d(n){n&&v(e)}}}function Il(s){let e,t,l,n,r,i,o,c,a,f=s[0].instruction&&xe(s);function u(g,A){return g[1].length===0?$l:Sl}let p=u(s),d=p(s),b=le(s[0].words),S=[];for(let g=0;g<b.length;g+=1)S[g]=tt(Ye(s,b,g));let m=!s[2]&&s[1].length===s[0].words.length&&lt(s),C=s[2]&&s[3]&&st(s),E=s[4]&&nt(s);return{c(){e=k("div"),f&&f.c(),t=P(),l=k("div"),d.c(),n=P(),r=k("div");for(let g=0;g<S.length;g+=1)S[g].c();i=P(),m&&m.c(),o=P(),C&&C.c(),c=P(),E&&E.c(),this.h()},l(g){e=w(g,"DIV",{class:!0});var A=$(e);f&&f.l(A),t=D(A),l=w(A,"DIV",{class:!0,dir:!0});var y=$(l);d.l(y),y.forEach(v),n=D(A),r=w(A,"DIV",{class:!0,dir:!0});var N=$(r);for(let z=0;z<S.length;z+=1)S[z].l(N);N.forEach(v),i=D(A),m&&m.l(A),o=D(A),C&&C.l(A),c=D(A),E&&E.l(A),A.forEach(v),this.h()},h(){_(l,"class","answer-area svelte-rkcbj9"),_(l,"dir",s[5]),B(l,"correct",s[2]&&s[3]),B(l,"wrong",s[2]&&!s[3]),_(r,"class","words-pool svelte-rkcbj9"),_(r,"dir",s[5]),_(e,"class","word-order-container svelte-rkcbj9")},m(g,A){V(g,e,A),f&&f.m(e,null),h(e,t),h(e,l),d.m(l,null),h(e,n),h(e,r);for(let y=0;y<S.length;y+=1)S[y]&&S[y].m(r,null);h(e,i),m&&m.m(e,null),h(e,o),C&&C.m(e,null),h(e,c),E&&E.m(e,null),a=!0},p(g,[A]){if(g[0].instruction?f?(f.p(g,A),A&1&&q(f,1)):(f=xe(g),f.c(),q(f,1),f.m(e,t)):f&&(ie(),j(f,1,1,()=>{f=null}),ae()),p===(p=u(g))&&d?d.p(g,A):(d.d(1),d=p(g),d&&(d.c(),d.m(l,null))),(!a||A&32)&&_(l,"dir",g[5]),(!a||A&12)&&B(l,"correct",g[2]&&g[3]),(!a||A&12)&&B(l,"wrong",g[2]&&!g[3]),A&71){b=le(g[0].words);let y;for(y=0;y<b.length;y+=1){const N=Ye(g,b,y);S[y]?S[y].p(N,A):(S[y]=tt(N),S[y].c(),S[y].m(r,null))}for(;y<S.length;y+=1)S[y].d(1);S.length=b.length}(!a||A&32)&&_(r,"dir",g[5]),!g[2]&&g[1].length===g[0].words.length?m?m.p(g,A):(m=lt(g),m.c(),m.m(e,o)):m&&(m.d(1),m=null),g[2]&&g[3]?C?C.p(g,A):(C=st(g),C.c(),C.m(e,c)):C&&(C.d(1),C=null),g[4]?E?E.p(g,A):(E=nt(g),E.c(),E.m(e,null)):E&&(E.d(1),E=null)},i(g){a||(q(f),a=!0)},o(g){j(f),a=!1},d(g){g&&v(e),f&&f.d(),d.d(),_e(S,g),m&&m.d(),C&&C.d(),E&&E.d()}}}function Dl(s,e,t){let l,{step:n}=e;const r=be();let i=[],o=!1,c=!1,a=!1;function f(m){o||t(1,i=[...i,m])}function u(m){o||t(1,i=i.filter((C,E)=>E!==m))}function p(){i.length===n.words.length&&(t(2,o=!0),t(3,c=i.every((m,C)=>m===n.correctOrder[C])),c||t(4,a=!0),r("answer",{correct:c,allowContinue:c}))}function d(){t(1,i=[]),t(2,o=!1),t(3,c=!1),t(4,a=!1)}const b=m=>u(m),S=m=>f(m);return s.$$set=m=>{"step"in m&&t(0,n=m.step)},s.$$.update=()=>{var m;s.$$.dirty&3&&n.words.map((C,E)=>E).filter(C=>!i.includes(C)),s.$$.dirty&1&&t(5,l=we(((m=n.correctSentence)==null?void 0:m.de)||n.words.join(" ")))},[n,i,o,c,a,l,f,u,p,d,b,S]}class Pl extends oe{constructor(e){super(),ce(this,e,Dl,Il,ne,{step:0})}}function it(s,e,t){const l=s.slice();return l[15]=e[t],l[17]=t,l}function at(s,e,t){const l=s.slice();return l[18]=e[t],l}function Tl(s){const e=s.slice(),t=zl(e[18]);return e[21]=t,e}function Vl(s){let e,t=s[18]+"",l;return{c(){e=k("span"),l=F(t),this.h()},l(n){e=w(n,"SPAN",{class:!0});var r=$(e);l=M(r,t),r.forEach(v),this.h()},h(){_(e,"class","text-part svelte-4sxu3h")},m(n,r){V(n,e,r),h(e,l)},p(n,r){r&64&&t!==(t=n[18]+"")&&G(l,t)},d(n){n&&v(e)}}}function ot(s){let e,t;function l(i,o){return i[21]>=0&&i[21]<i[1].length&&i[1][i[21]]!==null&&i[0].options[i[1][i[21]]]!==void 0?ql:Nl}let n=l(s),r=n(s);return{c(){e=k("span"),r.c(),t=P(),this.h()},l(i){e=w(i,"SPAN",{class:!0});var o=$(e);r.l(o),t=D(o),o.forEach(v),this.h()},h(){_(e,"class","blank-wrapper svelte-4sxu3h")},m(i,o){V(i,e,o),r.m(e,null),h(e,t)},p(i,o){n===(n=l(i))&&r?r.p(i,o):(r.d(1),r=n(i),r&&(r.c(),r.m(e,t)))},d(i){i&&v(e),r.d()}}}function Nl(s){let e,t="___";return{c(){e=k("span"),e.textContent=t,this.h()},l(l){e=w(l,"SPAN",{class:!0,"data-svelte-h":!0}),U(e)!=="svelte-1fxffx2"&&(e.textContent=t),this.h()},h(){_(e,"class","empty-blank svelte-4sxu3h")},m(l,n){V(l,e,n)},p:te,d(l){l&&v(e)}}}function ql(s){let e,t=s[0].options[s[1][s[21]]]+"",l,n,r;function i(){return s[12](s[21])}return{c(){e=k("button"),l=F(t),this.h()},l(o){e=w(o,"BUTTON",{class:!0});var c=$(e);l=M(c,t),c.forEach(v),this.h()},h(){_(e,"class","filled-blank svelte-4sxu3h"),e.disabled=s[2],B(e,"correct-word",s[2]&&s[1][s[21]]===s[0].correctAnswers[s[21]]),B(e,"wrong-word",s[2]&&s[1][s[21]]!==s[0].correctAnswers[s[21]])},m(o,c){V(o,e,c),h(e,l),n||(r=ee(e,"click",i),n=!0)},p(o,c){s=o,c&67&&t!==(t=s[0].options[s[1][s[21]]]+"")&&G(l,t),c&4&&(e.disabled=s[2]),c&71&&B(e,"correct-word",s[2]&&s[1][s[21]]===s[0].correctAnswers[s[21]]),c&71&&B(e,"wrong-word",s[2]&&s[1][s[21]]!==s[0].correctAnswers[s[21]])},d(o){o&&v(e),n=!1,r()}}}function ct(s){let e,t,l;function n(c,a){if(a&64&&(e=null),a&64&&(t=null),e==null&&(e=!!c[18].match(/\{[0-9]+\}/)),e)return ot;if(t==null&&(t=!!c[18].trim()),t)return Vl}function r(c,a){return a===ot?Tl(c):c}let i=n(s,-1),o=i&&i(r(s,i));return{c(){o&&o.c(),l=de()},l(c){o&&o.l(c),l=de()},m(c,a){o&&o.m(c,a),V(c,l,a)},p(c,a){i===(i=n(c,a))&&o?o.p(r(c,i),a):(o&&o.d(1),o=i&&i(r(c,i)),o&&(o.c(),o.m(l.parentNode,l)))},d(c){c&&v(l),o&&o.d(c)}}}function ft(s){let e,t=s[15]+"",l,n,r,i,o;function c(){return s[13](s[17])}return{c(){e=k("button"),l=F(t),n=P(),this.h()},l(a){e=w(a,"BUTTON",{class:!0});var f=$(e);l=M(f,t),n=D(f),f.forEach(v),this.h()},h(){_(e,"class","option-btn svelte-4sxu3h"),e.disabled=r=s[2]||s[1].includes(s[17]),B(e,"used",s[1].includes(s[17]))},m(a,f){V(a,e,f),h(e,l),h(e,n),i||(o=ee(e,"click",c),i=!0)},p(a,f){s=a,f&1&&t!==(t=s[15]+"")&&G(l,t),f&6&&r!==(r=s[2]||s[1].includes(s[17]))&&(e.disabled=r),f&2&&B(e,"used",s[1].includes(s[17]))},d(a){a&&v(e),i=!1,o()}}}function ut(s){let e,t="ÿ®ÿ±ÿ±ÿ≥€å Ÿæÿßÿ≥ÿÆ",l,n;return{c(){e=k("button"),e.textContent=t,this.h()},l(r){e=w(r,"BUTTON",{class:!0,"data-svelte-h":!0}),U(e)!=="svelte-f8ny7i"&&(e.textContent=t),this.h()},h(){_(e,"class","check-btn svelte-4sxu3h")},m(r,i){V(r,e,i),l||(n=ee(e,"click",s[9]),l=!0)},p:te,d(r){r&&v(e),l=!1,n()}}}function dt(s){let e,t,l="ÿ¢ŸÅÿ±€åŸÜ! ÿµÿ≠€åÿ≠ ÿßÿ≥ÿ™",n,r,i=s[0].correctTranslation.de+"",o;return{c(){e=k("div"),t=k("p"),t.textContent=l,n=P(),r=k("p"),o=F(i),this.h()},l(c){e=w(c,"DIV",{class:!0});var a=$(e);t=w(a,"P",{class:!0,"data-svelte-h":!0}),U(t)!=="svelte-1t7w6jh"&&(t.textContent=l),n=D(a),r=w(a,"P",{class:!0});var f=$(r);o=M(f,i),f.forEach(v),a.forEach(v),this.h()},h(){_(t,"class","feedback-text success svelte-4sxu3h"),_(r,"class","correct-translation svelte-4sxu3h"),_(e,"class","success-section svelte-4sxu3h")},m(c,a){V(c,e,a),h(e,t),h(e,n),h(e,r),h(r,o)},p(c,a){a&1&&i!==(i=c[0].correctTranslation.de+"")&&G(o,i)},d(c){c&&v(e)}}}function ht(s){var E;let e,t,l="Ÿæÿßÿ≥ÿÆ ÿµÿ≠€åÿ≠ ŸÜ€åÿ≥ÿ™!",n,r,i,o="Ÿæÿßÿ≥ÿÆ ÿµÿ≠€åÿ≠:",c,a=s[0].correctTranslation.de+"",f,u,p,d,b="ÿ™ŸÑÿßÿ¥ ŸÖÿ¨ÿØÿØ",S,m,C=((E=s[0].feedback)==null?void 0:E.explanation)&&pt(s);return{c(){e=k("div"),t=k("p"),t.textContent=l,n=P(),r=k("p"),i=k("strong"),i.textContent=o,c=P(),f=F(a),u=P(),C&&C.c(),p=P(),d=k("button"),d.textContent=b,this.h()},l(g){e=w(g,"DIV",{class:!0});var A=$(e);t=w(A,"P",{class:!0,"data-svelte-h":!0}),U(t)!=="svelte-u0lhzz"&&(t.textContent=l),n=D(A),r=w(A,"P",{class:!0});var y=$(r);i=w(y,"STRONG",{"data-svelte-h":!0}),U(i)!=="svelte-of5ovv"&&(i.textContent=o),c=D(y),f=M(y,a),y.forEach(v),u=D(A),C&&C.l(A),p=D(A),d=w(A,"BUTTON",{class:!0,"data-svelte-h":!0}),U(d)!=="svelte-4wtsjk"&&(d.textContent=b),A.forEach(v),this.h()},h(){_(t,"class","feedback-text svelte-4sxu3h"),_(r,"class","correct-answer svelte-4sxu3h"),_(d,"class","retry-btn svelte-4sxu3h"),_(e,"class","retry-section svelte-4sxu3h")},m(g,A){V(g,e,A),h(e,t),h(e,n),h(e,r),h(r,i),h(r,c),h(r,f),h(e,u),C&&C.m(e,null),h(e,p),h(e,d),S||(m=ee(d,"click",s[10]),S=!0)},p(g,A){var y;A&1&&a!==(a=g[0].correctTranslation.de+"")&&G(f,a),(y=g[0].feedback)!=null&&y.explanation?C?C.p(g,A):(C=pt(g),C.c(),C.m(e,p)):C&&(C.d(1),C=null)},d(g){g&&v(e),C&&C.d(),S=!1,m()}}}function pt(s){let e,t=s[0].feedback.explanation+"",l;return{c(){e=k("p"),l=F(t),this.h()},l(n){e=w(n,"P",{class:!0});var r=$(e);l=M(r,t),r.forEach(v),this.h()},h(){_(e,"class","explanation svelte-4sxu3h")},m(n,r){V(n,e,r),h(e,l)},p(n,r){r&1&&t!==(t=n[0].feedback.explanation+"")&&G(l,t)},d(n){n&&v(e)}}}function Ol(s){let e,t,l,n="Translate:",r,i,o,c,a,f,u,p,d=!s[2]&&s[1].every(_t),b,S,m;o=new ue({props:{text:s[0].sourceText}});let C=le(s[6]),E=[];for(let I=0;I<C.length;I+=1)E[I]=ct(at(s,C,I));let g=le(s[0].options),A=[];for(let I=0;I<g.length;I+=1)A[I]=ft(it(s,g,I));let y=d&&ut(s),N=s[2]&&s[3]&&dt(s),z=s[4]&&ht(s);return{c(){e=k("div"),t=k("div"),l=k("span"),l.textContent=n,r=P(),i=k("p"),x(o.$$.fragment),c=P(),a=k("div");for(let I=0;I<E.length;I+=1)E[I].c();f=P(),u=k("div");for(let I=0;I<A.length;I+=1)A[I].c();p=P(),y&&y.c(),b=P(),N&&N.c(),S=P(),z&&z.c(),this.h()},l(I){e=w(I,"DIV",{class:!0});var O=$(e);t=w(O,"DIV",{class:!0});var R=$(t);l=w(R,"SPAN",{class:!0,"data-svelte-h":!0}),U(l)!=="svelte-qiqqpr"&&(l.textContent=n),r=D(R),i=w(R,"P",{class:!0,dir:!0});var T=$(i);K(o.$$.fragment,T),T.forEach(v),R.forEach(v),c=D(O),a=w(O,"DIV",{class:!0,dir:!0});var L=$(a);for(let W=0;W<E.length;W+=1)E[W].l(L);L.forEach(v),f=D(O),u=w(O,"DIV",{class:!0});var J=$(u);for(let W=0;W<A.length;W+=1)A[W].l(J);J.forEach(v),p=D(O),y&&y.l(O),b=D(O),N&&N.l(O),S=D(O),z&&z.l(O),O.forEach(v),this.h()},h(){_(l,"class","label svelte-4sxu3h"),_(i,"class","text svelte-4sxu3h"),_(i,"dir","rtl"),_(t,"class","source-text svelte-4sxu3h"),_(a,"class","answer-area svelte-4sxu3h"),_(a,"dir",s[5]),B(a,"correct",s[2]&&s[3]),B(a,"wrong",s[2]&&!s[3]),_(u,"class","options-grid svelte-4sxu3h"),_(e,"class","translation-container svelte-4sxu3h")},m(I,O){V(I,e,O),h(e,t),h(t,l),h(t,r),h(t,i),Y(o,i,null),h(e,c),h(e,a);for(let R=0;R<E.length;R+=1)E[R]&&E[R].m(a,null);h(e,f),h(e,u);for(let R=0;R<A.length;R+=1)A[R]&&A[R].m(u,null);h(e,p),y&&y.m(e,null),h(e,b),N&&N.m(e,null),h(e,S),z&&z.m(e,null),m=!0},p(I,[O]){const R={};if(O&1&&(R.text=I[0].sourceText),o.$set(R),O&327){C=le(I[6]);let T;for(T=0;T<C.length;T+=1){const L=at(I,C,T);E[T]?E[T].p(L,O):(E[T]=ct(L),E[T].c(),E[T].m(a,null))}for(;T<E.length;T+=1)E[T].d(1);E.length=C.length}if((!m||O&32)&&_(a,"dir",I[5]),(!m||O&12)&&B(a,"correct",I[2]&&I[3]),(!m||O&12)&&B(a,"wrong",I[2]&&!I[3]),O&135){g=le(I[0].options);let T;for(T=0;T<g.length;T+=1){const L=it(I,g,T);A[T]?A[T].p(L,O):(A[T]=ft(L),A[T].c(),A[T].m(u,null))}for(;T<A.length;T+=1)A[T].d(1);A.length=g.length}O&6&&(d=!I[2]&&I[1].every(_t)),d?y?y.p(I,O):(y=ut(I),y.c(),y.m(e,b)):y&&(y.d(1),y=null),I[2]&&I[3]?N?N.p(I,O):(N=dt(I),N.c(),N.m(e,S)):N&&(N.d(1),N=null),I[4]?z?z.p(I,O):(z=ht(I),z.c(),z.m(e,null)):z&&(z.d(1),z=null)},i(I){m||(q(o.$$.fragment,I),m=!0)},o(I){j(o.$$.fragment,I),m=!1},d(I){I&&v(e),Q(o),_e(E,I),_e(A,I),y&&y.d(),N&&N.d(),z&&z.d()}}}function zl(s){const e=s.match(/\{([0-9]+)\}/);return e?parseInt(e[1]):-1}const _t=s=>s!==null;function Bl(s,e,t){let l,n,r,{step:i}=e;const o=be();let c=[],a=!1,f=!1,u=!1;function p(E){if(a)return;const g=c.findIndex(A=>A===null);g!==-1&&(t(1,c[g]=E,c),t(1,c=[...c]))}function d(E){a||(t(1,c[E]=null,c),t(1,c=[...c]))}function b(){c.some(E=>E===null)||(t(2,a=!0),t(3,f=c.every((E,g)=>E===i.correctAnswers[g])),f||t(4,u=!0),o("answer",{correct:f,allowContinue:f}))}function S(){t(1,c=Array(n).fill(null)),t(2,a=!1),t(3,f=!1),t(4,u=!1)}const m=E=>d(E),C=E=>p(E);return s.$$set=E=>{"step"in E&&t(0,i=E.step)},s.$$.update=()=>{var E,g,A;s.$$.dirty&1&&t(6,l=i.sentenceTemplate.split(/(\{[0-9]+\})/g)),s.$$.dirty&1&&t(11,n=((E=i.correctAnswers)==null?void 0:E.length)||((g=i.options)==null?void 0:g.length)||0),s.$$.dirty&1&&t(5,r=we(((A=i.options)==null?void 0:A.join(" "))||i.sentenceTemplate)),s.$$.dirty&2050&&n>0&&c.length!==n&&t(1,c=Array(n).fill(null))},[i,c,a,f,u,r,l,p,d,b,S,n,m,C]}class jl extends oe{constructor(e){super(),ce(this,e,Bl,Ol,ne,{step:0})}}function vt(s){let e,t,l;return t=new ue({props:{text:s[0].instruction}}),{c(){e=k("p"),x(t.$$.fragment),this.h()},l(n){e=w(n,"P",{class:!0,dir:!0});var r=$(e);K(t.$$.fragment,r),r.forEach(v),this.h()},h(){_(e,"class","instruction svelte-34qdam"),_(e,"dir","rtl")},m(n,r){V(n,e,r),Y(t,e,null),l=!0},p(n,r){const i={};r&1&&(i.text=n[0].instruction),t.$set(i)},i(n){l||(q(t.$$.fragment,n),l=!0)},o(n){j(t.$$.fragment,n),l=!1},d(n){n&&v(e),Q(t)}}}function mt(s){let e,t,l;return t=new ue({props:{text:s[0].statementExplanation}}),{c(){e=k("p"),x(t.$$.fragment),this.h()},l(n){e=w(n,"P",{class:!0,dir:!0});var r=$(e);K(t.$$.fragment,r),r.forEach(v),this.h()},h(){_(e,"class","statement-explanation svelte-34qdam"),_(e,"dir","rtl")},m(n,r){V(n,e,r),Y(t,e,null),l=!0},p(n,r){const i={};r&1&&(i.text=n[0].statementExplanation),t.$set(i)},i(n){l||(q(t.$$.fragment,n),l=!0)},o(n){j(t.$$.fragment,n),l=!1},d(n){n&&v(e),Q(t)}}}function bt(s){var i;let e,t,l="ÿ¢ŸÅÿ±€åŸÜ! ÿµÿ≠€åÿ≠ ÿßÿ≥ÿ™",n,r=((i=s[0].feedback)==null?void 0:i.explanation)&&gt(s);return{c(){e=k("div"),t=k("p"),t.textContent=l,n=P(),r&&r.c(),this.h()},l(o){e=w(o,"DIV",{class:!0});var c=$(e);t=w(c,"P",{class:!0,"data-svelte-h":!0}),U(t)!=="svelte-1t7w6jh"&&(t.textContent=l),n=D(c),r&&r.l(c),c.forEach(v),this.h()},h(){_(t,"class","feedback-text success svelte-34qdam"),_(e,"class","success-section svelte-34qdam")},m(o,c){V(o,e,c),h(e,t),h(e,n),r&&r.m(e,null)},p(o,c){var a;(a=o[0].feedback)!=null&&a.explanation?r?r.p(o,c):(r=gt(o),r.c(),r.m(e,null)):r&&(r.d(1),r=null)},d(o){o&&v(e),r&&r.d()}}}function gt(s){let e,t=s[0].feedback.explanation+"",l;return{c(){e=k("p"),l=F(t),this.h()},l(n){e=w(n,"P",{class:!0});var r=$(e);l=M(r,t),r.forEach(v),this.h()},h(){_(e,"class","explanation svelte-34qdam")},m(n,r){V(n,e,r),h(e,l)},p(n,r){r&1&&t!==(t=n[0].feedback.explanation+"")&&G(l,t)},d(n){n&&v(e)}}}function wt(s){var C;let e,t,l="Ÿæÿßÿ≥ÿÆ ÿµÿ≠€åÿ≠ ŸÜ€åÿ≥ÿ™!",n,r,i,o,c=s[0].correctAnswer?"ÿØÿ±ÿ≥ÿ™":"ŸÜÿßÿØÿ±ÿ≥ÿ™",a,f,u,p,d="ÿ™ŸÑÿßÿ¥ ŸÖÿ¨ÿØÿØ",b,S,m=((C=s[0].feedback)==null?void 0:C.explanation)&&kt(s);return{c(){e=k("div"),t=k("p"),t.textContent=l,n=P(),r=k("p"),i=F("Ÿæÿßÿ≥ÿÆ ÿµÿ≠€åÿ≠: "),o=k("strong"),a=F(c),f=P(),m&&m.c(),u=P(),p=k("button"),p.textContent=d,this.h()},l(E){e=w(E,"DIV",{class:!0});var g=$(e);t=w(g,"P",{class:!0,"data-svelte-h":!0}),U(t)!=="svelte-u0lhzz"&&(t.textContent=l),n=D(g),r=w(g,"P",{class:!0});var A=$(r);i=M(A,"Ÿæÿßÿ≥ÿÆ ÿµÿ≠€åÿ≠: "),o=w(A,"STRONG",{});var y=$(o);a=M(y,c),y.forEach(v),A.forEach(v),f=D(g),m&&m.l(g),u=D(g),p=w(g,"BUTTON",{class:!0,"data-svelte-h":!0}),U(p)!=="svelte-4wtsjk"&&(p.textContent=d),g.forEach(v),this.h()},h(){_(t,"class","feedback-text svelte-34qdam"),_(r,"class","correct-answer svelte-34qdam"),_(p,"class","retry-btn svelte-34qdam"),_(e,"class","retry-section svelte-34qdam")},m(E,g){V(E,e,g),h(e,t),h(e,n),h(e,r),h(r,i),h(r,o),h(o,a),h(e,f),m&&m.m(e,null),h(e,u),h(e,p),b||(S=ee(p,"click",s[6]),b=!0)},p(E,g){var A;g&1&&c!==(c=E[0].correctAnswer?"ÿØÿ±ÿ≥ÿ™":"ŸÜÿßÿØÿ±ÿ≥ÿ™")&&G(a,c),(A=E[0].feedback)!=null&&A.explanation?m?m.p(E,g):(m=kt(E),m.c(),m.m(e,u)):m&&(m.d(1),m=null)},d(E){E&&v(e),m&&m.d(),b=!1,S()}}}function kt(s){let e,t=s[0].feedback.explanation+"",l;return{c(){e=k("p"),l=F(t),this.h()},l(n){e=w(n,"P",{class:!0});var r=$(e);l=M(r,t),r.forEach(v),this.h()},h(){_(e,"class","explanation svelte-34qdam")},m(n,r){V(n,e,r),h(e,l)},p(n,r){r&1&&t!==(t=n[0].feedback.explanation+"")&&G(l,t)},d(n){n&&v(e)}}}function Ul(s){let e,t,l,n,r,i,o,c,a,f,u="‚úì",p,d,b="ÿØÿ±ÿ≥ÿ™",S,m,C,E="‚úó",g,A,y="ŸÜÿßÿØÿ±ÿ≥ÿ™",N,z,I,O,R,T=s[0].instruction&&vt(s);r=new ue({props:{text:s[0].statement}});let L=s[0].statementExplanation&&mt(s),J=s[2]&&s[3]&&bt(s),W=s[4]&&wt(s);return{c(){e=k("div"),T&&T.c(),t=P(),l=k("div"),n=k("p"),x(r.$$.fragment),i=P(),L&&L.c(),o=P(),c=k("div"),a=k("button"),f=k("span"),f.textContent=u,p=P(),d=k("span"),d.textContent=b,S=P(),m=k("button"),C=k("span"),C.textContent=E,g=P(),A=k("span"),A.textContent=y,N=P(),J&&J.c(),z=P(),W&&W.c(),this.h()},l(H){e=w(H,"DIV",{class:!0});var Z=$(e);T&&T.l(Z),t=D(Z),l=w(Z,"DIV",{class:!0});var fe=$(l);n=w(fe,"P",{class:!0});var re=$(n);K(r.$$.fragment,re),re.forEach(v),i=D(fe),L&&L.l(fe),fe.forEach(v),o=D(Z),c=w(Z,"DIV",{class:!0});var se=$(c);a=w(se,"BUTTON",{class:!0});var pe=$(a);f=w(pe,"SPAN",{class:!0,"data-svelte-h":!0}),U(f)!=="svelte-1vfoggv"&&(f.textContent=u),p=D(pe),d=w(pe,"SPAN",{class:!0,"data-svelte-h":!0}),U(d)!=="svelte-pzu18y"&&(d.textContent=b),pe.forEach(v),S=D(se),m=w(se,"BUTTON",{class:!0});var he=$(m);C=w(he,"SPAN",{class:!0,"data-svelte-h":!0}),U(C)!=="svelte-a07mez"&&(C.textContent=E),g=D(he),A=w(he,"SPAN",{class:!0,"data-svelte-h":!0}),U(A)!=="svelte-13bcqf1"&&(A.textContent=y),he.forEach(v),se.forEach(v),N=D(Z),J&&J.l(Z),z=D(Z),W&&W.l(Z),Z.forEach(v),this.h()},h(){_(n,"class","statement svelte-34qdam"),_(l,"class","statement-card svelte-34qdam"),_(f,"class","icon svelte-34qdam"),_(d,"class","label svelte-34qdam"),_(a,"class","option-btn true-btn svelte-34qdam"),a.disabled=s[2],B(a,"selected",s[1]===!0),B(a,"correct",s[2]&&s[0].correctAnswer===!0),B(a,"wrong",s[2]&&s[1]===!0&&!s[3]),_(C,"class","icon svelte-34qdam"),_(A,"class","label svelte-34qdam"),_(m,"class","option-btn false-btn svelte-34qdam"),m.disabled=s[2],B(m,"selected",s[1]===!1),B(m,"correct",s[2]&&s[0].correctAnswer===!1),B(m,"wrong",s[2]&&s[1]===!1&&!s[3]),_(c,"class","options-row svelte-34qdam"),_(e,"class","true-false-container svelte-34qdam")},m(H,Z){V(H,e,Z),T&&T.m(e,null),h(e,t),h(e,l),h(l,n),Y(r,n,null),h(l,i),L&&L.m(l,null),h(e,o),h(e,c),h(c,a),h(a,f),h(a,p),h(a,d),h(c,S),h(c,m),h(m,C),h(m,g),h(m,A),h(e,N),J&&J.m(e,null),h(e,z),W&&W.m(e,null),I=!0,O||(R=[ee(a,"click",s[7]),ee(m,"click",s[8])],O=!0)},p(H,[Z]){H[0].instruction?T?(T.p(H,Z),Z&1&&q(T,1)):(T=vt(H),T.c(),q(T,1),T.m(e,t)):T&&(ie(),j(T,1,1,()=>{T=null}),ae());const fe={};Z&1&&(fe.text=H[0].statement),r.$set(fe),H[0].statementExplanation?L?(L.p(H,Z),Z&1&&q(L,1)):(L=mt(H),L.c(),q(L,1),L.m(l,null)):L&&(ie(),j(L,1,1,()=>{L=null}),ae()),(!I||Z&4)&&(a.disabled=H[2]),(!I||Z&2)&&B(a,"selected",H[1]===!0),(!I||Z&5)&&B(a,"correct",H[2]&&H[0].correctAnswer===!0),(!I||Z&14)&&B(a,"wrong",H[2]&&H[1]===!0&&!H[3]),(!I||Z&4)&&(m.disabled=H[2]),(!I||Z&2)&&B(m,"selected",H[1]===!1),(!I||Z&5)&&B(m,"correct",H[2]&&H[0].correctAnswer===!1),(!I||Z&14)&&B(m,"wrong",H[2]&&H[1]===!1&&!H[3]),H[2]&&H[3]?J?J.p(H,Z):(J=bt(H),J.c(),J.m(e,z)):J&&(J.d(1),J=null),H[4]?W?W.p(H,Z):(W=wt(H),W.c(),W.m(e,null)):W&&(W.d(1),W=null)},i(H){I||(q(T),q(r.$$.fragment,H),q(L),I=!0)},o(H){j(T),j(r.$$.fragment,H),j(L),I=!1},d(H){H&&v(e),T&&T.d(),Q(r),L&&L.d(),J&&J.d(),W&&W.d(),O=!1,Dt(R)}}}function Rl(s,e,t){let{step:l}=e;const n=be();let r=null,i=!1,o=!1,c=!1;function a(d){i||(t(1,r=d),t(2,i=!0),t(3,o=d===l.correctAnswer),o||t(4,c=!0),n("answer",{correct:o,allowContinue:o}))}function f(){t(1,r=null),t(2,i=!1),t(3,o=!1),t(4,c=!1)}const u=()=>a(!0),p=()=>a(!1);return s.$$set=d=>{"step"in d&&t(0,l=d.step)},[l,r,i,o,c,a,f,u,p]}class Ll extends oe{constructor(e){super(),ce(this,e,Rl,Ul,ne,{step:0})}}function Ml(s){let e,t,l,n=s[0].type+"",r,i,o,c=JSON.stringify(s[0],null,2)+"",a;return{c(){e=k("div"),t=k("p"),l=F("Unknown step type: "),r=F(n),i=P(),o=k("pre"),a=F(c),this.h()},l(f){e=w(f,"DIV",{class:!0});var u=$(e);t=w(u,"P",{});var p=$(t);l=M(p,"Unknown step type: "),r=M(p,n),p.forEach(v),i=D(u),o=w(u,"PRE",{class:!0});var d=$(o);a=M(d,c),d.forEach(v),u.forEach(v),this.h()},h(){_(o,"class","svelte-1btz153"),_(e,"class","unknown-step svelte-1btz153")},m(f,u){V(f,e,u),h(e,t),h(t,l),h(t,r),h(e,i),h(e,o),h(o,a)},p(f,u){u&1&&n!==(n=f[0].type+"")&&G(r,n),u&1&&c!==(c=JSON.stringify(f[0],null,2)+"")&&G(a,c)},i:te,o:te,d(f){f&&v(e)}}}function Fl(s){let e,t;return e=new Ll({props:{step:s[0]}}),e.$on("answer",s[5]),{c(){x(e.$$.fragment)},l(l){K(e.$$.fragment,l)},m(l,n){Y(e,l,n),t=!0},p(l,n){const r={};n&1&&(r.step=l[0]),e.$set(r)},i(l){t||(q(e.$$.fragment,l),t=!0)},o(l){j(e.$$.fragment,l),t=!1},d(l){Q(e,l)}}}function Hl(s){let e,t;return e=new jl({props:{step:s[0]}}),e.$on("answer",s[4]),{c(){x(e.$$.fragment)},l(l){K(e.$$.fragment,l)},m(l,n){Y(e,l,n),t=!0},p(l,n){const r={};n&1&&(r.step=l[0]),e.$set(r)},i(l){t||(q(e.$$.fragment,l),t=!0)},o(l){j(e.$$.fragment,l),t=!1},d(l){Q(e,l)}}}function Wl(s){let e,t;return e=new Pl({props:{step:s[0]}}),e.$on("answer",s[3]),{c(){x(e.$$.fragment)},l(l){K(e.$$.fragment,l)},m(l,n){Y(e,l,n),t=!0},p(l,n){const r={};n&1&&(r.step=l[0]),e.$set(r)},i(l){t||(q(e.$$.fragment,l),t=!0)},o(l){j(e.$$.fragment,l),t=!1},d(l){Q(e,l)}}}function Gl(s){let e,t;return e=new yl({props:{step:s[0]}}),e.$on("answer",s[2]),{c(){x(e.$$.fragment)},l(l){K(e.$$.fragment,l)},m(l,n){Y(e,l,n),t=!0},p(l,n){const r={};n&1&&(r.step=l[0]),e.$set(r)},i(l){t||(q(e.$$.fragment,l),t=!0)},o(l){j(e.$$.fragment,l),t=!1},d(l){Q(e,l)}}}function Zl(s){let e,t;return e=new Gt({props:{step:s[0]}}),{c(){x(e.$$.fragment)},l(l){K(e.$$.fragment,l)},m(l,n){Y(e,l,n),t=!0},p(l,n){const r={};n&1&&(r.step=l[0]),e.$set(r)},i(l){t||(q(e.$$.fragment,l),t=!0)},o(l){j(e.$$.fragment,l),t=!1},d(l){Q(e,l)}}}function Jl(s){let e,t;return e=new al({props:{step:s[0]}}),{c(){x(e.$$.fragment)},l(l){K(e.$$.fragment,l)},m(l,n){Y(e,l,n),t=!0},p(l,n){const r={};n&1&&(r.step=l[0]),e.$set(r)},i(l){t||(q(e.$$.fragment,l),t=!0)},o(l){j(e.$$.fragment,l),t=!1},d(l){Q(e,l)}}}function Xl(s){let e,t;return e=new ml({props:{step:s[0]}}),{c(){x(e.$$.fragment)},l(l){K(e.$$.fragment,l)},m(l,n){Y(e,l,n),t=!0},p(l,n){const r={};n&1&&(r.step=l[0]),e.$set(r)},i(l){t||(q(e.$$.fragment,l),t=!0)},o(l){j(e.$$.fragment,l),t=!1},d(l){Q(e,l)}}}function Ql(s){let e,t;return e=new dl({props:{step:s[0]}}),e.$on("answer",s[1]),{c(){x(e.$$.fragment)},l(l){K(e.$$.fragment,l)},m(l,n){Y(e,l,n),t=!0},p(l,n){const r={};n&1&&(r.step=l[0]),e.$set(r)},i(l){t||(q(e.$$.fragment,l),t=!0)},o(l){j(e.$$.fragment,l),t=!1},d(l){Q(e,l)}}}function Yl(s){let e,t,l,n;const r=[Ql,Xl,Jl,Zl,Gl,Wl,Hl,Fl,Ml],i=[];function o(c,a){return c[0].type==="word-quiz"||c[0].type==="multiple-choice"?0:c[0].type==="new-word"?1:c[0].type==="grammar-tip"?2:c[0].type==="dialog"?3:c[0].type==="fill-in-blank"?4:c[0].type==="word-order"?5:c[0].type==="translation"?6:c[0].type==="true-false"?7:8}return t=o(s),l=i[t]=r[t](s),{c(){e=k("div"),l.c(),this.h()},l(c){e=w(c,"DIV",{class:!0});var a=$(e);l.l(a),a.forEach(v),this.h()},h(){_(e,"class","step-wrapper svelte-1btz153")},m(c,a){V(c,e,a),i[t].m(e,null),n=!0},p(c,[a]){let f=t;t=o(c),t===f?i[t].p(c,a):(ie(),j(i[f],1,1,()=>{i[f]=null}),ae(),l=i[t],l?l.p(c,a):(l=i[t]=r[t](c),l.c()),q(l,1),l.m(e,null))},i(c){n||(q(l),n=!0)},o(c){j(l),n=!1},d(c){c&&v(e),i[t].d()}}}function Kl(s,e,t){let{step:l}=e;function n(a){ge.call(this,s,a)}function r(a){ge.call(this,s,a)}function i(a){ge.call(this,s,a)}function o(a){ge.call(this,s,a)}function c(a){ge.call(this,s,a)}return s.$$set=a=>{"step"in a&&t(0,l=a.step)},[l,n,r,i,o,c]}class xl extends oe{constructor(e){super(),ce(this,e,Kl,Yl,ne,{step:0})}}function Ct(s,e,t){const l=s.slice();return l[13]=e[t],l}function Et(s){let e,t,l=s[2].question+"",n,r,i,o,c=le(s[4]),a=[];for(let u=0;u<c.length;u+=1)a[u]=At(Ct(s,c,u));let f=s[3]&&s[3]!==s[2].correctAnswer&&yt(s);return{c(){e=k("div"),t=k("h3"),n=F(l),r=P(),i=k("div");for(let u=0;u<a.length;u+=1)a[u].c();o=P(),f&&f.c(),this.h()},l(u){e=w(u,"DIV",{class:!0});var p=$(e);t=w(p,"H3",{class:!0});var d=$(t);n=M(d,l),d.forEach(v),r=D(p),i=w(p,"DIV",{class:!0});var b=$(i);for(let S=0;S<a.length;S+=1)a[S].l(b);b.forEach(v),o=D(p),f&&f.l(p),p.forEach(v),this.h()},h(){_(t,"class","question svelte-yx7uo6"),_(i,"class","options-grid svelte-yx7uo6"),_(e,"class","review-question-card svelte-yx7uo6")},m(u,p){V(u,e,p),h(e,t),h(t,n),h(e,r),h(e,i);for(let d=0;d<a.length;d+=1)a[d]&&a[d].m(i,null);h(e,o),f&&f.m(e,null)},p(u,p){if(p&4&&l!==(l=u[2].question+"")&&G(n,l),p&92){c=le(u[4]);let d;for(d=0;d<c.length;d+=1){const b=Ct(u,c,d);a[d]?a[d].p(b,p):(a[d]=At(b),a[d].c(),a[d].m(i,null))}for(;d<a.length;d+=1)a[d].d(1);a.length=c.length}u[3]&&u[3]!==u[2].correctAnswer?f?f.p(u,p):(f=yt(u),f.c(),f.m(e,null)):f&&(f.d(1),f=null)},d(u){u&&v(e),_e(a,u),f&&f.d()}}}function es(s){let e,t="‚ùå";return{c(){e=k("span"),e.textContent=t,this.h()},l(l){e=w(l,"SPAN",{class:!0,"data-svelte-h":!0}),U(e)!=="svelte-1y31312"&&(e.textContent=t),this.h()},h(){_(e,"class","icon svelte-yx7uo6")},m(l,n){V(l,e,n)},d(l){l&&v(e)}}}function ts(s){let e,t="‚úÖ";return{c(){e=k("span"),e.textContent=t,this.h()},l(l){e=w(l,"SPAN",{class:!0,"data-svelte-h":!0}),U(e)!=="svelte-7p7kw9"&&(e.textContent=t),this.h()},h(){_(e,"class","icon svelte-yx7uo6")},m(l,n){V(l,e,n)},d(l){l&&v(e)}}}function At(s){let e,t=s[13]+"",l,n,r,i,o,c;function a(d,b){if(d[3]&&d[13]===d[2].correctAnswer)return ts;if(d[3]===d[13]&&d[13]!==d[2].correctAnswer)return es}let f=a(s),u=f&&f(s);function p(){return s[10](s[13])}return{c(){e=k("button"),l=F(t),n=P(),u&&u.c(),r=P(),this.h()},l(d){e=w(d,"BUTTON",{class:!0});var b=$(e);l=M(b,t),n=D(b),u&&u.l(b),r=D(b),b.forEach(v),this.h()},h(){_(e,"class","option-btn svelte-yx7uo6"),e.disabled=i=!!s[3],B(e,"selected",s[3]===s[13]),B(e,"correct",s[3]&&s[13]===s[2].correctAnswer),B(e,"wrong",s[3]===s[13]&&s[13]!==s[2].correctAnswer)},m(d,b){V(d,e,b),h(e,l),h(e,n),u&&u.m(e,null),h(e,r),o||(c=ee(e,"click",p),o=!0)},p(d,b){s=d,b&16&&t!==(t=s[13]+"")&&G(l,t),f!==(f=a(s))&&(u&&u.d(1),u=f&&f(s),u&&(u.c(),u.m(e,r))),b&8&&i!==(i=!!s[3])&&(e.disabled=i),b&24&&B(e,"selected",s[3]===s[13]),b&28&&B(e,"correct",s[3]&&s[13]===s[2].correctAnswer),b&28&&B(e,"wrong",s[3]===s[13]&&s[13]!==s[2].correctAnswer)},d(d){d&&v(e),u&&u.d(),o=!1,c()}}}function yt(s){let e,t,l="ÿØŸàÿ®ÿßÿ±Ÿá ÿßŸÖÿ™ÿ≠ÿßŸÜ ⁄©ŸÜ€åÿØ!",n,r,i="üîÑ ÿ™ŸÑÿßÿ¥ ŸÖÿ¨ÿØÿØ",o,c;return{c(){e=k("div"),t=k("p"),t.textContent=l,n=P(),r=k("button"),r.textContent=i,this.h()},l(a){e=w(a,"DIV",{class:!0});var f=$(e);t=w(f,"P",{class:!0,"data-svelte-h":!0}),U(t)!=="svelte-1rb22z5"&&(t.textContent=l),n=D(f),r=w(f,"BUTTON",{class:!0,"data-svelte-h":!0}),U(r)!=="svelte-zxwj5x"&&(r.textContent=i),f.forEach(v),this.h()},h(){_(t,"class","feedback-text svelte-yx7uo6"),_(r,"class","retry-btn svelte-yx7uo6"),_(e,"class","retry-section svelte-yx7uo6")},m(a,f){V(a,e,f),h(e,t),h(e,n),h(e,r),o||(c=ee(r,"click",s[7]),o=!0)},p:te,d(a){a&&v(e),o=!1,c()}}}function St(s){let e,t,l="üéâ ÿ¢ŸÅÿ±€åŸÜ!",n,r,i="ÿ¥ŸÖÿß ŸáŸÖŸá ÿ≥ŸàÿßŸÑÿßÿ™ ÿ±ÿß ŸÖÿ±Ÿàÿ± ⁄©ÿ±ÿØ€åÿØ. ÿ≠ÿßŸÑÿß ÿ¢ŸÖÿßÿØŸá ÿ™⁄©ŸÖ€åŸÑ ÿØÿ±ÿ≥ Ÿáÿ≥ÿ™€åÿØ.",o,c,a="ÿ™⁄©ŸÖ€åŸÑ ÿØÿ±ÿ≥",f,u;return{c(){e=k("div"),t=k("h3"),t.textContent=l,n=P(),r=k("p"),r.textContent=i,o=P(),c=k("button"),c.textContent=a,this.h()},l(p){e=w(p,"DIV",{class:!0});var d=$(e);t=w(d,"H3",{class:!0,"data-svelte-h":!0}),U(t)!=="svelte-11foh0e"&&(t.textContent=l),n=D(d),r=w(d,"P",{class:!0,"data-svelte-h":!0}),U(r)!=="svelte-3aw8e4"&&(r.textContent=i),o=D(d),c=w(d,"BUTTON",{class:!0,"data-svelte-h":!0}),U(c)!=="svelte-i5axgj"&&(c.textContent=a),d.forEach(v),this.h()},h(){_(t,"class","svelte-yx7uo6"),_(r,"class","svelte-yx7uo6"),_(c,"class","complete-btn svelte-yx7uo6"),_(e,"class","completion-section svelte-yx7uo6")},m(p,d){V(p,e,d),h(e,t),h(e,n),h(e,r),h(e,o),h(e,c),f||(u=ee(c,"click",s[8]),f=!0)},p:te,d(p){p&&v(e),f=!1,u()}}}function ls(s){let e,t,l,n="üìù ÿ≤ŸÖÿßŸÜ ŸÖÿ±Ÿàÿ±!",r,i,o="ÿ®€åÿß€å€åÿØ ÿ≥ŸàÿßŸÑÿßÿ™€å ⁄©Ÿá ÿßÿ¥ÿ™ÿ®ÿßŸá Ÿæÿßÿ≥ÿÆ ÿØÿßÿØ€åÿØ ÿ±ÿß ÿ™ŸÖÿ±€åŸÜ ⁄©ŸÜ€åŸÖ.",c,a,f=s[1]+1+"",u,p,d=s[0].length+"",b,S,m,C=s[2]&&Et(s),E=s[5]&&St(s);return{c(){e=k("div"),t=k("div"),l=k("h2"),l.textContent=n,r=P(),i=k("p"),i.textContent=o,c=P(),a=k("div"),u=F(f),p=F(" / "),b=F(d),S=P(),C&&C.c(),m=P(),E&&E.c(),this.h()},l(g){e=w(g,"DIV",{class:!0,dir:!0});var A=$(e);t=w(A,"DIV",{class:!0});var y=$(t);l=w(y,"H2",{class:!0,"data-svelte-h":!0}),U(l)!=="svelte-xyuxck"&&(l.textContent=n),r=D(y),i=w(y,"P",{class:!0,"data-svelte-h":!0}),U(i)!=="svelte-nwx7m6"&&(i.textContent=o),c=D(y),a=w(y,"DIV",{class:!0});var N=$(a);u=M(N,f),p=M(N," / "),b=M(N,d),N.forEach(v),y.forEach(v),S=D(A),C&&C.l(A),m=D(A),E&&E.l(A),A.forEach(v),this.h()},h(){_(l,"class","svelte-yx7uo6"),_(i,"class","svelte-yx7uo6"),_(a,"class","review-progress svelte-yx7uo6"),_(t,"class","review-header svelte-yx7uo6"),_(e,"class","review-container svelte-yx7uo6"),_(e,"dir","rtl")},m(g,A){V(g,e,A),h(e,t),h(t,l),h(t,r),h(t,i),h(t,c),h(t,a),h(a,u),h(a,p),h(a,b),h(e,S),C&&C.m(e,null),h(e,m),E&&E.m(e,null)},p(g,[A]){A&2&&f!==(f=g[1]+1+"")&&G(u,f),A&1&&d!==(d=g[0].length+"")&&G(b,d),g[2]?C?C.p(g,A):(C=Et(g),C.c(),C.m(e,m)):C&&(C.d(1),C=null),g[5]?E?E.p(g,A):(E=St(g),E.c(),E.m(e,null)):E&&(E.d(1),E=null)},i:te,o:te,d(g){g&&v(e),C&&C.d(),E&&E.d()}}}function ss(s,e,t){let l,n,r,i,{wrongAnswers:o}=e;const c=be();let a=0,f=null,u=new Set;function p(m){f||(t(3,f=m),m===l.correctAnswer&&(u.add(a),t(9,u),setTimeout(()=>{r||(t(1,a++,a),t(3,f=null))},1e3)))}function d(){t(3,f=null)}function b(){c("complete",{reviewedIds:o.map(m=>m.id)})}const S=m=>p(m);return s.$$set=m=>{"wrongAnswers"in m&&t(0,o=m.wrongAnswers)},s.$$.update=()=>{s.$$.dirty&3&&t(2,l=o[a]),s.$$.dirty&513&&t(5,n=u.size===o.length),s.$$.dirty&3&&(r=a===o.length-1),s.$$.dirty&4&&t(4,i=l?[l.correctAnswer,l.userAnswer].filter((m,C,E)=>E.indexOf(m)===C):[])},[o,a,l,f,i,n,p,d,b,u,S]}class ns extends oe{constructor(e){super(),ce(this,e,ss,ls,ne,{wrongAnswers:0})}}async function rs(s,e){const t=await X.lessonProgress.where("lessonId").equals(s).first();t?await X.lessonProgress.update(t.id,{currentStepIndex:e,status:"in-progress",updatedAt:new Date().toISOString()}):await X.lessonProgress.add({lessonId:s,status:"in-progress",currentStepIndex:e,score:0,updatedAt:new Date().toISOString()})}async function is(s){await X.wrongAnswers.add({...s,reviewedAt:void 0})}async function as(s){return await X.lessonProgress.where("lessonId").equals(s).first()}async function os(s){return await X.wrongAnswers.where("lessonId").equals(s).and(e=>!e.reviewedAt).toArray()}async function cs(s){const e=await X.wrongAnswers.where("lessonId").equals(s).toArray();for(const t of e)await X.wrongAnswers.delete(t.id)}async function fs(s){const e=await X.lessonProgress.where("lessonId").equals(s).first();e&&await X.lessonProgress.update(e.id,{currentStepIndex:0,status:"in-progress",updatedAt:new Date().toISOString()})}async function us(s){const e=new Date().toISOString();for(const t of s)await X.wrongAnswers.update(t,{reviewedAt:e})}async function ds(s,e){const t=await X.wrongAnswers.where("lessonId").equals(s).toArray(),l=new Set(t.map(r=>r.stepId)).size,n=e-l;return Math.round(n/e*100)}async function hs(s,e){const t=await ds(s,e),l=Math.round(t*1.5),n=await X.lessonProgress.where("lessonId").equals(s).first();return n?await X.lessonProgress.update(n.id,{status:"completed",score:t,completedAt:new Date().toISOString(),updatedAt:new Date().toISOString()}):await X.lessonProgress.add({lessonId:s,status:"completed",currentStepIndex:0,score:t,completedAt:new Date().toISOString(),updatedAt:new Date().toISOString()}),await ps(l),await _s(),{score:t,xpEarned:l}}async function ps(s){let e=await X.users.get(1);e?await X.users.update(1,{xp:e.xp+s}):await X.users.add({id:1,email:"learner@example.com",name:"Learner",xp:s,streak:1,lastStudyDate:new Date().toISOString(),totalStudyMinutes:0})}async function _s(){let s=await X.users.get(1);if(!s){await X.users.add({id:1,email:"learner@example.com",name:"Learner",xp:0,streak:1,lastStudyDate:new Date().toISOString(),totalStudyMinutes:0});return}const e=new Date(s.lastStudyDate),t=new Date;e.setHours(0,0,0,0),t.setHours(0,0,0,0);const l=Math.floor((t.getTime()-e.getTime())/(1e3*60*60*24));l===1?await X.users.update(1,{streak:s.streak+1,lastStudyDate:new Date().toISOString()}):l===0?await X.users.update(1,{lastStudyDate:new Date().toISOString()}):await X.users.update(1,{streak:1,lastStudyDate:new Date().toISOString()})}async function vs(s){let e=await X.users.get(1);e?await X.users.update(1,{totalStudyMinutes:e.totalStudyMinutes+s}):await X.users.add({id:1,email:"learner@example.com",name:"Learner",xp:0,streak:1,lastStudyDate:new Date().toISOString(),totalStudyMinutes:s})}function ms(){const{subscribe:s,set:e,update:t}=qt({currentIndex:0,lesson:null,isComplete:!1,canContinue:!1,sessionStartTime:Date.now()});return{subscribe:s,init:async l=>{const n=await as(l.id);let r=(n==null?void 0:n.currentStepIndex)||0;((n==null?void 0:n.status)==="completed"||r>=l.steps.length)&&(r=0,await cs(l.id),await fs(l.id)),e({currentIndex:r,lesson:l,isComplete:!1,canContinue:!0,sessionStartTime:Date.now()})},nextStep:()=>{t(l=>{if(!l.lesson)return l;const n=l.currentIndex+1;if(rs(l.lesson.id,n).catch(o=>console.error("Failed to save progress:",o)),n>=l.lesson.steps.length){const o=Math.floor((Date.now()-l.sessionStartTime)/6e4);return vs(o).catch(c=>console.error("Failed to save study time:",c)),{...l,isComplete:!0}}const r=l.lesson.steps[n].type;return{...l,currentIndex:n,canContinue:r!=="word-quiz"&&r!=="multiple-choice"}})},enableContinue:()=>{t(l=>({...l,canContinue:!0}))},disableContinue:()=>{t(l=>({...l,canContinue:!1}))}}}const me=ms(),bs=Nt(me,s=>s.lesson?s.lesson.steps[s.currentIndex]:null);function gs(s){let e=s[5].id,t,l,n=$t(s);return{c(){n.c(),t=de()},l(r){n.l(r),t=de()},m(r,i){n.m(r,i),V(r,t,i),l=!0},p(r,i){i&32&&ne(e,e=r[5].id)?(ie(),j(n,1,1,te),ae(),n=$t(r),n.c(),q(n,1),n.m(t.parentNode,t)):n.p(r,i)},i(r){l||(q(n),l=!0)},o(r){j(n),l=!1},d(r){r&&v(t),n.d(r)}}}function ws(s){let e,t;return e=new ns({props:{wrongAnswers:s[4]}}),e.$on("complete",s[8]),{c(){x(e.$$.fragment)},l(l){K(e.$$.fragment,l)},m(l,n){Y(e,l,n),t=!0},p(l,n){const r={};n&16&&(r.wrongAnswers=l[4]),e.$set(r)},i(l){t||(q(e.$$.fragment,l),t=!0)},o(l){j(e.$$.fragment,l),t=!1},d(l){Q(e,l)}}}function ks(s){let e,t,l="üéâ ÿØÿ±ÿ≥ ÿ™ŸÖÿßŸÖ ÿ¥ÿØ!",n,r,i,o,c="üìä",a,f,u=s[2].score+"",p,d,b,S,m="ÿßŸÖÿ™€åÿßÿ≤",C,E,g,A="‚≠ê",y,N,z,I=s[2].xpEarned+"",O,R,T,L="ÿßŸÖÿ™€åÿßÿ≤ ⁄©ÿ≥ÿ® ÿ¥ÿØŸá",J,W,H="ÿ®ÿßÿ≤⁄Øÿ¥ÿ™ ÿ®Ÿá ÿµŸÅÿ≠Ÿá ÿßÿµŸÑ€å",Z,fe;return{c(){e=k("div"),t=k("h2"),t.textContent=l,n=P(),r=k("div"),i=k("div"),o=k("span"),o.textContent=c,a=P(),f=k("span"),p=F(u),d=F("%"),b=P(),S=k("span"),S.textContent=m,C=P(),E=k("div"),g=k("span"),g.textContent=A,y=P(),N=k("span"),z=F("+"),O=F(I),R=P(),T=k("span"),T.textContent=L,J=P(),W=k("button"),W.textContent=H,this.h()},l(re){e=w(re,"DIV",{class:!0});var se=$(e);t=w(se,"H2",{class:!0,"data-svelte-h":!0}),U(t)!=="svelte-qfitu3"&&(t.textContent=l),n=D(se),r=w(se,"DIV",{class:!0});var pe=$(r);i=w(pe,"DIV",{class:!0});var he=$(i);o=w(he,"SPAN",{class:!0,"data-svelte-h":!0}),U(o)!=="svelte-1kxtmwe"&&(o.textContent=c),a=D(he),f=w(he,"SPAN",{class:!0});var ke=$(f);p=M(ke,u),d=M(ke,"%"),ke.forEach(v),b=D(he),S=w(he,"SPAN",{class:!0,"data-svelte-h":!0}),U(S)!=="svelte-7vexxv"&&(S.textContent=m),he.forEach(v),C=D(pe),E=w(pe,"DIV",{class:!0});var ve=$(E);g=w(ve,"SPAN",{class:!0,"data-svelte-h":!0}),U(g)!=="svelte-1mcovjp"&&(g.textContent=A),y=D(ve),N=w(ve,"SPAN",{class:!0});var Ce=$(N);z=M(Ce,"+"),O=M(Ce,I),Ce.forEach(v),R=D(ve),T=w(ve,"SPAN",{class:!0,"data-svelte-h":!0}),U(T)!=="svelte-1a7swj5"&&(T.textContent=L),ve.forEach(v),pe.forEach(v),J=D(se),W=w(se,"BUTTON",{class:!0,"data-svelte-h":!0}),U(W)!=="svelte-1asliw"&&(W.textContent=H),se.forEach(v),this.h()},h(){_(t,"class","svelte-1vomg9"),_(o,"class","stat-icon svelte-1vomg9"),_(f,"class","stat-value svelte-1vomg9"),_(S,"class","stat-label svelte-1vomg9"),_(i,"class","stat-item svelte-1vomg9"),_(g,"class","stat-icon svelte-1vomg9"),_(N,"class","stat-value svelte-1vomg9"),_(T,"class","stat-label svelte-1vomg9"),_(E,"class","stat-item svelte-1vomg9"),_(r,"class","stats-grid svelte-1vomg9"),_(W,"class","finish-btn svelte-1vomg9"),_(e,"class","completion-screen svelte-1vomg9")},m(re,se){V(re,e,se),h(e,t),h(e,n),h(e,r),h(r,i),h(i,o),h(i,a),h(i,f),h(f,p),h(f,d),h(i,b),h(i,S),h(r,C),h(r,E),h(E,g),h(E,y),h(E,N),h(N,z),h(N,O),h(E,R),h(E,T),h(e,J),h(e,W),Z||(fe=ee(W,"click",Es),Z=!0)},p(re,se){se&4&&u!==(u=re[2].score+"")&&G(p,u),se&4&&I!==(I=re[2].xpEarned+"")&&G(O,I)},i:te,o:te,d(re){re&&v(e),Z=!1,fe()}}}function $t(s){let e,t,l;return t=new xl({props:{step:s[5]}}),t.$on("answer",s[7]),{c(){e=k("div"),x(t.$$.fragment),this.h()},l(n){e=w(n,"DIV",{class:!0});var r=$(e);K(t.$$.fragment,r),r.forEach(v),this.h()},h(){_(e,"class","step-animation")},m(n,r){V(n,e,r),Y(t,e,null),l=!0},p(n,r){const i={};r&32&&(i.step=n[5]),t.$set(i)},i(n){l||(q(t.$$.fragment,n),l=!0)},o(n){j(t.$$.fragment,n),l=!1},d(n){n&&v(e),Q(t)}}}function It(s){let e,t,l,n,r,i;return{c(){e=k("footer"),t=k("button"),l=F("ÿßÿØÿßŸÖŸá"),this.h()},l(o){e=w(o,"FOOTER",{class:!0});var c=$(e);t=w(c,"BUTTON",{class:!0});var a=$(t);l=M(a,"ÿßÿØÿßŸÖŸá"),a.forEach(v),c.forEach(v),this.h()},h(){_(t,"class","continue-btn svelte-1vomg9"),t.disabled=n=!s[3].canContinue,_(e,"class","lesson-footer svelte-1vomg9")},m(o,c){V(o,e,c),h(e,t),h(t,l),r||(i=ee(t,"click",s[6]),r=!0)},p(o,c){c&8&&n!==(n=!o[3].canContinue)&&(t.disabled=n)},d(o){o&&v(e),r=!1,i()}}}function Cs(s){let e,t,l,n,r,i,o,c,a,f;const u=[ks,ws,gs],p=[];function d(S,m){return S[2]?0:S[1]?1:S[5]?2:-1}~(o=d(s))&&(c=p[o]=u[o](s));let b=!s[3].isComplete&&!s[1]&&It(s);return{c(){e=k("div"),t=k("header"),l=k("div"),n=k("div"),r=P(),i=k("main"),c&&c.c(),a=P(),b&&b.c(),this.h()},l(S){e=w(S,"DIV",{class:!0});var m=$(e);t=w(m,"HEADER",{class:!0});var C=$(t);l=w(C,"DIV",{class:!0});var E=$(l);n=w(E,"DIV",{class:!0,style:!0}),$(n).forEach(v),E.forEach(v),C.forEach(v),r=D(m),i=w(m,"MAIN",{class:!0});var g=$(i);c&&c.l(g),g.forEach(v),a=D(m),b&&b.l(m),m.forEach(v),this.h()},h(){_(n,"class","progress-fill svelte-1vomg9"),Ae(n,"width",s[3].currentIndex/(s[0].lesson.steps.length||1)*100+"%"),_(l,"class","progress-bar svelte-1vomg9"),_(t,"class","lesson-header svelte-1vomg9"),_(i,"class","lesson-content svelte-1vomg9"),_(e,"class","lesson-layout svelte-1vomg9")},m(S,m){V(S,e,m),h(e,t),h(t,l),h(l,n),h(e,r),h(e,i),~o&&p[o].m(i,null),h(e,a),b&&b.m(e,null),f=!0},p(S,[m]){(!f||m&9)&&Ae(n,"width",S[3].currentIndex/(S[0].lesson.steps.length||1)*100+"%");let C=o;o=d(S),o===C?~o&&p[o].p(S,m):(c&&(ie(),j(p[C],1,1,()=>{p[C]=null}),ae()),~o?(c=p[o],c?c.p(S,m):(c=p[o]=u[o](S),c.c()),q(c,1),c.m(i,null)):c=null),!S[3].isComplete&&!S[1]?b?b.p(S,m):(b=It(S),b.c(),b.m(e,null)):b&&(b.d(1),b=null)},i(S){f||(q(c),f=!0)},o(S){j(c),f=!1},d(S){S&&v(e),~o&&p[o].d(),b&&b.d()}}}function Es(){window.location.href="/"}function As(s,e,t){let l,n;ye(s,bs,b=>t(5,l=b)),ye(s,me,b=>t(3,n=b));let{data:r}=e,i=!1,o=[],c=null;Pt(()=>{r.lesson&&me.init(r.lesson)});function a(){me.nextStep()}async function f(b){const{correct:S,userAnswer:m,correctAnswer:C,allowContinue:E}=b.detail;S?(console.log("‚úÖ Correct Answer!"),me.enableContinue()):(console.log("‚ùå Wrong Answer - Must retry"),await is({lessonId:r.lesson.id,stepId:l.id,stepType:l.type,question:l.question||l.prompt,userAnswer:m||"unknown",correctAnswer:C||"unknown"}),E===!1&&me.disableContinue())}async function u(){t(4,o=await os(r.lesson.id)),o.length>0?t(1,i=!0):await d()}async function p(b){const{reviewedIds:S}=b.detail;await us(S),await d()}async function d(){t(2,c=await hs(r.lesson.id,r.lesson.steps.length))}return s.$$set=b=>{"data"in b&&t(0,r=b.data)},s.$$.update=()=>{s.$$.dirty&14&&n.isComplete&&!i&&!c&&u()},[r,i,c,n,o,l,a,f,p]}class Ts extends oe{constructor(e){super(),ce(this,e,As,Cs,ne,{data:0})}}export{Ts as component};
